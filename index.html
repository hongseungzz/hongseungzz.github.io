<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Page 1 | SeungZZang&#39;s Blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  
  
  
  
  <meta property="og:type" content="website">
<meta property="og:title" content="SeungZZang&#39;s Blog">
<meta property="og:url" content="https://hongseungzz.github.io/index.html">
<meta property="og:site_name" content="SeungZZang&#39;s Blog">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="John Doe">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="SeungZZang&#39;s Blog" type="application/atom+xml">
  
  <link rel="icon" href="/css/images/favicon.ico">
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link href="https://fonts.googleapis.com/css?family=Open+Sans|Montserrat:700" rel="stylesheet" type="text/css">
  <link href="https://fonts.googleapis.com/css?family=Roboto:400,300,300italic,400italic" rel="stylesheet" type="text/css">
  <link href="//cdn.bootcss.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet">
  <style type="text/css">
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/9749f0/00000000000000000001008f/27/l?subset_id=2&fvd=n5) format("woff2");font-weight:500;font-style:normal;}
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/90cf9f/000000000000000000010091/27/l?subset_id=2&fvd=n7) format("woff2");font-weight:500;font-style:normal;}
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/8a5494/000000000000000000013365/27/l?subset_id=2&fvd=n4) format("woff2");font-weight:lighter;font-style:normal;}
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/d337d8/000000000000000000010095/27/l?subset_id=2&fvd=i4) format("woff2");font-weight:400;font-style:italic;}</style>
    
  <link rel="stylesheet" id="athemes-headings-fonts-css" href="//fonts.googleapis.com/css?family=Yanone+Kaffeesatz%3A200%2C300%2C400%2C700&amp;ver=4.6.1" type="text/css" media="all">

  <link rel="stylesheet" id="athemes-headings-fonts-css" href="//fonts.googleapis.com/css?family=Oswald%3A300%2C400%2C700&amp;ver=4.6.1" type="text/css" media="all">
  
<link rel="stylesheet" href="/css/style.css">


  
<script src="/js/jquery-3.1.1.min.js"></script>


  <!-- Bootstrap core CSS -->
  <link rel="stylesheet" href="/css/bootstrap.css" >
  <link rel="stylesheet" href="/css/fashion.css" >
  <link rel="stylesheet" href="/css/glyphs.css" >

<meta name="generator" content="Hexo 6.2.0"></head>



  <body>


  


<header id="allheader" class="site-header" role="banner" 
   >
  <div class="clearfix container">
      <div class="site-branding">

          <h1 class="site-title">
            
              <a href="/" title="SeungZZang&#39;s Blog" rel="home"> SeungZZang&#39;s Blog </a>
            
          </h1>
          
          
            
          <nav id="main-navigation" class="main-navigation" role="navigation">
            <a class="nav-open">Menu</a>
            <a class="nav-close">Close</a>

            <div class="clearfix sf-menu">
              <ul id="main-nav" class="menu sf-js-enabled sf-arrows"  style="touch-action: pan-y;">
                    
                      <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663" linktext="/"> <a class="" href="/">Home</a> </li>
                    
                      <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663" linktext="archives"> <a class="" href="/archives">Archives</a> </li>
                    
                      <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663" linktext="categories"> <a class="" href="/categories">Categories</a> </li>
                    
                      <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663" linktext="tags"> <a class="" href="/tags">Tags</a> </li>
                    
                      <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663" linktext="about"> <a class="" href="/about">About</a> </li>
                    
              </ul>
            </div>
          </nav>

      </div>
  </div>
</header>


  <div id="container">
    <div id="wrap">
            
      <div id="content" class="outer">
        
          <section id="main">
  
    <article id="post-example"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/2022/07/26/example/">July 26, 2022, Day29</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	<a href="/2022/07/26/example/" class="article-date">
	  <time datetime="2022-07-25T23:22:22.000Z" itemprop="datePublished">July 26, 2022</time>
	</a>

       
      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="7-26-금-크롤링-복습"><a href="#7-26-금-크롤링-복습" class="headerlink" title="7.26(금) 크롤링 복습"></a>7.26(금) 크롤링 복습</h1><h2 id="KBO-보도자료를-예시로-함"><a href="#KBO-보도자료를-예시로-함" class="headerlink" title="KBO 보도자료를 예시로 함"></a>KBO 보도자료를 예시로 함</h2><p>import requests<br>from bs4 import BeautifulSoup</p>
<p>def crawling(soup):<br>  ul &#x3D; soup.find(“ul”, class_ &#x3D; ‘boardPhoto’)</p>
<p>  result &#x3D; []<br>  links &#x3D; []<br>  for div in ul.find_all(“div”, class_ &#x3D; “txt”):<br>        result.append(div.find(“a”).get_text())<br>        links.append(div.find(“a”)[‘href’])<br>  return result, links</p>
<p>def main():</p>
<p>  url &#x3D; “<a target="_blank" rel="noopener" href="https://www.koreabaseball.com/News/BreakingNews/List.aspx&quot;">https://www.koreabaseball.com/News/BreakingNews/List.aspx&quot;</a><br>  req &#x3D; requests.get(url)<br>  soup &#x3D; BeautifulSoup(req.text, “html.parser”)</p>
<p>  print(crawling(soup))</p>
<p>if <strong>name</strong> &#x3D;&#x3D; “<strong>main</strong>“:<br>  main()</p>

      
    </div>
    <footer class="entry-meta entry-footer">
      
      
      
    </footer>
    <hr class="entry-footer-hr">
  </div>
  
</article>

<!-- Table of Contents -->

  
    <article id="post-Day27_20220722"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/2022/07/22/Day27_20220722/">July 22, 2022, Day27</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	<a href="/2022/07/22/Day27_20220722/" class="article-date">
	  <time datetime="2022-07-21T23:22:22.000Z" itemprop="datePublished">July 22, 2022</time>
	</a>

       
      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="7-22-금-강의"><a href="#7-22-금-강의" class="headerlink" title="7.22(금) 강의"></a>7.22(금) 강의</h1><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- p.198</span></span><br><span class="line"><span class="comment">-- 서브쿼리</span></span><br><span class="line"><span class="comment">-- SELECT, FROM, WHERE</span></span><br><span class="line"><span class="comment">-- FROM : 인라인 뷰</span></span><br><span class="line"><span class="comment">-- 메인쿼리 : 사원테이블에서는 id, name 출력</span></span><br><span class="line"><span class="comment">--            부서테이블에서는 부서id, name 출력</span></span><br><span class="line"><span class="comment">--            사원테이블의 급여가 기획부서의 평균급여보다 높은 사람</span></span><br><span class="line"><span class="comment">--            a.salary &gt; d.avg_salary</span></span><br><span class="line"><span class="comment">-- 서브쿼리 : 기획부서의 평균급여</span></span><br><span class="line"><span class="keyword">SELECT</span> a.employee_id</span><br><span class="line">     , a.emp_name</span><br><span class="line">     , b.department_id</span><br><span class="line">     , b.department_name</span><br><span class="line"><span class="keyword">FROM</span> employees a</span><br><span class="line">    , departments b</span><br><span class="line">    , (<span class="keyword">SELECT</span> <span class="built_in">AVG</span>(c.salary) <span class="keyword">AS</span> avg_salary</span><br><span class="line">       <span class="keyword">FROM</span> departments b</span><br><span class="line">          , employees c</span><br><span class="line">       <span class="keyword">WHERE</span> b.parent_id <span class="operator">=</span> <span class="number">90</span></span><br><span class="line">         <span class="keyword">AND</span> b.department_id <span class="operator">=</span> c.department_id) d</span><br><span class="line"><span class="keyword">WHERE</span> a.department_id <span class="operator">=</span> b.department_id</span><br><span class="line">  <span class="keyword">AND</span> a.salary <span class="operator">&gt;</span> d.avg_salary;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- p.199 하단</span></span><br><span class="line"><span class="comment">-- 2000년 이탈리아 평균 매출액(연평균)보다 큰 월의 평균 매출액을 구하는 것</span></span><br><span class="line"><span class="comment">-- 월평균 매출액 쿼리</span></span><br><span class="line"><span class="keyword">SELECT</span> a.sales_month, ROUND(<span class="built_in">AVG</span>(a.amount_sold)) <span class="keyword">AS</span> month_avg</span><br><span class="line"><span class="keyword">FROM</span> sales a</span><br><span class="line">   , customers b</span><br><span class="line">   , countries c</span><br><span class="line"><span class="keyword">WHERE</span> a.sales_month <span class="keyword">BETWEEN</span> <span class="string">&#x27;200001&#x27;</span> <span class="keyword">AND</span> <span class="string">&#x27;200012&#x27;</span></span><br><span class="line">  <span class="keyword">AND</span> a.cust_id <span class="operator">=</span> b.CUST_ID</span><br><span class="line">  <span class="keyword">AND</span> b.COUNTRY_ID <span class="operator">=</span> c.COUNTRY_ID</span><br><span class="line">  <span class="keyword">AND</span> c.COUNTRY_NAME <span class="operator">=</span> <span class="string">&#x27;Italy&#x27;</span></span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> a.sales_month;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 연평균 매출액 쿼리</span></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">  ROUND(<span class="built_in">AVG</span>(a.amount_sold)) <span class="keyword">AS</span> year_avg</span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line"> sales a</span><br><span class="line"> , customers b</span><br><span class="line"> , countries c</span><br><span class="line"> <span class="keyword">WHERE</span> a.sales_month <span class="keyword">BETWEEN</span> <span class="string">&#x27;200001&#x27;</span> <span class="keyword">AND</span> <span class="string">&#x27;200012&#x27;</span></span><br><span class="line">   <span class="keyword">AND</span> a.cust_id <span class="operator">=</span> b.CUST_ID</span><br><span class="line">   <span class="keyword">AND</span> b.COUNTRY_ID <span class="operator">=</span> c.COUNTRY_ID</span><br><span class="line">   <span class="keyword">AND</span> c.COUNTRY_NAME <span class="operator">=</span> <span class="string">&#x27;Italy&#x27;</span>;</span><br><span class="line">   </span><br><span class="line"><span class="comment">-- 전체</span></span><br><span class="line"><span class="keyword">SELECT</span> a.<span class="operator">*</span></span><br><span class="line"><span class="keyword">FROM</span>(<span class="keyword">SELECT</span> a.sales_month, ROUND(<span class="built_in">AVG</span>(a.amount_sold)) <span class="keyword">AS</span> month_avg</span><br><span class="line">       <span class="keyword">FROM</span> sales a</span><br><span class="line">            , customers b</span><br><span class="line">            , countries c</span><br><span class="line">      <span class="keyword">WHERE</span> a.sales_month <span class="keyword">BETWEEN</span> <span class="string">&#x27;200001&#x27;</span> <span class="keyword">AND</span> <span class="string">&#x27;200012&#x27;</span></span><br><span class="line">        <span class="keyword">AND</span> a.cust_id <span class="operator">=</span> b.CUST_ID</span><br><span class="line">        <span class="keyword">AND</span> b.COUNTRY_ID <span class="operator">=</span> c.COUNTRY_ID</span><br><span class="line">        <span class="keyword">AND</span> c.COUNTRY_NAME <span class="operator">=</span> <span class="string">&#x27;Italy&#x27;</span></span><br><span class="line">        <span class="keyword">GROUP</span> <span class="keyword">BY</span> a.sales_month</span><br><span class="line">) a,</span><br><span class="line">    (<span class="keyword">SELECT</span> ROUND(<span class="built_in">AVG</span>(a.amount_sold)) <span class="keyword">AS</span> year_avg</span><br><span class="line">       <span class="keyword">FROM</span> sales a</span><br><span class="line">            , customers b</span><br><span class="line">            , countries c</span><br><span class="line">      <span class="keyword">WHERE</span> a.sales_month <span class="keyword">BETWEEN</span> <span class="string">&#x27;200001&#x27;</span> <span class="keyword">AND</span> <span class="string">&#x27;200012&#x27;</span></span><br><span class="line">        <span class="keyword">AND</span> a.cust_id <span class="operator">=</span> b.CUST_ID</span><br><span class="line">        <span class="keyword">AND</span> b.COUNTRY_ID <span class="operator">=</span> c.COUNTRY_ID</span><br><span class="line">        <span class="keyword">AND</span> c.COUNTRY_NAME <span class="operator">=</span> <span class="string">&#x27;Italy&#x27;</span>) b</span><br><span class="line"><span class="keyword">WHERE</span> a.month_avg <span class="operator">&gt;</span> b.year_avg;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 계층형 쿼리</span></span><br><span class="line"><span class="comment">-- p.208 부서정보</span></span><br><span class="line"><span class="comment">-- p.211</span></span><br><span class="line"><span class="comment">-- START WITH 조건 &amp; CONNECT BY 조건</span></span><br><span class="line"><span class="comment">-- parent_id == 상위 부서 정보를 가지고 있음</span></span><br><span class="line"><span class="comment">-- CONNECT BY PRIOR department_id = parent_id</span></span><br><span class="line"><span class="keyword">SELECT</span> department_id, LPAD(<span class="string">&#x27; &#x27;</span>, <span class="number">3</span> <span class="operator">*</span> (LEVEL<span class="number">-1</span>)) <span class="operator">||</span> department_name, LEVEL</span><br><span class="line"> <span class="keyword">FROM</span> departments</span><br><span class="line"><span class="keyword">START</span> <span class="keyword">WITH</span> parent_id <span class="keyword">IS</span> <span class="keyword">NULL</span></span><br><span class="line"><span class="keyword">CONNECT</span> <span class="keyword">BY</span> PRIOR department_id <span class="operator">=</span> parent_id;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 사원테이블에 있는 manager_id, employee_id</span></span><br><span class="line"><span class="keyword">SELECT</span> a.employee_id</span><br><span class="line">     , LPAD(<span class="string">&#x27; &#x27;</span>, <span class="number">3</span> <span class="operator">*</span> (LEVEL<span class="number">-1</span>)) <span class="operator">||</span> a.emp_name</span><br><span class="line">     , LEVEL</span><br><span class="line">     , b.department_name</span><br><span class="line"><span class="keyword">FROM</span> employees a</span><br><span class="line">   , departments b</span><br><span class="line"><span class="keyword">WHERE</span> a.department_id <span class="operator">=</span> b.department_id</span><br><span class="line"><span class="keyword">START</span> <span class="keyword">WITH</span> a.manager_id <span class="keyword">IS</span> <span class="keyword">NULL</span></span><br><span class="line"><span class="keyword">CONNECT</span> <span class="keyword">BY</span> PRIOR a.employee_id <span class="operator">=</span> a.manager_id;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- p.213</span></span><br><span class="line"><span class="keyword">SELECT</span> a.employee_id</span><br><span class="line">     , LPAD(<span class="string">&#x27; &#x27;</span>, <span class="number">3</span> <span class="operator">*</span> (LEVEL<span class="number">-1</span>)) <span class="operator">||</span> a.emp_name <span class="keyword">as</span> empname</span><br><span class="line">     , LEVEL</span><br><span class="line">     , b.department_id</span><br><span class="line"><span class="keyword">FROM</span> employees a</span><br><span class="line">   , departments b</span><br><span class="line"><span class="keyword">WHERE</span> a.department_id <span class="operator">=</span> b.department_id</span><br><span class="line">  <span class="keyword">AND</span> a.department_id <span class="operator">=</span> <span class="number">30</span></span><br><span class="line"><span class="keyword">START</span> <span class="keyword">WITH</span> a.manager_id <span class="keyword">IS</span> <span class="keyword">NULL</span></span><br><span class="line"><span class="keyword">CONNECT</span> <span class="keyword">BY</span> NOCYCLE PRIOR a.employee_id <span class="operator">=</span> a.manager_id;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- </span></span><br><span class="line"><span class="keyword">SELECT</span> a.employee_id</span><br><span class="line">     , LPAD(<span class="string">&#x27; &#x27;</span>, <span class="number">3</span> <span class="operator">*</span> (LEVEL<span class="number">-1</span>)) <span class="operator">||</span> a.emp_name</span><br><span class="line">     , LEVEL</span><br><span class="line">     , b.department_name</span><br><span class="line">     , a.DEPARTMENT_ID</span><br><span class="line"><span class="keyword">FROM</span> employees a</span><br><span class="line">   , departments b</span><br><span class="line"><span class="keyword">WHERE</span> a.department_id <span class="operator">=</span> b.department_id</span><br><span class="line"><span class="keyword">START</span> <span class="keyword">WITH</span> a.manager_id <span class="keyword">IS</span> <span class="keyword">NULL</span></span><br><span class="line"><span class="keyword">CONNECT</span> <span class="keyword">BY</span> NOCYCLE PRIOR a.employee_id <span class="operator">=</span> a.manager_id</span><br><span class="line">    <span class="keyword">AND</span> a.department_id <span class="operator">=</span> <span class="number">30</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 계층형 쿼리 심화학습</span></span><br><span class="line"><span class="comment">-- 쿼리가 나옴. ORDER BY 정렬 가능</span></span><br><span class="line"><span class="comment">-- ORDER SIBLINGS BY</span></span><br><span class="line"><span class="keyword">SELECT</span> department_id, LPAD(<span class="string">&#x27; &#x27;</span>, <span class="number">3</span> <span class="operator">*</span> (LEVEL<span class="number">-1</span>)) <span class="operator">||</span> department_name, LEVEL</span><br><span class="line">  <span class="keyword">FROM</span> departments</span><br><span class="line">  <span class="keyword">START</span> <span class="keyword">WITH</span> parent_id <span class="keyword">IS</span> <span class="keyword">NULL</span></span><br><span class="line">  <span class="keyword">CONNECT</span> <span class="keyword">BY</span> PRIOR department_id <span class="operator">=</span> parent_id</span><br><span class="line"><span class="keyword">ORDER</span> SIBLINGS <span class="keyword">BY</span> department_name;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 연산자</span></span><br><span class="line"><span class="comment">-- CONNECT_BY_ROOT</span></span><br><span class="line"><span class="keyword">SELECT</span> department_id</span><br><span class="line">     , LPAD(<span class="string">&#x27; &#x27;</span>, <span class="number">3</span> <span class="operator">*</span> (LEVEL<span class="number">-1</span>)) <span class="operator">||</span> department_name</span><br><span class="line">     , LEVEL</span><br><span class="line">     , CONNECT_BY_ROOT department_name <span class="keyword">AS</span> root_name</span><br><span class="line">  <span class="keyword">FROM</span> departments</span><br><span class="line">  <span class="keyword">START</span> <span class="keyword">WITH</span> parent_id <span class="keyword">IS</span> <span class="keyword">NULL</span></span><br><span class="line"><span class="keyword">CONNECT</span> <span class="keyword">BY</span> PRIOR department_id <span class="operator">=</span> parent_id;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- CONNECT_BY_ISLEAF</span></span><br><span class="line"><span class="keyword">SELECT</span> department_id</span><br><span class="line">     , LPAD(<span class="string">&#x27; &#x27;</span>, <span class="number">3</span> <span class="operator">*</span> (LEVEL<span class="number">-1</span>)) <span class="operator">||</span> department_name</span><br><span class="line">     , LEVEL</span><br><span class="line">     , CONNECT_BY_ISLEAF</span><br><span class="line">  <span class="keyword">FROM</span> departments</span><br><span class="line">  <span class="keyword">START</span> <span class="keyword">WITH</span> parent_id <span class="keyword">IS</span> <span class="keyword">NULL</span></span><br><span class="line">  <span class="keyword">CONNECT</span> <span class="keyword">BY</span> PRIOR department_id <span class="operator">=</span> parent_id;</span><br><span class="line">  </span><br><span class="line"><span class="comment">-- SYS_CONNECT_BY_PATH</span></span><br><span class="line"><span class="keyword">SELECT</span> department_id</span><br><span class="line">     , LPAD(<span class="string">&#x27; &#x27;</span>, <span class="number">3</span> <span class="operator">*</span> (LEVEL<span class="number">-1</span>)) <span class="operator">||</span> department_name</span><br><span class="line">     , LEVEL</span><br><span class="line">     , SYS_CONNECT_BY_PATH(department_name, <span class="string">&#x27;|&#x27;</span>)</span><br><span class="line">  <span class="keyword">FROM</span> departments</span><br><span class="line">  <span class="keyword">START</span> <span class="keyword">WITH</span> parent_id <span class="keyword">IS</span> <span class="keyword">NULL</span></span><br><span class="line">  <span class="keyword">CONNECT</span> <span class="keyword">BY</span> PRIOR department_id <span class="operator">=</span> parent_id;.</span><br><span class="line"></span><br><span class="line"><span class="comment">-- CONNECT_BY_ISCYCLE</span></span><br><span class="line"><span class="keyword">UPDATE</span> departments</span><br><span class="line">   <span class="keyword">SET</span> parent_id <span class="operator">=</span> <span class="number">170</span></span><br><span class="line"> <span class="keyword">WHERE</span> department_id <span class="operator">=</span> <span class="number">30</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> department_id</span><br><span class="line">     , LPAD(<span class="string">&#x27; &#x27;</span>, <span class="number">3</span> <span class="operator">*</span> (LEVEL<span class="number">-1</span>)) <span class="operator">||</span> department_name</span><br><span class="line">     , LEVEL</span><br><span class="line">     , parent_id</span><br><span class="line">  <span class="keyword">FROM</span> departments</span><br><span class="line">  <span class="keyword">START</span> <span class="keyword">WITH</span> department_id <span class="operator">=</span> <span class="number">30</span></span><br><span class="line"><span class="keyword">CONNECT</span> <span class="keyword">BY</span> PRIOR department_id <span class="operator">=</span> parent_id; <span class="comment">-- 무한루프 오류 발생</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 루프 수정</span></span><br><span class="line"><span class="keyword">UPDATE</span> departments</span><br><span class="line">   <span class="keyword">SET</span> parent_id <span class="operator">=</span> <span class="number">170</span></span><br><span class="line"> <span class="keyword">WHERE</span> department_id <span class="operator">=</span> <span class="number">30</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> department_id</span><br><span class="line">     , LPAD(<span class="string">&#x27; &#x27;</span>, <span class="number">3</span> <span class="operator">*</span> (LEVEL<span class="number">-1</span>)) <span class="operator">||</span> department_name</span><br><span class="line">     , LEVEL</span><br><span class="line">     , CONNECT_BY_ISCYCLE ISLoop</span><br><span class="line">     , parent_id</span><br><span class="line">  <span class="keyword">FROM</span> departments</span><br><span class="line">  <span class="keyword">START</span> <span class="keyword">WITH</span> department_id <span class="operator">=</span> <span class="number">30</span></span><br><span class="line"><span class="keyword">CONNECT</span> <span class="keyword">BY</span> NOCYCLE PRIOR department_id <span class="operator">=</span> parent_id;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 계층형 쿼리 응용</span></span><br><span class="line"><span class="comment">-- 샘플 데이터 만들기</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> ex7_1 <span class="keyword">AS</span></span><br><span class="line"><span class="keyword">SELECT</span> ROWNUM seq</span><br><span class="line">        , <span class="string">&#x27;2014&#x27;</span> <span class="operator">||</span> LPAD(<span class="built_in">CEIL</span>(ROWNUM<span class="operator">/</span><span class="number">1000</span>), <span class="number">2</span>, <span class="string">&#x27;0&#x27;</span>) <span class="keyword">month</span></span><br><span class="line">        , ROUND(DBMS_RANDOM.VALUE(<span class="number">100</span>, <span class="number">1000</span>)) amt</span><br><span class="line">  <span class="keyword">FROM</span> DUAL</span><br><span class="line"><span class="keyword">CONNECT</span> <span class="keyword">BY</span> LEVEL <span class="operator">&lt;=</span> <span class="number">12000</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> ex7_1;</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">month</span>, <span class="built_in">SUM</span>(amt)</span><br><span class="line">  <span class="keyword">FROM</span> ex7_1</span><br><span class="line"> <span class="keyword">GROUP</span> <span class="keyword">BY</span> <span class="keyword">month</span></span><br><span class="line"> <span class="keyword">ORDER</span> <span class="keyword">BY</span> <span class="keyword">month</span>;</span><br><span class="line"> </span><br><span class="line"><span class="comment">-- WITH절</span></span><br><span class="line"><span class="comment">-- 서브쿼리의 가독성 향상</span></span><br><span class="line"><span class="comment">-- 연도별, 최종, 월별</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">WITH</span> b2 <span class="keyword">AS</span>(</span><br><span class="line"> <span class="keyword">SELECT</span> <span class="keyword">period</span></span><br><span class="line">      , region</span><br><span class="line">      , <span class="built_in">sum</span>(loan_jan_amt) jan_amt</span><br><span class="line">   <span class="keyword">FROM</span> kor_loan_status</span><br><span class="line">  <span class="keyword">GROUP</span> <span class="keyword">BY</span> <span class="keyword">period</span>, region</span><br><span class="line">            ),</span><br><span class="line">      c <span class="keyword">AS</span>(</span><br><span class="line"> <span class="keyword">SELECT</span> b.period, <span class="built_in">MAX</span>(b.jan_amt) max_jan_amt</span><br><span class="line">   <span class="keyword">FROM</span>(<span class="keyword">SELECT</span> <span class="keyword">period</span>, region, <span class="built_in">sum</span>(loan_jan_amt) jan_amt</span><br><span class="line">          <span class="keyword">FROM</span> kor_loan_status</span><br><span class="line">         <span class="keyword">GROUP</span> <span class="keyword">BY</span> <span class="keyword">period</span>, region</span><br><span class="line">        ) b</span><br><span class="line">        , (<span class="keyword">SELECT</span> <span class="built_in">MAX</span>(<span class="keyword">PERIOD</span>) max_month</span><br><span class="line">             <span class="keyword">FROM</span> kor_loan_status</span><br><span class="line">            <span class="keyword">GROUP</span> <span class="keyword">BY</span> SUBSTR(<span class="keyword">PERIOD</span>, <span class="number">1</span>, <span class="number">4</span>)</span><br><span class="line">           ) a</span><br><span class="line">         <span class="keyword">WHERE</span> b.period <span class="operator">=</span> a.max_month</span><br><span class="line">         <span class="keyword">GROUP</span> <span class="keyword">BY</span> b.period</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> b2.<span class="operator">*</span> </span><br><span class="line">  <span class="keyword">FROM</span> b2, c</span><br><span class="line"><span class="keyword">WHERE</span> b2.period <span class="operator">=</span> c.period</span><br><span class="line">  <span class="keyword">AND</span> b2.jan_amt <span class="operator">=</span> c.max_jan_amt</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- p.231</span></span><br><span class="line"><span class="comment">-- 분석 함수와 window 함수</span></span><br><span class="line"><span class="comment">-- 문법</span></span><br><span class="line"><span class="comment">-- 분석 함수(미개변수) OVER (PARTITION BY ....)</span></span><br><span class="line"><span class="comment">-- ROW_NUMBER()/ROWNUM</span></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line"> department_id</span><br><span class="line"> , emp_name</span><br><span class="line"> , <span class="built_in">ROW_NUMBER</span>() <span class="keyword">OVER</span> (<span class="keyword">PARTITION</span> <span class="keyword">BY</span> department_id</span><br><span class="line">                      <span class="keyword">ORDER</span> <span class="keyword">BY</span> department_id, emp_name) dep_rows</span><br><span class="line"><span class="keyword">FROM</span> employees;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- RANK()</span></span><br><span class="line"><span class="keyword">SELECT</span> department_id</span><br><span class="line">     , emp_name</span><br><span class="line">     , salary</span><br><span class="line">     , <span class="built_in">RANK</span>() <span class="keyword">OVER</span> (<span class="keyword">PARTITION</span> <span class="keyword">BY</span> department_id</span><br><span class="line">                    <span class="keyword">ORDER</span> <span class="keyword">BY</span> salary) dep_rank</span><br><span class="line"><span class="keyword">FROM</span> employees;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- DENSE_RANK()</span></span><br><span class="line"><span class="keyword">SELECT</span> department_id</span><br><span class="line">     , emp_name</span><br><span class="line">     , salary</span><br><span class="line">     , <span class="built_in">DENSE_RANK</span>() <span class="keyword">OVER</span> (<span class="keyword">PARTITION</span> <span class="keyword">BY</span> department_id</span><br><span class="line">                    <span class="keyword">ORDER</span> <span class="keyword">BY</span> salary) dep_rank</span><br><span class="line"><span class="keyword">FROM</span> employees;</span><br><span class="line"></span><br><span class="line"><span class="comment">--</span></span><br><span class="line"><span class="keyword">WITH</span> temp <span class="keyword">AS</span>(</span><br><span class="line">              <span class="keyword">SELECT</span> department_id</span><br><span class="line">                   , emp_name</span><br><span class="line">                   , salary</span><br><span class="line">                   , <span class="built_in">DENSE_RANK</span>() <span class="keyword">OVER</span> (<span class="keyword">PARTITION</span> <span class="keyword">BY</span> department_id</span><br><span class="line">                                        <span class="keyword">ORDER</span> <span class="keyword">BY</span> salary) dep_rank                    </span><br><span class="line">                <span class="keyword">FROM</span> employees)</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span></span><br><span class="line"><span class="keyword">FROM</span> temp</span><br><span class="line"><span class="keyword">WHERE</span> dep_rank <span class="operator">&lt;=</span> <span class="number">3</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> </span><br><span class="line"><span class="keyword">FROM</span> (<span class="keyword">SELECT</span> </span><br><span class="line">    department_id</span><br><span class="line">    , emp_name</span><br><span class="line">    , salary</span><br><span class="line">    , <span class="built_in">DENSE_RANK</span> () <span class="keyword">OVER</span> (<span class="keyword">PARTITION</span> <span class="keyword">BY</span> department_id <span class="keyword">ORDER</span> <span class="keyword">BY</span> salary) dep_rank</span><br><span class="line"><span class="keyword">FROM</span> employees)</span><br><span class="line"><span class="keyword">WHERE</span> dep_rank <span class="operator">&lt;=</span> <span class="number">3</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- CUME_DIST() : 상대적인 누적분포도 값을 반환</span></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line"> department_id</span><br><span class="line"> , emp_name</span><br><span class="line"> , salary</span><br><span class="line"> , <span class="built_in">CUME_DIST</span>() <span class="keyword">OVER</span> (<span class="keyword">PARTITION</span> <span class="keyword">BY</span> department_id</span><br><span class="line">                     <span class="keyword">ORDER</span> <span class="keyword">BY</span> salary) dep_dist</span><br><span class="line"><span class="keyword">FROM</span> employees;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- PERCENT_RANK 함수</span></span><br><span class="line"><span class="comment">-- 백분위 순위 반환</span></span><br><span class="line"><span class="comment">-- 60번 부서에 대한 CUME_DIST(), PERCENT_RANK() 값을 조회</span></span><br><span class="line"><span class="keyword">SELECT</span> department_id</span><br><span class="line">     , emp_name</span><br><span class="line">     , salary</span><br><span class="line">     , <span class="built_in">RANK</span>() <span class="keyword">OVER</span> (<span class="keyword">PARTITION</span> <span class="keyword">BY</span> department_id</span><br><span class="line">                    <span class="keyword">ORDER</span> <span class="keyword">BY</span> salary) ranking</span><br><span class="line">     , <span class="built_in">CUME_DIST</span>() <span class="keyword">OVER</span> (<span class="keyword">PARTITION</span> <span class="keyword">BY</span> department_id</span><br><span class="line">                         <span class="keyword">ORDER</span> <span class="keyword">BY</span> salary) cume_dist_value</span><br><span class="line">     , <span class="built_in">PERCENT_RANK</span>() <span class="keyword">OVER</span> (<span class="keyword">PARTITION</span> <span class="keyword">BY</span> department_id</span><br><span class="line">                            <span class="keyword">ORDER</span> <span class="keyword">BY</span> salary) percentile</span><br><span class="line"> <span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> department_id <span class="operator">=</span> <span class="number">60</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- p.236</span></span><br><span class="line"><span class="comment">-- NTILE(숫자) 함수</span></span><br><span class="line"><span class="comment">-- 5개의 행을 숫자만큼 담는다.</span></span><br><span class="line"><span class="keyword">SELECT</span> department_id</span><br><span class="line">     , emp_name</span><br><span class="line">     , salary</span><br><span class="line">     , <span class="built_in">NTILE</span>(<span class="number">4</span>) <span class="keyword">OVER</span> (<span class="keyword">PARTITION</span> <span class="keyword">BY</span> department_id</span><br><span class="line">                      <span class="keyword">ORDER</span> <span class="keyword">BY</span> salary</span><br><span class="line">                      ) NTILES</span><br><span class="line"> <span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> department_id <span class="keyword">IN</span> (<span class="number">30</span>, <span class="number">60</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- LAG, LEAD</span></span><br><span class="line"><span class="comment">-- LAG 선행로우의 값을 반환한다</span></span><br><span class="line"><span class="comment">-- LEAD 후행로우의 값을 반환한다</span></span><br><span class="line"><span class="keyword">SELECT</span> emp_name</span><br><span class="line">     , hire_date</span><br><span class="line">     , salary</span><br><span class="line">     , <span class="built_in">LAG</span>(salary, <span class="number">1</span>, <span class="number">0</span>) <span class="keyword">OVER</span> (<span class="keyword">ORDER</span> <span class="keyword">BY</span> hire_date) <span class="keyword">AS</span> prev_sal</span><br><span class="line">     , <span class="built_in">LEAD</span>(salary, <span class="number">1</span>, <span class="number">0</span>) <span class="keyword">OVER</span> (<span class="keyword">ORDER</span> <span class="keyword">BY</span> hire_date) <span class="keyword">AS</span> next_sal</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> department_id <span class="operator">=</span> <span class="number">30</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- window 절</span></span><br><span class="line"><span class="comment">-- p.240</span></span><br><span class="line"><span class="comment">-- 정렬은 입사일자 순으로 처리</span></span><br><span class="line"><span class="comment">-- 급여, UNBOUNDED PRECEDING 부서별 입사일자가 가장 빠른 사원</span></span><br><span class="line"><span class="comment">--       UNBOUNDED FOLLOWING 부서별 입사일자가 가장 늦은 사원</span></span><br><span class="line"><span class="comment">-- 급여 누적 합계</span></span><br><span class="line"><span class="comment">-- ROWS</span></span><br><span class="line"><span class="keyword">SELECT</span> department_id</span><br><span class="line">     , emp_name</span><br><span class="line">     , hire_date</span><br><span class="line">     , salary</span><br><span class="line">     , <span class="built_in">SUM</span>(salary) <span class="keyword">OVER</span> (<span class="keyword">PARTITION</span> <span class="keyword">BY</span> department_id <span class="keyword">ORDER</span> <span class="keyword">BY</span> hire_date</span><br><span class="line">                         <span class="keyword">ROWS</span> <span class="keyword">BETWEEN</span> UNBOUNDED PRECEDING <span class="keyword">AND</span> UNBOUNDED FOLLOWING</span><br><span class="line">                         ) <span class="keyword">AS</span> all_salary</span><br><span class="line">     , <span class="built_in">SUM</span>(salary) <span class="keyword">OVER</span> (<span class="keyword">PARTITION</span> <span class="keyword">BY</span> department_id <span class="keyword">ORDER</span> <span class="keyword">BY</span> hire_date</span><br><span class="line">                         <span class="keyword">ROWS</span> <span class="keyword">BETWEEN</span> UNBOUNDED PRECEDING <span class="keyword">AND</span> <span class="keyword">CURRENT</span> <span class="type">ROW</span></span><br><span class="line">                         ) <span class="keyword">AS</span> first_current_sal</span><br><span class="line">     , <span class="built_in">SUM</span>(salary) <span class="keyword">OVER</span> (<span class="keyword">PARTITION</span> <span class="keyword">BY</span> department_id <span class="keyword">ORDER</span> <span class="keyword">BY</span> hire_date</span><br><span class="line">                         <span class="keyword">ROWS</span> <span class="keyword">BETWEEN</span> <span class="keyword">CURRENT</span> <span class="type">ROW</span> <span class="keyword">AND</span> UNBOUNDED FOLLOWING</span><br><span class="line">                         ) <span class="keyword">AS</span> current_end_sal</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> department_id <span class="keyword">IN</span> (<span class="number">30</span>, <span class="number">60</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- RANGE</span></span><br><span class="line"><span class="keyword">SELECT</span> department_id</span><br><span class="line">     , emp_name</span><br><span class="line">     , hire_date</span><br><span class="line">     , salary</span><br><span class="line">     , <span class="built_in">SUM</span>(salary) <span class="keyword">OVER</span> (<span class="keyword">PARTITION</span> <span class="keyword">BY</span> department_id <span class="keyword">ORDER</span> <span class="keyword">BY</span> hire_date</span><br><span class="line">                         <span class="keyword">RANGE</span> <span class="keyword">BETWEEN</span> UNBOUNDED PRECEDING <span class="keyword">AND</span> UNBOUNDED FOLLOWING</span><br><span class="line">                         ) <span class="keyword">AS</span> all_salary</span><br><span class="line">     , <span class="built_in">SUM</span>(salary) <span class="keyword">OVER</span> (<span class="keyword">PARTITION</span> <span class="keyword">BY</span> department_id <span class="keyword">ORDER</span> <span class="keyword">BY</span> hire_date</span><br><span class="line">                         <span class="keyword">RANGE</span> <span class="number">365</span> PRECEDING</span><br><span class="line">                         ) <span class="keyword">AS</span> first_current_sal</span><br><span class="line">     , <span class="built_in">SUM</span>(salary) <span class="keyword">OVER</span> (<span class="keyword">PARTITION</span> <span class="keyword">BY</span> department_id <span class="keyword">ORDER</span> <span class="keyword">BY</span> hire_date</span><br><span class="line">                         <span class="keyword">RANGE</span> <span class="keyword">BETWEEN</span> <span class="number">365</span> PRECEDING <span class="keyword">AND</span> <span class="keyword">CURRENT</span> <span class="type">ROW</span></span><br><span class="line">                         ) <span class="keyword">AS</span> current_end_sal</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> department_id <span class="keyword">IN</span> (<span class="number">30</span>, <span class="number">60</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- WINDOW 함수</span></span><br><span class="line"><span class="comment">-- FIRST_VALUE</span></span><br><span class="line"><span class="keyword">SELECT</span> department_id</span><br><span class="line">     , emp_name</span><br><span class="line">     , hire_date</span><br><span class="line">     , salary</span><br><span class="line">     , <span class="built_in">FIRST_VALUE</span>(salary) <span class="keyword">OVER</span> (<span class="keyword">PARTITION</span> <span class="keyword">BY</span> department_id <span class="keyword">ORDER</span> <span class="keyword">BY</span> hire_date</span><br><span class="line">                           <span class="keyword">ROWS</span> <span class="keyword">BETWEEN</span> UNBOUNDED PRECEDING <span class="keyword">AND</span> UNBOUNDED FOLLOWING</span><br><span class="line">                           ) <span class="keyword">AS</span> all_salary</span><br><span class="line">     , <span class="built_in">FIRST_VALUE</span>(salary) <span class="keyword">OVER</span> (<span class="keyword">PARTITION</span> <span class="keyword">BY</span> department_id <span class="keyword">ORDER</span> <span class="keyword">BY</span> hire_date</span><br><span class="line">                           <span class="keyword">ROWS</span> <span class="keyword">BETWEEN</span> UNBOUNDED PRECEDING <span class="keyword">AND</span> <span class="keyword">CURRENT</span> <span class="type">ROW</span></span><br><span class="line">                           ) <span class="keyword">AS</span> fi_st_to_current_sal</span><br><span class="line">     , <span class="built_in">FIRST_VALUE</span>(salary) <span class="keyword">OVER</span> (<span class="keyword">PARTITION</span> <span class="keyword">BY</span> department_id <span class="keyword">ORDER</span> <span class="keyword">BY</span> hire_date</span><br><span class="line">                           <span class="keyword">ROWS</span> <span class="keyword">BETWEEN</span> <span class="keyword">CURRENT</span> <span class="type">ROW</span> <span class="keyword">AND</span> UNBOUNDED FOLLOWING</span><br><span class="line">                           ) <span class="keyword">AS</span> fr_current_to_end_sal</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> department_id <span class="keyword">IN</span> (<span class="number">30</span>, <span class="number">90</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- LAST_VALUE</span></span><br><span class="line"><span class="keyword">SELECT</span> department_id</span><br><span class="line">     , emp_name</span><br><span class="line">     , hire_date</span><br><span class="line">     , salary</span><br><span class="line">     , <span class="built_in">LAST_VALUE</span>(salary) <span class="keyword">OVER</span> (<span class="keyword">PARTITION</span> <span class="keyword">BY</span> department_id <span class="keyword">ORDER</span> <span class="keyword">BY</span> hire_date</span><br><span class="line">                          <span class="keyword">ROWS</span> <span class="keyword">BETWEEN</span> UNBOUNDED PRECEDING <span class="keyword">AND</span> UNBOUNDED FOLLOWING</span><br><span class="line">                          ) <span class="keyword">AS</span> all_salary</span><br><span class="line">     , <span class="built_in">LAST_VALUE</span>(salary) <span class="keyword">OVER</span> (<span class="keyword">PARTITION</span> <span class="keyword">BY</span> department_id <span class="keyword">ORDER</span> <span class="keyword">BY</span> hire_date</span><br><span class="line">                          <span class="keyword">ROWS</span> <span class="keyword">BETWEEN</span> UNBOUNDED PRECEDING <span class="keyword">AND</span> <span class="keyword">CURRENT</span> <span class="type">ROW</span></span><br><span class="line">                          ) <span class="keyword">AS</span> fi_st_to_current_sal</span><br><span class="line">     , <span class="built_in">LAST_VALUE</span>(salary) <span class="keyword">OVER</span> (<span class="keyword">PARTITION</span> <span class="keyword">BY</span> department_id <span class="keyword">ORDER</span> <span class="keyword">BY</span> hire_date</span><br><span class="line">                          <span class="keyword">ROWS</span> <span class="keyword">BETWEEN</span> <span class="keyword">CURRENT</span> <span class="type">ROW</span> <span class="keyword">AND</span> UNBOUNDED FOLLOWING</span><br><span class="line">                          ) <span class="keyword">AS</span> fr_current_to_end_sal</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> department_id <span class="keyword">IN</span> (<span class="number">30</span>, <span class="number">90</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- NTH_VALUE</span></span><br><span class="line"><span class="keyword">SELECT</span> department_id</span><br><span class="line">     , emp_name</span><br><span class="line">     , hire_date</span><br><span class="line">     , salary</span><br><span class="line">     , <span class="built_in">NTH_VALUE</span>(salary, <span class="number">3</span>) <span class="keyword">OVER</span> (<span class="keyword">PARTITION</span> <span class="keyword">BY</span> department_id <span class="keyword">ORDER</span> <span class="keyword">BY</span> hire_date</span><br><span class="line">                          <span class="keyword">ROWS</span> <span class="keyword">BETWEEN</span> UNBOUNDED PRECEDING <span class="keyword">AND</span> UNBOUNDED FOLLOWING</span><br><span class="line">                          ) <span class="keyword">AS</span> all_salary</span><br><span class="line">     , <span class="built_in">NTH_VALUE</span>(salary, <span class="number">3</span>) <span class="keyword">OVER</span> (<span class="keyword">PARTITION</span> <span class="keyword">BY</span> department_id <span class="keyword">ORDER</span> <span class="keyword">BY</span> hire_date</span><br><span class="line">                          <span class="keyword">ROWS</span> <span class="keyword">BETWEEN</span> UNBOUNDED PRECEDING <span class="keyword">AND</span> <span class="keyword">CURRENT</span> <span class="type">ROW</span></span><br><span class="line">                          ) <span class="keyword">AS</span> fi_st_to_current_sal</span><br><span class="line">     , <span class="built_in">NTH_VALUE</span>(salary, <span class="number">3</span>) <span class="keyword">OVER</span> (<span class="keyword">PARTITION</span> <span class="keyword">BY</span> department_id <span class="keyword">ORDER</span> <span class="keyword">BY</span> hire_date</span><br><span class="line">                          <span class="keyword">ROWS</span> <span class="keyword">BETWEEN</span> <span class="keyword">CURRENT</span> <span class="type">ROW</span> <span class="keyword">AND</span> UNBOUNDED FOLLOWING</span><br><span class="line">                          ) <span class="keyword">AS</span> fr_current_to_end_sal</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> department_id <span class="keyword">IN</span> (<span class="number">30</span>, <span class="number">90</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 기타 분석 함수</span></span><br><span class="line"><span class="comment">-- WIDTH_BUCKET</span></span><br><span class="line"><span class="keyword">SELECT</span> department_id</span><br><span class="line">     , emp_name</span><br><span class="line">     , salary</span><br><span class="line">     , <span class="built_in">NTILE</span>(<span class="number">4</span>) <span class="keyword">OVER</span> (<span class="keyword">PARTITION</span> <span class="keyword">BY</span> department_id</span><br><span class="line">                           <span class="keyword">ORDER</span> <span class="keyword">BY</span> salary</span><br><span class="line">                      ) NTITLES</span><br><span class="line">     , <span class="built_in">WIDTH_BUCKET</span>(salary, <span class="number">1000</span>, <span class="number">10000</span>, <span class="number">9</span>) widthbucket</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> department_id <span class="operator">=</span> <span class="number">60</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- FIRST와 LAST</span></span><br><span class="line"><span class="comment">-- 집계 함수와 같이 사용</span></span><br><span class="line"><span class="comment">-- 주어진 그룹에 대해 내부적으로 순위를 매겨 결과를 산출</span></span><br><span class="line"><span class="comment">-- 기존 함수</span></span><br><span class="line"><span class="keyword">WITH</span> basis <span class="keyword">AS</span> (<span class="keyword">SELECT</span> <span class="keyword">period</span></span><br><span class="line">                    , region</span><br><span class="line">                    , <span class="built_in">SUM</span>(loan_jan_amt) jan_amt</span><br><span class="line">                 <span class="keyword">FROM</span> kor_loan_status</span><br><span class="line">                <span class="keyword">GROUP</span> <span class="keyword">BY</span> <span class="keyword">period</span>, region</span><br><span class="line">              )</span><br><span class="line">    , basis2 <span class="keyword">AS</span> (<span class="keyword">SELECT</span> <span class="keyword">period</span></span><br><span class="line">                      , <span class="built_in">MIN</span>(jan_amt) min_amt</span><br><span class="line">                      , <span class="built_in">MAX</span>(jan_amt) max_amt</span><br><span class="line">                   <span class="keyword">FROM</span> basis</span><br><span class="line">                   <span class="keyword">GROUP</span> <span class="keyword">BY</span> <span class="keyword">period</span></span><br><span class="line">                )</span><br><span class="line"><span class="keyword">SELECT</span> a.period</span><br><span class="line">     , b.region &quot;최소지역&quot;</span><br><span class="line">     , b.jan_amt &quot;최소금액&quot;</span><br><span class="line">     , c.region &quot;최대지역&quot;</span><br><span class="line">     , c.jan_amt &quot;최대금액&quot;</span><br><span class="line"> <span class="keyword">FROM</span> basis2 a, basis b, basis c</span><br><span class="line"><span class="keyword">WHERE</span> a.period <span class="operator">=</span> b.period</span><br><span class="line">  <span class="keyword">AND</span> a.min_amt <span class="operator">=</span> b.jan_amt</span><br><span class="line">  <span class="keyword">AND</span> a.period <span class="operator">=</span> c.period</span><br><span class="line">  <span class="keyword">AND</span> a.max_amt <span class="operator">=</span> c.jan_amt</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> <span class="number">1</span>, <span class="number">2</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- FIRST, LAST 함수 이용</span></span><br><span class="line"><span class="keyword">WITH</span> basis <span class="keyword">AS</span>(</span><br><span class="line">               <span class="keyword">SELECT</span> <span class="keyword">period</span></span><br><span class="line">                    , region</span><br><span class="line">                    , <span class="built_in">SUM</span>(loan_jan_amt) jan_amt</span><br><span class="line">                 <span class="keyword">FROM</span> kor_loan_status</span><br><span class="line">                <span class="keyword">GROUP</span> <span class="keyword">BY</span> <span class="keyword">period</span>, region</span><br><span class="line">              )</span><br><span class="line"><span class="keyword">SELECT</span> a.period</span><br><span class="line">     , <span class="built_in">MIN</span>(a.region) KEEP (DENSE_RANK <span class="keyword">FIRST</span> <span class="keyword">ORDER</span> <span class="keyword">BY</span> jan_amt) &quot;최소지역&quot;</span><br><span class="line">     , <span class="built_in">MIN</span>(jan_amt) &quot;최소금액&quot;</span><br><span class="line">     , <span class="built_in">MAX</span>(a.region) KEEP (DENSE_RANK <span class="keyword">LAST</span> <span class="keyword">ORDER</span> <span class="keyword">BY</span> jan_amt) &quot;최대지역&quot;</span><br><span class="line">     , <span class="built_in">MAX</span>(jan_amt) &quot;최대금액&quot;</span><br><span class="line"><span class="keyword">FROM</span> basis a</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> a.period</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> <span class="number">1</span>, <span class="number">2</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- RATIO_TO_REPORT</span></span><br><span class="line"><span class="keyword">SELECT</span> department_id</span><br><span class="line">     , emp_name</span><br><span class="line">     , hire_date</span><br><span class="line">     , salary</span><br><span class="line">     , ROUND(RATIO_TO_REPORT(salary) <span class="keyword">OVER</span> (<span class="keyword">PARTITION</span> <span class="keyword">BY</span> department_id)</span><br><span class="line">             , <span class="number">2</span>) <span class="operator">*</span> <span class="number">100</span> <span class="keyword">AS</span> salary_percent</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> department_id <span class="keyword">IN</span> (<span class="number">30</span>, <span class="number">90</span>);</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="entry-meta entry-footer">
      
      
      
    </footer>
    <hr class="entry-footer-hr">
  </div>
  
</article>

<!-- Table of Contents -->

  
    <article id="post-Day26_20220721"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/2022/07/21/Day26_20220721/">July 21, 2022, Day26</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	<a href="/2022/07/21/Day26_20220721/" class="article-date">
	  <time datetime="2022-07-20T23:22:22.000Z" itemprop="datePublished">July 21, 2022</time>
	</a>

       
      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="7-21-목-강의"><a href="#7-21-목-강의" class="headerlink" title="7.21(목) 강의"></a>7.21(목) 강의</h1><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 기본 집계 함수</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">COUNT</span>(<span class="operator">*</span>) <span class="keyword">FROM</span> employees;</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">COUNT</span>(employee_id) <span class="keyword">FROM</span> employees;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- NULL은 카운트를 하지 않는다</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">COUNT</span>(department_id) <span class="keyword">FROM</span> employees;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 유일한 값만 조회</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">COUNT</span>(<span class="keyword">DISTINCT</span> department_id) <span class="keyword">FROM</span> employees;</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">DISTINCT</span> department_id <span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 기초통계량</span></span><br><span class="line"><span class="comment">-- p.154</span></span><br><span class="line"><span class="comment">-- 합계, 평균, 최소, 최대, 분산, 표준편차</span></span><br><span class="line"><span class="comment">-- SQL --&gt; 통계 도구 &amp; 머신러닝, 데이터 과학 도구</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">SUM</span>(salary) <span class="keyword">FROM</span> employees;</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">SUM</span>(salary), <span class="built_in">SUM</span>(<span class="keyword">DISTINCT</span> salary) <span class="keyword">FROM</span> employees;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 평균 값 반환</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">AVG</span>(salary), <span class="built_in">AVG</span>(<span class="keyword">DISTINCT</span> salary) <span class="keyword">FROM</span> employees;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 최소, 최대값 반환</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">MIN</span>(salary), <span class="built_in">MAX</span>(salary) <span class="keyword">FROM</span> employees;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 분산, 표준편차</span></span><br><span class="line"><span class="keyword">SELECT</span> VARIANCE(salary), STDDEV(salary) <span class="keyword">FROM</span> employees;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 그룹바이 HAVING</span></span><br><span class="line"><span class="comment">-- 그 전까지는 전체 데이터를 기준으로 집계</span></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">  department_id</span><br><span class="line">  , <span class="built_in">SUM</span>(salary)</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> department_id</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> department_id;</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> kor_loan_status;</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">period</span></span><br><span class="line">     , region</span><br><span class="line">     , <span class="built_in">SUM</span>(loan_jan_amt) totl_jan</span><br><span class="line"><span class="keyword">FROM</span> kor_loan_status</span><br><span class="line"><span class="keyword">WHERE</span> <span class="keyword">period</span> <span class="keyword">LIKE</span> <span class="string">&#x27;2013%&#x27;</span></span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> <span class="keyword">period</span>, region</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> <span class="keyword">period</span>, region;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 2013년 11월 총 잔액만 구하기</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">period</span></span><br><span class="line">     , region</span><br><span class="line">     , <span class="built_in">SUM</span>(loan_jan_amt) totl_jan</span><br><span class="line"><span class="keyword">FROM</span> kor_loan_status</span><br><span class="line"><span class="keyword">WHERE</span> <span class="keyword">period</span> <span class="operator">=</span> <span class="string">&#x27;201311&#x27;</span></span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> <span class="keyword">period</span>, region</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> region;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- HAVING 절</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">period</span></span><br><span class="line">     , region</span><br><span class="line">     , <span class="built_in">SUM</span>(loan_jan_amt) totl_jan</span><br><span class="line"><span class="keyword">FROM</span> kor_loan_status</span><br><span class="line"><span class="keyword">WHERE</span> <span class="keyword">period</span> <span class="keyword">LIKE</span> <span class="string">&#x27;201311&#x27;</span></span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> <span class="keyword">period</span>, region</span><br><span class="line"><span class="keyword">HAVING</span> <span class="built_in">SUM</span>(loan_jan_amt) <span class="operator">&gt;</span> <span class="number">100000</span></span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> <span class="keyword">period</span>, region;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- ROLLUP절과 CUBE절</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">period</span>, gubun, <span class="built_in">SUM</span>(loan_jan_amt) totl_jan</span><br><span class="line"><span class="keyword">FROM</span> kor_loan_status</span><br><span class="line"><span class="keyword">WHERE</span> <span class="keyword">period</span> <span class="keyword">LIKE</span> <span class="string">&#x27;2013%&#x27;</span></span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> <span class="keyword">period</span>, gubun</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> <span class="keyword">period</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- ROLLUP</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">period</span>, gubun, <span class="built_in">SUM</span>(loan_jan_amt) totl_jan</span><br><span class="line"><span class="keyword">FROM</span> kor_loan_status</span><br><span class="line"><span class="keyword">WHERE</span> <span class="keyword">period</span> <span class="keyword">LIKE</span> <span class="string">&#x27;2013%&#x27;</span></span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> <span class="keyword">ROLLUP</span>(<span class="keyword">period</span>, gubun);</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">period</span>, gubun, <span class="built_in">SUM</span>(loan_jan_amt) totl_jan</span><br><span class="line"><span class="keyword">FROM</span> kor_loan_status</span><br><span class="line"><span class="keyword">WHERE</span> <span class="keyword">period</span> <span class="keyword">LIKE</span> <span class="string">&#x27;2013%&#x27;</span></span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> <span class="keyword">period</span>, <span class="keyword">ROLLUP</span>(gubun);</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">period</span>, gubun, <span class="built_in">SUM</span>(loan_jan_amt) totl_jan</span><br><span class="line"><span class="keyword">FROM</span> kor_loan_status</span><br><span class="line"><span class="keyword">WHERE</span> <span class="keyword">period</span> <span class="keyword">LIKE</span> <span class="string">&#x27;2013%&#x27;</span></span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> <span class="keyword">ROLLUP</span>(<span class="keyword">period</span>), gubun;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- CUBE</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">period</span>, gubun, <span class="built_in">SUM</span>(loan_jan_amt) totl_jan</span><br><span class="line"><span class="keyword">FROM</span> kor_loan_status</span><br><span class="line"><span class="keyword">WHERE</span> <span class="keyword">period</span> <span class="keyword">LIKE</span> <span class="string">&#x27;2013%&#x27;</span></span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> <span class="keyword">CUBE</span>(<span class="keyword">period</span>, gubun);</span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> exp_goods_asia (</span><br><span class="line">           country VARCHAR2(<span class="number">10</span>),</span><br><span class="line">           seq     NUMBER,</span><br><span class="line">           goods   VARCHAR2(<span class="number">80</span>));</span><br><span class="line"></span><br><span class="line">    <span class="keyword">INSERT</span> <span class="keyword">INTO</span> exp_goods_asia <span class="keyword">VALUES</span> (<span class="string">&#x27;한국&#x27;</span>, <span class="number">1</span>, <span class="string">&#x27;원유제외 석유류&#x27;</span>);</span><br><span class="line">    <span class="keyword">INSERT</span> <span class="keyword">INTO</span> exp_goods_asia <span class="keyword">VALUES</span> (<span class="string">&#x27;한국&#x27;</span>, <span class="number">2</span>, <span class="string">&#x27;자동차&#x27;</span>);</span><br><span class="line">    <span class="keyword">INSERT</span> <span class="keyword">INTO</span> exp_goods_asia <span class="keyword">VALUES</span> (<span class="string">&#x27;한국&#x27;</span>, <span class="number">3</span>, <span class="string">&#x27;전자집적회로&#x27;</span>);</span><br><span class="line">    <span class="keyword">INSERT</span> <span class="keyword">INTO</span> exp_goods_asia <span class="keyword">VALUES</span> (<span class="string">&#x27;한국&#x27;</span>, <span class="number">4</span>, <span class="string">&#x27;선박&#x27;</span>);</span><br><span class="line">    <span class="keyword">INSERT</span> <span class="keyword">INTO</span> exp_goods_asia <span class="keyword">VALUES</span> (<span class="string">&#x27;한국&#x27;</span>, <span class="number">5</span>,  <span class="string">&#x27;LCD&#x27;</span>);</span><br><span class="line">    <span class="keyword">INSERT</span> <span class="keyword">INTO</span> exp_goods_asia <span class="keyword">VALUES</span> (<span class="string">&#x27;한국&#x27;</span>, <span class="number">6</span>,  <span class="string">&#x27;자동차부품&#x27;</span>);</span><br><span class="line">    <span class="keyword">INSERT</span> <span class="keyword">INTO</span> exp_goods_asia <span class="keyword">VALUES</span> (<span class="string">&#x27;한국&#x27;</span>, <span class="number">7</span>,  <span class="string">&#x27;휴대전화&#x27;</span>);</span><br><span class="line">    <span class="keyword">INSERT</span> <span class="keyword">INTO</span> exp_goods_asia <span class="keyword">VALUES</span> (<span class="string">&#x27;한국&#x27;</span>, <span class="number">8</span>,  <span class="string">&#x27;환식탄화수소&#x27;</span>);</span><br><span class="line">    <span class="keyword">INSERT</span> <span class="keyword">INTO</span> exp_goods_asia <span class="keyword">VALUES</span> (<span class="string">&#x27;한국&#x27;</span>, <span class="number">9</span>,  <span class="string">&#x27;무선송신기 디스플레이 부속품&#x27;</span>);</span><br><span class="line">    <span class="keyword">INSERT</span> <span class="keyword">INTO</span> exp_goods_asia <span class="keyword">VALUES</span> (<span class="string">&#x27;한국&#x27;</span>, <span class="number">10</span>,  <span class="string">&#x27;철 또는 비합금강&#x27;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">INSERT</span> <span class="keyword">INTO</span> exp_goods_asia <span class="keyword">VALUES</span> (<span class="string">&#x27;일본&#x27;</span>, <span class="number">1</span>, <span class="string">&#x27;자동차&#x27;</span>);</span><br><span class="line">    <span class="keyword">INSERT</span> <span class="keyword">INTO</span> exp_goods_asia <span class="keyword">VALUES</span> (<span class="string">&#x27;일본&#x27;</span>, <span class="number">2</span>, <span class="string">&#x27;자동차부품&#x27;</span>);</span><br><span class="line">    <span class="keyword">INSERT</span> <span class="keyword">INTO</span> exp_goods_asia <span class="keyword">VALUES</span> (<span class="string">&#x27;일본&#x27;</span>, <span class="number">3</span>, <span class="string">&#x27;전자집적회로&#x27;</span>);</span><br><span class="line">    <span class="keyword">INSERT</span> <span class="keyword">INTO</span> exp_goods_asia <span class="keyword">VALUES</span> (<span class="string">&#x27;일본&#x27;</span>, <span class="number">4</span>, <span class="string">&#x27;선박&#x27;</span>);</span><br><span class="line">    <span class="keyword">INSERT</span> <span class="keyword">INTO</span> exp_goods_asia <span class="keyword">VALUES</span> (<span class="string">&#x27;일본&#x27;</span>, <span class="number">5</span>, <span class="string">&#x27;반도체웨이퍼&#x27;</span>);</span><br><span class="line">    <span class="keyword">INSERT</span> <span class="keyword">INTO</span> exp_goods_asia <span class="keyword">VALUES</span> (<span class="string">&#x27;일본&#x27;</span>, <span class="number">6</span>, <span class="string">&#x27;화물차&#x27;</span>);</span><br><span class="line">    <span class="keyword">INSERT</span> <span class="keyword">INTO</span> exp_goods_asia <span class="keyword">VALUES</span> (<span class="string">&#x27;일본&#x27;</span>, <span class="number">7</span>, <span class="string">&#x27;원유제외 석유류&#x27;</span>);</span><br><span class="line">    <span class="keyword">INSERT</span> <span class="keyword">INTO</span> exp_goods_asia <span class="keyword">VALUES</span> (<span class="string">&#x27;일본&#x27;</span>, <span class="number">8</span>, <span class="string">&#x27;건설기계&#x27;</span>);</span><br><span class="line">    <span class="keyword">INSERT</span> <span class="keyword">INTO</span> exp_goods_asia <span class="keyword">VALUES</span> (<span class="string">&#x27;일본&#x27;</span>, <span class="number">9</span>, <span class="string">&#x27;다이오드, 트랜지스터&#x27;</span>);</span><br><span class="line">    <span class="keyword">INSERT</span> <span class="keyword">INTO</span> exp_goods_asia <span class="keyword">VALUES</span> (<span class="string">&#x27;일본&#x27;</span>, <span class="number">10</span>, <span class="string">&#x27;기계류&#x27;</span>);</span><br><span class="line"><span class="keyword">commit</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> exp_goods_asia;</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> goods</span><br><span class="line"><span class="keyword">FROM</span> exp_goods_asia</span><br><span class="line"><span class="keyword">WHERE</span> country <span class="operator">=</span> <span class="string">&#x27;한국&#x27;</span></span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> seq;</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> goods</span><br><span class="line"><span class="keyword">FROM</span> exp_goods_asia</span><br><span class="line"><span class="keyword">WHERE</span> country <span class="operator">=</span> <span class="string">&#x27;일본&#x27;</span></span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> seq;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 두 국가가 겹치는 수출품목은 한 번만 조회가 되도록 함</span></span><br><span class="line"><span class="comment">-- UNION</span></span><br><span class="line"><span class="keyword">SELECT</span> goods</span><br><span class="line"><span class="keyword">FROM</span> exp_goods_asia</span><br><span class="line"><span class="keyword">WHERE</span> country <span class="operator">=</span> <span class="string">&#x27;한국&#x27;</span></span><br><span class="line"><span class="keyword">UNION</span></span><br><span class="line"><span class="keyword">SELECT</span> goods</span><br><span class="line"><span class="keyword">FROM</span> exp_goods_asia</span><br><span class="line"><span class="keyword">WHERE</span> country <span class="operator">=</span> <span class="string">&#x27;일본&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- UNION ALL</span></span><br><span class="line"><span class="keyword">SELECT</span> goods</span><br><span class="line"><span class="keyword">FROM</span> exp_goods_asia</span><br><span class="line"><span class="keyword">WHERE</span> country <span class="operator">=</span> <span class="string">&#x27;한국&#x27;</span></span><br><span class="line"><span class="keyword">UNION</span> <span class="keyword">ALL</span></span><br><span class="line"><span class="keyword">SELECT</span> goods</span><br><span class="line"><span class="keyword">FROM</span> exp_goods_asia</span><br><span class="line"><span class="keyword">WHERE</span> country <span class="operator">=</span> <span class="string">&#x27;일본&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- INTERSECT</span></span><br><span class="line"><span class="keyword">SELECT</span> goods</span><br><span class="line"><span class="keyword">FROM</span> exp_goods_asia</span><br><span class="line"><span class="keyword">WHERE</span> country <span class="operator">=</span> <span class="string">&#x27;한국&#x27;</span></span><br><span class="line"><span class="keyword">INTERSECT</span></span><br><span class="line"><span class="keyword">SELECT</span> goods</span><br><span class="line"><span class="keyword">FROM</span> exp_goods_asia</span><br><span class="line"><span class="keyword">WHERE</span> country <span class="operator">=</span> <span class="string">&#x27;일본&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- MINUS 차집합</span></span><br><span class="line"><span class="keyword">SELECT</span> goods</span><br><span class="line"><span class="keyword">FROM</span> exp_goods_asia</span><br><span class="line"><span class="keyword">WHERE</span> country <span class="operator">=</span> <span class="string">&#x27;한국&#x27;</span></span><br><span class="line">MINUS</span><br><span class="line"><span class="keyword">SELECT</span> goods</span><br><span class="line"><span class="keyword">FROM</span> exp_goods_asia</span><br><span class="line"><span class="keyword">WHERE</span> country <span class="operator">=</span> <span class="string">&#x27;일본&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> goods</span><br><span class="line"><span class="keyword">FROM</span> exp_goods_asia</span><br><span class="line"><span class="keyword">WHERE</span> country <span class="operator">=</span> <span class="string">&#x27;일본&#x27;</span></span><br><span class="line">MINUS</span><br><span class="line"><span class="keyword">SELECT</span> goods</span><br><span class="line"><span class="keyword">FROM</span> exp_goods_asia</span><br><span class="line"><span class="keyword">WHERE</span> country <span class="operator">=</span> <span class="string">&#x27;한국&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- GROUPING SETS절</span></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line"> <span class="keyword">period</span>, gubun, <span class="built_in">SUM</span>(loan_jan_amt) totl_jan</span><br><span class="line"><span class="keyword">FROM</span> kor_loan_status</span><br><span class="line"><span class="keyword">WHERE</span> <span class="keyword">period</span> <span class="keyword">LIKE</span> <span class="string">&#x27;2013%&#x27;</span></span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> <span class="keyword">GROUPING</span> SETS(<span class="keyword">period</span>, gubun);</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line"> <span class="keyword">period</span>, gubun, <span class="built_in">SUM</span>(loan_jan_amt) totl_jan</span><br><span class="line"><span class="keyword">FROM</span> kor_loan_status</span><br><span class="line"><span class="keyword">WHERE</span> <span class="keyword">period</span> <span class="keyword">LIKE</span> <span class="string">&#x27;2013%&#x27;</span></span><br><span class="line"> <span class="keyword">AND</span> region <span class="keyword">IN</span> (<span class="string">&#x27;서울&#x27;</span>, <span class="string">&#x27;경기&#x27;</span>)</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> <span class="keyword">GROUPING</span> SETS(<span class="keyword">period</span>, (gubun, region));</span><br><span class="line"></span><br><span class="line"><span class="comment">-- p.177 조인의 종류</span></span><br><span class="line"><span class="comment">-- 동등조인</span></span><br><span class="line"><span class="keyword">SELECT</span> a.employee_id</span><br><span class="line">     , a.emp_name</span><br><span class="line">     , a.department_id</span><br><span class="line">     , b.department_name</span><br><span class="line"><span class="keyword">FROM</span> employees a, departments b</span><br><span class="line"><span class="keyword">WHERE</span> a.department_id <span class="operator">=</span> b.department_id;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 세미조인</span></span><br><span class="line"><span class="comment">-- 서브쿼리를 이용해 서브쿼리에 존재하는 데이터만 메인 쿼리에서 추출</span></span><br><span class="line"><span class="comment">-- EXISTS 사용</span></span><br><span class="line"><span class="keyword">SELECT</span> department_id</span><br><span class="line">     , department_name</span><br><span class="line"><span class="keyword">FROM</span> departments a</span><br><span class="line"><span class="keyword">WHERE</span> <span class="keyword">EXISTS</span>(<span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> employees b</span><br><span class="line">             <span class="keyword">WHERE</span> a.department_id <span class="operator">=</span> b.department_id</span><br><span class="line">               <span class="keyword">AND</span> b.salary <span class="operator">&gt;</span> <span class="number">3000</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> department_id</span><br><span class="line">     , department_name</span><br><span class="line"><span class="keyword">FROM</span> departments a</span><br><span class="line"><span class="keyword">WHERE</span> a.department_id <span class="keyword">IN</span> (<span class="keyword">SELECT</span> b.department_id</span><br><span class="line">                          <span class="keyword">FROM</span> employees b</span><br><span class="line">                          <span class="keyword">WHERE</span> b.salary <span class="operator">&gt;</span> <span class="number">3000</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> a.department_id</span><br><span class="line">     , a.department_name</span><br><span class="line"><span class="keyword">FROM</span> departments a, employees b</span><br><span class="line"><span class="keyword">WHERE</span> a.department_id <span class="operator">=</span> b.department_id</span><br><span class="line">  <span class="keyword">AND</span> b.salary <span class="operator">&gt;</span> <span class="number">3000</span></span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> a.department_name;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 안티 조인</span></span><br><span class="line"><span class="comment">-- 세미 조인의 반대 개념</span></span><br><span class="line"><span class="comment">-- NOT EXISTS, NOT IN 사용</span></span><br><span class="line"><span class="keyword">SELECT</span> a.employee_id</span><br><span class="line">     , a.emp_name</span><br><span class="line">     , a.department_id</span><br><span class="line">     , b.department_name</span><br><span class="line"><span class="keyword">FROM</span> employees a</span><br><span class="line">    , departments b</span><br><span class="line"><span class="keyword">WHERE</span> a.department_id <span class="operator">=</span> b.department_id</span><br><span class="line">  <span class="keyword">AND</span> a.department_id <span class="keyword">NOT</span> <span class="keyword">IN</span>(<span class="keyword">SELECT</span> department_id</span><br><span class="line">                               <span class="keyword">FROM</span> departments</span><br><span class="line">                              <span class="keyword">WHERE</span> manager_id <span class="keyword">IS</span> <span class="keyword">NULL</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- p.180</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">count</span>(<span class="operator">*</span>)</span><br><span class="line"><span class="keyword">FROM</span> employees a</span><br><span class="line"><span class="keyword">WHERE</span> <span class="keyword">NOT</span> <span class="keyword">EXISTS</span>(<span class="keyword">SELECT</span> <span class="number">1</span></span><br><span class="line">                   <span class="keyword">FROM</span> departments c</span><br><span class="line">                  <span class="keyword">WHERE</span> a.department_id <span class="operator">=</span> c.department_id</span><br><span class="line">                    <span class="keyword">AND</span> manager_id <span class="keyword">IS</span> <span class="keyword">NULL</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 셀프 조인</span></span><br><span class="line"><span class="comment">-- 조인을 하려면, 두 개의 테이블</span></span><br><span class="line"><span class="comment">-- 테이블을 자기 자신과 연결</span></span><br><span class="line"><span class="comment">-- 같은 부서번호를 가진 사원 중 A사원번호가 B사원보다 작은 건 조회</span></span><br><span class="line"><span class="keyword">SELECT</span> a.employee_id</span><br><span class="line">     , a.emp_name</span><br><span class="line">     , b.employee_id</span><br><span class="line">     , b.emp_name</span><br><span class="line">     , a.department_id</span><br><span class="line"><span class="keyword">FROM</span> employees a</span><br><span class="line">   , employees b</span><br><span class="line"><span class="keyword">WHERE</span> a.employee_id <span class="operator">&lt;</span> b.employee_id</span><br><span class="line">  <span class="keyword">AND</span> a.department_id <span class="operator">=</span> b.department_id</span><br><span class="line">  <span class="keyword">AND</span> a.department_id <span class="operator">=</span> <span class="number">20</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 일반조인</span></span><br><span class="line"><span class="keyword">SELECT</span> a.department_id</span><br><span class="line">     , a.department_name</span><br><span class="line">     , b.job_id</span><br><span class="line">     , b.department_id</span><br><span class="line"><span class="keyword">FROM</span> departments a</span><br><span class="line">     , job_history b</span><br><span class="line"><span class="keyword">WHERE</span> a.department_id <span class="operator">=</span> b.department_id;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 외부조인</span></span><br><span class="line"><span class="keyword">SELECT</span> a.department_id</span><br><span class="line">     , a.department_name</span><br><span class="line">     , b.job_id</span><br><span class="line">     , b.department_id</span><br><span class="line"><span class="keyword">FROM</span> departments a</span><br><span class="line">     , job_history b</span><br><span class="line"><span class="keyword">WHERE</span> a.department_id <span class="operator">=</span> b.department_id(<span class="operator">+</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> a.employee_id</span><br><span class="line">     , a.emp_name</span><br><span class="line">     , b.job_id</span><br><span class="line">     , b.department_id</span><br><span class="line"><span class="keyword">FROM</span> employees a</span><br><span class="line">   , job_history b</span><br><span class="line"><span class="keyword">WHERE</span> a.employee_id <span class="operator">=</span> b.employee_id(<span class="operator">+</span>)</span><br><span class="line">  <span class="keyword">AND</span> a.department_id <span class="operator">=</span> b.department_id;</span><br><span class="line">  </span><br><span class="line"><span class="keyword">SELECT</span> a.employee_id</span><br><span class="line">     , a.emp_name</span><br><span class="line">     , b.job_id</span><br><span class="line">     , b.department_id</span><br><span class="line"><span class="keyword">FROM</span> employees a</span><br><span class="line">   , job_history b</span><br><span class="line"><span class="keyword">WHERE</span> a.employee_id <span class="operator">=</span> b.employee_id(<span class="operator">+</span>)</span><br><span class="line">  <span class="keyword">AND</span> a.department_id <span class="operator">=</span> b.department_id(<span class="operator">+</span>);</span><br><span class="line">  </span><br><span class="line"><span class="comment">-- ANSI 조인</span></span><br><span class="line"><span class="keyword">SELECT</span> a.employee_id</span><br><span class="line">     , a.emp_name</span><br><span class="line">     , b.department_id</span><br><span class="line">     , b.department_name</span><br><span class="line"><span class="keyword">FROM</span> employees a</span><br><span class="line"><span class="keyword">INNER</span> <span class="keyword">JOIN</span> departments b</span><br><span class="line">  <span class="keyword">ON</span>(a.department_id <span class="operator">=</span> b.department_id)</span><br><span class="line"><span class="keyword">WHERE</span> a.hire_date <span class="operator">&gt;=</span> TO_DATE(<span class="string">&#x27;2003-01-01&#x27;</span>, <span class="string">&#x27;YYYY-MM-DD&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- p.187</span></span><br><span class="line"><span class="comment">-- 외부조인</span></span><br><span class="line"><span class="keyword">SELECT</span> a.employee_id</span><br><span class="line">     , a.emp_name</span><br><span class="line">     , b.job_id</span><br><span class="line">     , b.department_id</span><br><span class="line"><span class="keyword">FROM</span> employees a</span><br><span class="line"><span class="keyword">LEFT</span> <span class="keyword">OUTER</span> <span class="keyword">JOIN</span> job_history b</span><br><span class="line">  <span class="keyword">ON</span> (a.employee_id <span class="operator">=</span> b.employee_id</span><br><span class="line">      <span class="keyword">and</span> a.department_id <span class="operator">=</span> b.department_id);</span><br><span class="line">      </span><br><span class="line"><span class="keyword">SELECT</span> a.employee_id</span><br><span class="line">     , a.emp_name</span><br><span class="line">     , b.job_id</span><br><span class="line">     , b.department_id</span><br><span class="line"><span class="keyword">FROM</span> employees a</span><br><span class="line"><span class="keyword">RIGHT</span> <span class="keyword">OUTER</span> <span class="keyword">JOIN</span> job_history b</span><br><span class="line">  <span class="keyword">ON</span> (a.employee_id <span class="operator">=</span> b.employee_id</span><br><span class="line">      <span class="keyword">and</span> a.department_id <span class="operator">=</span> b.department_id); </span><br><span class="line">      </span><br><span class="line"><span class="comment">-- 서브쿼리</span></span><br><span class="line"><span class="comment">-- SQL 수업의 하이라이트</span></span><br><span class="line"><span class="comment">-- 서브쿼리</span></span><br><span class="line"><span class="comment">-- SELECT, FROM, WHERE</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">AVG</span>(salary) <span class="keyword">FROM</span> employees;</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">count</span>(<span class="operator">*</span>)</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> salary <span class="operator">&gt;=</span> (<span class="keyword">SELECT</span> <span class="built_in">AVG</span>(salary) <span class="keyword">FROM</span> employees);</span><br><span class="line"><span class="comment">-- 서브쿼리에서 부등호가 나오면 출력되는 값이 단일 행</span></span><br><span class="line">                        </span><br><span class="line"><span class="comment">-- IN (복수 결과값을 넣을 수 있음)</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">count</span>(<span class="operator">*</span>)</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> department_id <span class="keyword">IN</span> (<span class="keyword">SELECT</span> department_id, manager_id</span><br><span class="line">                        <span class="keyword">FROM</span> departments</span><br><span class="line">                        <span class="keyword">WHERE</span> parent_id <span class="keyword">IS</span> <span class="keyword">NULL</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">--</span></span><br><span class="line"><span class="keyword">SELECT</span> employee_id</span><br><span class="line">     , emp_name</span><br><span class="line">     , job_id</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> (employee_id, job_id) <span class="keyword">IN</span> (<span class="keyword">SELECT</span> employee_id, job_id</span><br><span class="line">                                <span class="keyword">FROM</span> job_history</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 서브쿼리 SELECT뿐 아니라 UPDATE, DELETE문</span></span><br><span class="line"><span class="comment">-- 전 사원의 급여를 평균 금액으로 갱신</span></span><br><span class="line"><span class="comment">-- commit 금지</span></span><br><span class="line"><span class="comment">-- 연관성 있는 서브쿼리</span></span><br><span class="line"><span class="comment">-- p.194 하단, SELECT 절에 서브쿼리</span></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line"> a.employee_id</span><br><span class="line"> , (<span class="keyword">SELECT</span> b.emp_name</span><br><span class="line">      <span class="keyword">FROM</span> employees b</span><br><span class="line">     <span class="keyword">WHERE</span> a.employee_id <span class="operator">=</span> b.employee_id) <span class="keyword">AS</span> emp_name</span><br><span class="line">    , a.department_id</span><br><span class="line">    , (<span class="keyword">SELECT</span> b.department_name</span><br><span class="line">       <span class="keyword">FROM</span> departments b</span><br><span class="line">       <span class="keyword">WHERE</span> a.department_id <span class="operator">=</span> b.department_id) <span class="keyword">AS</span> dep_name</span><br><span class="line"><span class="keyword">FROM</span> job_history a;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">-- 메인쿼리</span></span><br><span class="line"><span class="comment">SELECT</span></span><br><span class="line"><span class="comment">FROM</span></span><br><span class="line"><span class="comment">WHERE(서브쿼리</span></span><br><span class="line"><span class="comment">     (서브쿼리2</span></span><br><span class="line"><span class="comment">     (서브쿼리3</span></span><br><span class="line"><span class="comment">     (서브쿼리4</span></span><br><span class="line"><span class="comment">     (서브쿼리5</span></span><br><span class="line"><span class="comment">     (서브쿼리6</span></span><br><span class="line"><span class="comment">     (서브쿼리＊＊＊</span></span><br><span class="line"><span class="comment">     (서브쿼리n)))))</span></span><br><span class="line"><span class="comment">)</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 메인쿼리 : 부서 테이블에서 부서ID와 부서명 출력</span></span><br><span class="line"><span class="comment">-- 서브쿼리 : 특정 조건</span></span><br><span class="line"><span class="comment">-- 분할하고 다시 합치기</span></span><br><span class="line"><span class="keyword">SELECT</span> a.department_id, a.department_name</span><br><span class="line">  <span class="keyword">FROM</span> departments a</span><br><span class="line"> <span class="keyword">WHERE</span> <span class="keyword">EXISTS</span> (<span class="keyword">SELECT</span> <span class="number">1</span></span><br><span class="line">                 <span class="keyword">FROM</span> employees b</span><br><span class="line">                <span class="keyword">WHERE</span> a.department_id <span class="operator">=</span> b.department_id</span><br><span class="line">                  <span class="keyword">AND</span> b.salary <span class="operator">&gt;</span> (<span class="keyword">SELECT</span> <span class="built_in">AVG</span>(salary)</span><br><span class="line">                                    <span class="keyword">FROM</span> employees)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- p.196</span></span><br><span class="line"><span class="comment">-- 메인쿼리 : 사원 테이블의 사원들의 부서별 평균 급여를 조회</span></span><br><span class="line"><span class="comment">-- 서브쿼리 : 상위 부서가 기획부(부서번호 90)에 속함</span></span><br><span class="line"><span class="keyword">SELECT</span> department_id, <span class="built_in">AVG</span>(salary)</span><br><span class="line">  <span class="keyword">FROM</span> employees a</span><br><span class="line"> <span class="keyword">WHERE</span> department_id <span class="keyword">IN</span> (<span class="keyword">SELECT</span> department_id</span><br><span class="line">                           <span class="keyword">FROM</span> departments</span><br><span class="line">                          <span class="keyword">WHERE</span> parent_id <span class="operator">=</span> <span class="number">90</span>)</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> department_id;</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="entry-meta entry-footer">
      
      
      
    </footer>
    <hr class="entry-footer-hr">
  </div>
  
</article>

<!-- Table of Contents -->

  
    <article id="post-Day25_20220720"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/2022/07/20/Day25_20220720/">July 20, 2022, Day25</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	<a href="/2022/07/20/Day25_20220720/" class="article-date">
	  <time datetime="2022-07-19T23:22:22.000Z" itemprop="datePublished">July 20, 2022</time>
	</a>

       
      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="7-20-수-강의"><a href="#7-20-수-강의" class="headerlink" title="7.20(수) 강의"></a>7.20(수) 강의</h1><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br><span class="line">516</span><br><span class="line">517</span><br><span class="line">518</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- p.92</span></span><br><span class="line"><span class="comment">--- 급여가 5000이 넘는 사원번호와 사원명 조회</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> employees; <span class="comment">-- 107개 데이터</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line"> employee_id</span><br><span class="line"> , emp_name</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> salary <span class="operator">&gt;</span> <span class="number">5000</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">--- 급여가 5000 이상, job_id가 IT_PROG인 사원 조회</span></span><br><span class="line"><span class="keyword">SELECT</span> employee_id</span><br><span class="line">     , emp_name</span><br><span class="line">     , job_id</span><br><span class="line">     , salary</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> salary <span class="operator">&gt;</span> <span class="number">5000</span></span><br><span class="line">    <span class="keyword">AND</span> job_id <span class="operator">=</span> <span class="string">&#x27;IT_PROG&#x27;</span></span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> employee_id;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 테이블에 별칭 줄 수 있음</span></span><br><span class="line"><span class="keyword">SELECT</span> </span><br><span class="line">    <span class="comment">-- a 테이블에서 옴 (= employees)</span></span><br><span class="line">    a.employee_id</span><br><span class="line">    , a.emp_name</span><br><span class="line">    , a.department_id</span><br><span class="line">    <span class="comment">-- b 테이블에서 옴 (= departments)</span></span><br><span class="line">     , b.department_name</span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">    employees a</span><br><span class="line">    , departments b</span><br><span class="line"><span class="keyword">WHERE</span> a.department_id <span class="operator">=</span> b.department_id;</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> employees</span><br><span class="line"></span><br><span class="line"><span class="comment">-- INSERT문</span></span><br><span class="line"><span class="comment">--- 기본 형태</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> ex3_1(</span><br><span class="line">    co1     VARCHAR2(<span class="number">10</span>)</span><br><span class="line">    , col2  NUMBER</span><br><span class="line">    , col3  <span class="type">DATE</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> ex3_1(co1, col2, col3)</span><br><span class="line"><span class="keyword">VALUES</span> (<span class="string">&#x27;ABC&#x27;</span>, <span class="number">10</span>, SYSDATE);</span><br><span class="line"></span><br><span class="line"><span class="comment">---- 컬럼 순서를 바꾸어도 값의 순서를 똑같이 맞춰주면 문제 없음</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> ex3_1(col3, co1, col2)</span><br><span class="line"><span class="keyword">VALUES</span> (SYSDATE, <span class="string">&#x27;DEF&#x27;</span>, <span class="number">20</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> ex3_1(co1, col2, col3)</span><br><span class="line"><span class="keyword">VALUES</span> (<span class="string">&#x27;ABC&#x27;</span>, <span class="number">10</span>, <span class="number">30</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> ex3_1;</span><br><span class="line"></span><br><span class="line"><span class="comment">--- 컬럼명 기술 생략 형태</span></span><br><span class="line"><span class="comment">--- 컬럼명은 기술하지 않으나 VALUE절에는 테이블의 컬럼 순서대로 값을 입력</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> ex3_1 <span class="keyword">VALUES</span>(<span class="string">&#x27;GHI&#x27;</span>, <span class="number">10</span>, SYSDATE);</span><br><span class="line"></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> ex3_1 (co1, col2) <span class="keyword">VALUES</span> (<span class="string">&#x27;GHI&#x27;</span>, <span class="number">20</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> ex3_1 <span class="keyword">VALUES</span> (<span class="string">&#x27;GHI&#x27;</span>, <span class="number">30</span>);</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> ex3_1;</span><br><span class="line"></span><br><span class="line"><span class="comment">--- INSERT ~ SELECT 형태</span></span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> ex3_2;</span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> ex3_2(</span><br><span class="line">    emp_id      NUMBER</span><br><span class="line">    , emp_name  VARCHAR2(<span class="number">100</span>)</span><br><span class="line">    , salary    NUMBER</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">---- 사원  테이블에서 월급이 5000 이상인 사원의 사원번호와 사원명 조회 결과</span></span><br><span class="line"><span class="comment">---- ex3_2 테이블에 넣기</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> ex3_2 (emp_id, emp_name, salary)</span><br><span class="line"><span class="keyword">SELECT</span> employee_id, emp_name, salary</span><br><span class="line">  <span class="keyword">FROM</span> employees</span><br><span class="line"> <span class="keyword">WHERE</span> salary <span class="operator">&gt;</span> <span class="number">5000</span></span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> salary;</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> ex3_2;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- UPDATE문</span></span><br><span class="line"><span class="comment">-- 테이블에 있는 기존 데이터를 수정할 때 사용</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> ex3_1;</span><br><span class="line"><span class="keyword">UPDATE</span> ex3_1</span><br><span class="line">   <span class="keyword">SET</span> col2 <span class="operator">=</span> <span class="number">50</span>;</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> ex3_1; </span><br><span class="line"></span><br><span class="line"><span class="keyword">UPDATE</span> ex3_1</span><br><span class="line">   <span class="keyword">SET</span> col3 <span class="operator">=</span> SYSDATE</span><br><span class="line"> <span class="keyword">WHERE</span> col3 <span class="operator">=</span> <span class="string">&#x27;&#x27;</span>;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">UPDATE</span> ex3_1</span><br><span class="line">   <span class="keyword">SET</span> col3 <span class="operator">=</span> SYSDATE</span><br><span class="line"> <span class="keyword">WHERE</span> col3 <span class="keyword">IS</span> <span class="keyword">NULL</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> ex3_1;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- p.101</span></span><br><span class="line"><span class="comment">-- Merge : 데이터를 합치다 또는 추가하다</span></span><br><span class="line"><span class="comment">-- 조건을 비교하여 해당 조건에 맞는 데이터가 테이블에 없으면 추가</span></span><br><span class="line"><span class="comment">-- 있으면 UPDATE문을 수행</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> ex3_3(</span><br><span class="line">    employee_id NUMBER</span><br><span class="line">    , bonus_amt NUMBER <span class="keyword">DEFAULT</span> <span class="number">0</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> ex3_3(employee_id)</span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">    e.employee_id</span><br><span class="line"><span class="keyword">FROM</span> employees e, sales s</span><br><span class="line"><span class="keyword">WHERE</span> e.employee_id <span class="operator">=</span> s.employee_id</span><br><span class="line">    <span class="keyword">AND</span> s.SALES_MONTH <span class="keyword">BETWEEN</span> <span class="string">&#x27;200010&#x27;</span> <span class="keyword">AND</span> <span class="string">&#x27;200012&#x27;</span></span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> e.employee_id;</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> ex3_3 <span class="keyword">ORDER</span> <span class="keyword">BY</span> employee_id;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- p.103</span></span><br><span class="line"><span class="comment">-- 서브쿼리(☆☆☆)</span></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line"> employee_id</span><br><span class="line"> , manager_id</span><br><span class="line"> , salary</span><br><span class="line"> , salary <span class="operator">*</span> <span class="number">0.01</span></span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> employee_id <span class="keyword">IN</span> (<span class="keyword">SELECT</span> employee_id <span class="keyword">FROM</span> ex3_3);</span><br><span class="line">    </span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line"> employee_id</span><br><span class="line"> , manager_id</span><br><span class="line"> , salary</span><br><span class="line"> , salary <span class="operator">*</span> <span class="number">0.001</span></span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> employee_id <span class="keyword">NOT</span> <span class="keyword">IN</span> (<span class="keyword">SELECT</span> employee_id <span class="keyword">FROM</span> ex3_3)</span><br><span class="line">    <span class="keyword">AND</span> manager_id <span class="operator">=</span> <span class="number">146</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- MERGE를 통해서 작성</span></span><br><span class="line"><span class="comment">-- 관리자 사번 146인 것 중, ex3_3 테이블에 없는</span></span><br><span class="line"><span class="comment">-- 사원의 사번, 관리자 사번, 급여, 급여 * 0.001 조회</span></span><br><span class="line"><span class="comment">-- ex3_3 테이블의 160번 사원의 보너스 금액은 7.5로 신규 입력</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> ex3_3;</span><br><span class="line"></span><br><span class="line"><span class="keyword">MERGE</span> <span class="keyword">INTO</span> ex3_3 d</span><br><span class="line">    <span class="keyword">USING</span> (<span class="keyword">SELECT</span> employee_id, salary, manager_id</span><br><span class="line">             <span class="keyword">FROM</span> employees</span><br><span class="line">            <span class="keyword">WHERE</span> manager_id <span class="operator">=</span> <span class="number">146</span>) b</span><br><span class="line">    <span class="keyword">ON</span> (d.employee_id <span class="operator">=</span> b.employee_id)</span><br><span class="line"><span class="keyword">WHEN</span> MATCHED <span class="keyword">THEN</span></span><br><span class="line">    <span class="keyword">UPDATE</span> <span class="keyword">SET</span> d.bonus_amt <span class="operator">=</span> d.bonus_amt <span class="operator">+</span> b.salary <span class="operator">*</span> <span class="number">0.01</span></span><br><span class="line">    <span class="comment">-- DELETE WHERE (B.employee_id = 161)</span></span><br><span class="line"><span class="keyword">WHEN</span> <span class="keyword">NOT</span> MATCHED <span class="keyword">THEN</span></span><br><span class="line">    <span class="keyword">INSERT</span> (d.employee_id, d.bonus_amt) <span class="keyword">VALUES</span> (b.employee_id, b.salary <span class="operator">*</span> <span class="number">0.001</span>)</span><br><span class="line">    <span class="keyword">WHERE</span> b.salary <span class="operator">&lt;</span> <span class="number">8000</span>;</span><br><span class="line">    </span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> ex3_3 <span class="keyword">ORDER</span> <span class="keyword">BY</span> employee_id;</span><br><span class="line"></span><br><span class="line"><span class="keyword">MERGE</span> <span class="keyword">INTO</span> ex3_3 d</span><br><span class="line">    <span class="keyword">USING</span> (<span class="keyword">SELECT</span> employee_id, salary, manager_id</span><br><span class="line">             <span class="keyword">FROM</span> employees</span><br><span class="line">            <span class="keyword">WHERE</span> manager_id <span class="operator">=</span> <span class="number">146</span>) b</span><br><span class="line">    <span class="keyword">ON</span> (d.employee_id <span class="operator">=</span> b.employee_id)</span><br><span class="line"><span class="keyword">WHEN</span> MATCHED <span class="keyword">THEN</span></span><br><span class="line">    <span class="keyword">UPDATE</span> <span class="keyword">SET</span> d.bonus_amt <span class="operator">=</span> d.bonus_amt <span class="operator">+</span> b.salary <span class="operator">*</span> <span class="number">0.01</span></span><br><span class="line">    <span class="keyword">DELETE</span> <span class="keyword">WHERE</span> (B.employee_id <span class="operator">=</span> <span class="number">161</span>)</span><br><span class="line"><span class="keyword">WHEN</span> <span class="keyword">NOT</span> MATCHED <span class="keyword">THEN</span></span><br><span class="line">    <span class="keyword">INSERT</span> (d.employee_id, d.bonus_amt) <span class="keyword">VALUES</span> (b.employee_id, b.salary <span class="operator">*</span> <span class="number">0.001</span>)</span><br><span class="line">    <span class="keyword">WHERE</span> b.salary <span class="operator">&lt;</span> <span class="number">8000</span>;</span><br><span class="line">    </span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> ex3_3 <span class="keyword">ORDER</span> <span class="keyword">BY</span> employee_id;</span><br><span class="line"><span class="comment">-- p.106</span></span><br><span class="line"><span class="comment">-- 테이블 데이터 삭제</span></span><br><span class="line"><span class="keyword">DELETE</span> ex3_3;</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> ex3_3 <span class="keyword">ORDER</span> <span class="keyword">BY</span> employee_id;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- p.107</span></span><br><span class="line"><span class="comment">-- commit &amp; rollback</span></span><br><span class="line"><span class="comment">--- Commit은 변경한 데이터를 데이터베이스에 마지막으로 반영</span></span><br><span class="line"><span class="comment">--- Rollback은 그 반대로 변경한 데이터를 변경하기 이전 상태로 되돌리는 역할</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> ex3_4;</span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> ex3_4(</span><br><span class="line"> employee_id NUMBER</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> ex3_4 <span class="keyword">VALUES</span> (<span class="number">100</span>);</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> ex3_4;</span><br><span class="line"></span><br><span class="line"><span class="keyword">commit</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- p.109</span></span><br><span class="line"><span class="keyword">TRUNCATE</span> <span class="keyword">TABLE</span> ex3_4;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- p.110</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">    ROWNUM, employee_id</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> ROWNUM <span class="operator">&lt;</span> <span class="number">5</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- ROWID, 주소값</span></span><br><span class="line"><span class="comment">-- DBA, DB모델링 (쿼리속도 측정 --&gt; 특징)</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">    ROWNUM</span><br><span class="line">    , employee_id</span><br><span class="line">    , ROWID</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> ROWNUM <span class="operator">&lt;</span> <span class="number">5</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 연산자</span></span><br><span class="line"><span class="comment">-- Operator 연산 수행</span></span><br><span class="line"><span class="comment">-- 수식 연산자 &amp; 문자 연산자</span></span><br><span class="line"><span class="comment">-- &#x27;||&#x27; 두 문자를 붙이는 연결 연산자</span></span><br><span class="line"><span class="comment">-- &#x27;Alias&#x27; 약어</span></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line"> employee_id <span class="operator">||</span> <span class="string">&#x27;-&#x27;</span> <span class="operator">||</span> emp_name <span class="keyword">AS</span> employee_info</span><br><span class="line"> <span class="keyword">FROM</span> employees</span><br><span class="line"> <span class="keyword">WHERE</span> ROWNUM <span class="operator">&lt;</span> <span class="number">5</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 표현식</span></span><br><span class="line"><span class="comment">-- 조건문, if조건문 (PL/SQL)</span></span><br><span class="line"><span class="comment">-- CASE 표현식</span></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line"> employee_id</span><br><span class="line"> , salary</span><br><span class="line"> , <span class="keyword">CASE</span> <span class="keyword">WHEN</span> salary <span class="operator">&lt;=</span> <span class="number">5000</span> <span class="keyword">THEN</span> <span class="string">&#x27;C등급&#x27;</span></span><br><span class="line">      <span class="keyword">WHEN</span> salary <span class="operator">&gt;</span> <span class="number">5000</span> <span class="keyword">AND</span> salary <span class="operator">&lt;=</span> <span class="number">15000</span> <span class="keyword">THEN</span> <span class="string">&#x27;B등급&#x27;</span></span><br><span class="line">      <span class="keyword">ELSE</span> <span class="string">&#x27;A등급&#x27;</span></span><br><span class="line"> <span class="keyword">END</span> <span class="keyword">AS</span> salary_grade</span><br><span class="line"><span class="keyword">FROM</span> employees;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 조건식</span></span><br><span class="line"><span class="comment">-- TRUE, FALSE, UNKNOWN 세 가지 타입으로 반환</span></span><br><span class="line"><span class="comment">-- 비교 조건식</span></span><br><span class="line"><span class="comment">-- 분석가, DB 데이터를 추출 시, 서브쿼리</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- ANY</span></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line"> employee_id</span><br><span class="line"> , salary</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> salary <span class="operator">=</span> <span class="keyword">ANY</span> (<span class="number">2000</span>, <span class="number">3000</span>, <span class="number">4000</span>)</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> employee_id;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- ANY --&gt; OR 연산자 변환</span></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">employee_id</span><br><span class="line"> , salary</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> salary <span class="operator">=</span> <span class="number">2000</span> <span class="keyword">OR</span> salary <span class="operator">=</span> <span class="number">3000</span> <span class="keyword">OR</span> salary <span class="operator">=</span> <span class="number">4000</span></span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> employee_id;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- ALL</span></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line"> employee_id</span><br><span class="line"> , salary</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> salary <span class="operator">=</span> <span class="keyword">ALL</span> (<span class="number">2000</span>, <span class="number">3000</span>, <span class="number">4000</span>)  <span class="comment">-- AND 연산자</span></span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> employee_id;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- SOME</span></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line"> employee_id</span><br><span class="line"> , salary</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> salary <span class="operator">=</span> <span class="keyword">SOME</span> (<span class="number">2000</span>, <span class="number">3000</span>, <span class="number">4000</span>)</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> employee_id;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- NOT 조건식</span></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line"> employee_id</span><br><span class="line"> , salary</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> <span class="keyword">NOT</span>(salary <span class="operator">&gt;=</span> <span class="number">2500</span>)</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> employee_id;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- NULL 조건식 ☆</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- IN 조건식</span></span><br><span class="line"><span class="comment">-- 조건절에 명시한 값이 포함된 건을 반환하는데 앞에서 배웠던 ANY와 유사</span></span><br><span class="line"><span class="keyword">SELECT</span> employee_id, salary</span><br><span class="line">  <span class="keyword">FROM</span> employees</span><br><span class="line"> <span class="keyword">WHERE</span> salary <span class="keyword">IN</span> (<span class="number">2000</span>, <span class="number">3000</span>, <span class="number">4000</span>)</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> employee_id;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- NOT IN</span></span><br><span class="line"><span class="keyword">SELECT</span> employee_id, salary</span><br><span class="line">  <span class="keyword">FROM</span> employees</span><br><span class="line"> <span class="keyword">WHERE</span> salary <span class="keyword">NOT</span> <span class="keyword">IN</span> (<span class="number">2000</span>, <span class="number">3000</span>, <span class="number">4000</span>)</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> employee_id;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- EXISTS 조건식</span></span><br><span class="line"><span class="comment">-- 서브쿼리만 올 수 있음</span></span><br><span class="line"><span class="keyword">SELECT</span> department_id, department_name</span><br><span class="line">  <span class="keyword">FROM</span> departments a</span><br><span class="line"> <span class="keyword">WHERE</span> <span class="keyword">EXISTS</span> ( <span class="keyword">SELECT</span> <span class="operator">*</span></span><br><span class="line">                  <span class="keyword">FROM</span> employees b</span><br><span class="line">                 <span class="keyword">WHERE</span> a.department_id <span class="operator">=</span> b.department_id</span><br><span class="line">                   <span class="keyword">AND</span> b.salary <span class="operator">&gt;</span> <span class="number">3000</span>)</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> a.department_name;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- LIKE 조건식</span></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line"> emp_name</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> emp_name <span class="keyword">LIKE</span> <span class="string">&#x27;%Al%&#x27;</span></span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> emp_name;</span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> ex3_5(</span><br><span class="line">    names   VARCHAR2(<span class="number">30</span>)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> ex3_5 <span class="keyword">VALUES</span> (<span class="string">&#x27;홍길동&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> ex3_5 <span class="keyword">VALUES</span> (<span class="string">&#x27;홍길용&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> ex3_5 <span class="keyword">VALUES</span> (<span class="string">&#x27;홍길상&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> ex3_5 <span class="keyword">VALUES</span> (<span class="string">&#x27;홍길상동&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span></span><br><span class="line">  <span class="keyword">FROM</span> ex3_5</span><br><span class="line"> <span class="keyword">WHERE</span> names <span class="keyword">LIKE</span> <span class="string">&#x27;홍길%&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span></span><br><span class="line">  <span class="keyword">FROM</span> ex3_5</span><br><span class="line"> <span class="keyword">WHERE</span> names <span class="keyword">LIKE</span> <span class="string">&#x27;홍길_&#x27;</span>;</span><br><span class="line"> </span><br><span class="line"><span class="comment">-- 4장 숫자 함수</span></span><br><span class="line"><span class="comment">-- p.126</span></span><br><span class="line"><span class="comment">-- 절댓값 반환</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">ABS</span>(<span class="number">10</span>), <span class="built_in">ABS</span>(<span class="number">-10</span>), <span class="built_in">ABS</span>(<span class="number">-10.123</span>)</span><br><span class="line"><span class="keyword">FROM</span> DUAL;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 정수 반환(올림)</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">CEIL</span>(<span class="number">10.123</span>), <span class="built_in">CEIL</span>(<span class="number">10.541</span>), <span class="built_in">CEIL</span>(<span class="number">11.001</span>)</span><br><span class="line"><span class="keyword">FROM</span> DUAL;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 정수 반환(내림)</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">FLOOR</span>(<span class="number">10.123</span>), <span class="built_in">FLOOR</span>(<span class="number">10.541</span>), <span class="built_in">FLOOR</span>(<span class="number">11.001</span>)</span><br><span class="line"><span class="keyword">FROM</span> DUAL;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 정수 반환(반올림)</span></span><br><span class="line"><span class="keyword">SELECT</span> ROUND(<span class="number">10.123</span>), ROUND(<span class="number">10.541</span>), ROUND(<span class="number">11.001</span>)</span><br><span class="line"><span class="keyword">FROM</span> DUAL;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 소수점 n번째 자리에서 반올림</span></span><br><span class="line"><span class="keyword">SELECT</span> ROUND(<span class="number">10.123</span>, <span class="number">2</span>), ROUND(<span class="number">10.541</span>, <span class="number">1</span>), ROUND(<span class="number">11.001</span>, <span class="number">2</span>)</span><br><span class="line"><span class="keyword">FROM</span> DUAL;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- TRUNC</span></span><br><span class="line"><span class="comment">-- 반올림 안함, 소수점 절삭, 자리수 지정 가능</span></span><br><span class="line"><span class="keyword">SELECT</span> TRUNC(<span class="number">115.155</span>, <span class="number">1</span>), TRUNC(<span class="number">115.155</span>, <span class="number">2</span>), TRUNC(<span class="number">115.155</span>, <span class="number">2</span>), TRUNC(<span class="number">115.155</span>, <span class="number">-2</span>)</span><br><span class="line"><span class="keyword">FROM</span> DUAL;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- POWER</span></span><br><span class="line"><span class="comment">-- POWER 함수, SQRT</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">POWER</span>(<span class="number">3</span>, <span class="number">2</span>), <span class="built_in">POWER</span>(<span class="number">3</span>, <span class="number">3</span>), <span class="built_in">POWER</span>(<span class="number">3</span>, <span class="number">3.001</span>)</span><br><span class="line"><span class="keyword">FROM</span> DUAL;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 제곱근 반환</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">SQRT</span>(<span class="number">2</span>), <span class="built_in">SQRT</span>(<span class="number">5</span>), <span class="built_in">SQRT</span>(<span class="number">9</span>)</span><br><span class="line"><span class="keyword">FROM</span> DUAL;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 과거 SQL : DB에서 자료를 조회하는 용</span></span><br><span class="line"><span class="comment">-- 현재 SQL : 수학 &amp; 통계 도구처럼 진화</span></span><br><span class="line"><span class="comment">-- 오라클 19C부터 머신러닝 지원</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 문자열 데이터 전처리</span></span><br><span class="line"><span class="comment">-- 문자 함수 부분 정리해서 블로그 올리기</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> INITCAP(<span class="string">&#x27;never say goodbye&#x27;</span>), INITCAP(<span class="string">&#x27;never6say*good가bye&#x27;</span>)</span><br><span class="line"><span class="keyword">FROM</span> DUAL;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- LOWER 함수</span></span><br><span class="line"><span class="comment">-- 매개변수로 들어오는 문자를 모두 소문자로, UPPER 함수는 대문자로 반환</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">LOWER</span>(<span class="string">&#x27;NEVER SAY GOODBYE&#x27;</span>), <span class="built_in">UPPER</span>(<span class="string">&#x27;never say goodbye&#x27;</span>)</span><br><span class="line"><span class="keyword">FROM</span> DUAL;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- CONCAT(char1, char2), &#x27;||&#x27; 연산자와 비슷</span></span><br><span class="line"><span class="keyword">SELECT</span> CONCAT(<span class="string">&#x27;I Have&#x27;</span>, <span class="string">&#x27; A Dream&#x27;</span>), <span class="string">&#x27;I Have&#x27;</span> <span class="operator">||</span> <span class="string">&#x27; A Dream&#x27;</span></span><br><span class="line"><span class="keyword">FROM</span> DUAL;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- SUBSTR</span></span><br><span class="line"><span class="comment">-- 문자열 자르기</span></span><br><span class="line"><span class="keyword">SELECT</span> SUBSTR(<span class="string">&#x27;ABCDEFG&#x27;</span>, <span class="number">1</span>, <span class="number">4</span>), SUBSTR(<span class="string">&#x27;ABCDEFG&#x27;</span>, <span class="number">-1</span>, <span class="number">4</span>)</span><br><span class="line"><span class="keyword">FROM</span> DUAL;</span><br><span class="line"><span class="comment">-- 글자 1개당 3Bytes씩 인식(교재는 2Bytes씩 인식)</span></span><br><span class="line"><span class="keyword">SELECT</span> SUBSTRB(<span class="string">&#x27;ABCDEFG&#x27;</span>, <span class="number">1</span>, <span class="number">4</span>), SUBSTRB(<span class="string">&#x27;가나다라마바사&#x27;</span>, <span class="number">1</span>, <span class="number">6</span>)</span><br><span class="line"><span class="keyword">FROM</span> DUAL;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- LTRIM, RTRIM 함수</span></span><br><span class="line"><span class="keyword">SELECT</span> LTRIM(<span class="string">&#x27;ABCDEFGABC&#x27;</span>, <span class="string">&#x27;ABC&#x27;</span>)</span><br><span class="line">     , RTRIM(<span class="string">&#x27;ABCDEFGABC&#x27;</span>, <span class="string">&#x27;ABC&#x27;</span>)</span><br><span class="line"><span class="keyword">FROM</span> DUAL;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- LPAD, RPAD 함수</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> ex4_1 (</span><br><span class="line">       phone_num VARCHAR2(<span class="number">30</span>)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> ex4_1 <span class="keyword">VALUES</span> (<span class="string">&#x27;111-1111&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> ex4_1 <span class="keyword">VALUES</span> (<span class="string">&#x27;111-2222&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> ex4_1 <span class="keyword">VALUES</span> (<span class="string">&#x27;111-3333&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span></span><br><span class="line"> <span class="keyword">FROM</span> ex4_1;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">SELECT</span> LPAD(phone_num, <span class="number">12</span>, <span class="string">&#x27;(02)&#x27;</span>)</span><br><span class="line">  <span class="keyword">FROM</span> ex4_1;</span><br><span class="line"><span class="keyword">SELECT</span> RPAD(phone_num, <span class="number">12</span>, <span class="string">&#x27;(02)&#x27;</span>)</span><br><span class="line">  <span class="keyword">FROM</span> ex4_1;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- REPLACE, TRANSLATE 함수</span></span><br><span class="line"><span class="keyword">SELECT</span> REPLACE(<span class="string">&#x27;나는 너를 모르는데 너는 나를 알겠는가?&#x27;</span>, <span class="string">&#x27;나&#x27;</span>, <span class="string">&#x27;너&#x27;</span>)</span><br><span class="line">  <span class="keyword">FROM</span> DUAL;</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> LTRIM(<span class="string">&#x27; ABC DEF &#x27;</span>)</span><br><span class="line">     , RTRIM(<span class="string">&#x27; ABC DEF &#x27;</span>)</span><br><span class="line">     , REPLACE(<span class="string">&#x27; ABC DEF &#x27;</span>, <span class="string">&#x27; &#x27;</span>, <span class="string">&#x27;&#x27;</span>)</span><br><span class="line">  <span class="keyword">FROM</span> DUAL;</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> REPLACE(<span class="string">&#x27;나는 너를 모르는데 너는 나를 알겠는가?&#x27;</span>, <span class="string">&#x27;나는&#x27;</span>, <span class="string">&#x27;너를&#x27;</span>) <span class="keyword">AS</span> rep</span><br><span class="line">     , <span class="built_in">TRANSLATE</span>(<span class="string">&#x27;나는 너를 모르는데 너는 나를 알겠는가?&#x27;</span>, <span class="string">&#x27;나는&#x27;</span>, <span class="string">&#x27;너를&#x27;</span>) <span class="keyword">AS</span> trn</span><br><span class="line">  <span class="keyword">FROM</span> DUAL;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- INSTR</span></span><br><span class="line"><span class="keyword">SELECT</span> INSTR(<span class="string">&#x27;내가 만약 외로울 때면, 내가 만약 괴로울 때면, 내가 만약 즐거울 때면&#x27;</span></span><br><span class="line">             , <span class="string">&#x27;만약&#x27;</span>) <span class="keyword">AS</span> INSTR1</span><br><span class="line">             ,</span><br><span class="line">       INSTR(<span class="string">&#x27;내가 만약 외로울 때면, 내가 만약 괴로울 때면, 내가 만약 즐거울 때면&#x27;</span></span><br><span class="line">            , <span class="string">&#x27;만약&#x27;</span></span><br><span class="line">            , <span class="number">5</span>) <span class="keyword">AS</span> INSTR2</span><br><span class="line">            ,</span><br><span class="line">       INSTR(<span class="string">&#x27;내가 만약 외로울 때면, 내가 만약 괴로울 때면, 내가 만약 즐거울 때면&#x27;</span></span><br><span class="line">            , <span class="string">&#x27;만약&#x27;</span></span><br><span class="line">            , <span class="number">5</span></span><br><span class="line">            , <span class="number">2</span>) <span class="keyword">AS</span> INSTR3</span><br><span class="line"><span class="keyword">FROM</span> DUAL;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- LENGTH, LENGTHB</span></span><br><span class="line"><span class="keyword">SELECT</span> LENGTH(<span class="string">&#x27;대한민국&#x27;</span>)</span><br><span class="line">     , LENGTHB(<span class="string">&#x27;대한민국&#x27;</span>)</span><br><span class="line"><span class="keyword">FROM</span> DUAL;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 날짜 함수(p.138)</span></span><br><span class="line"><span class="keyword">SELECT</span> SYSDATE, SYSTIMESTAMP <span class="keyword">FROM</span> DUAL;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- ADD_MONTHS</span></span><br><span class="line"><span class="comment">-- ADD_MONTHS 함수, 매개변수로 들어온 날짜, integer만큼 월을 더함</span></span><br><span class="line"><span class="keyword">SELECT</span> ADD_MONTHS(SYSDATE, <span class="number">-1</span>) <span class="keyword">FROM</span> DUAL;</span><br><span class="line"><span class="keyword">SELECT</span> MONTHS_BETWEEN(SYSDATE, ADD_MONTHS(SYSDATE, <span class="number">1</span>)) mon1</span><br><span class="line">     , MONTHS_BETWEEN(ADD_MONTHS(SYSDATE, <span class="number">1</span>), SYSDATE) mon2</span><br><span class="line">  <span class="keyword">FROM</span> DUAL;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- LAST_DAY</span></span><br><span class="line"><span class="keyword">SELECT</span> LAST_DAY(SYSDATE) <span class="keyword">FROM</span> DUAL;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- ROUND, TRUNC</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- NEXT_DAY</span></span><br><span class="line"><span class="keyword">SELECT</span> NEXT_DAY(SYSDATE, <span class="string">&#x27;금요일&#x27;</span>) <span class="keyword">FROM</span> DUAL;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- p.141 형변환</span></span><br><span class="line"><span class="comment">-- TO_CHAR(숫자 혹은 날짜, format)</span></span><br><span class="line"><span class="keyword">SELECT</span> TO_CHAR(<span class="number">123456789</span>, <span class="string">&#x27;999,999,999&#x27;</span>) <span class="keyword">FROM</span> DUAL;</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> TO_CHAR(SYSDATE, <span class="string">&#x27;AM&#x27;</span>) <span class="keyword">FROM</span> DUAL;</span><br><span class="line"><span class="keyword">SELECT</span> TO_CHAR(SYSDATE, <span class="string">&#x27;PM&#x27;</span>) <span class="keyword">FROM</span> DUAL;</span><br><span class="line"><span class="keyword">SELECT</span> TO_CHAR(SYSDATE, <span class="string">&#x27;YYYY&#x27;</span>) <span class="keyword">FROM</span> DUAL;</span><br><span class="line"><span class="keyword">SELECT</span> TO_CHAR(SYSDATE, <span class="string">&#x27;MM&#x27;</span>) <span class="keyword">FROM</span> DUAL;</span><br><span class="line"><span class="keyword">SELECT</span> TO_CHAR(SYSDATE, <span class="string">&#x27;D&#x27;</span>) <span class="keyword">FROM</span> DUAL;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 문자를 숫자로 변환</span></span><br><span class="line"><span class="keyword">SELECT</span> TO_NUMBER(<span class="string">&#x27;123456&#x27;</span>) <span class="keyword">FROM</span> DUAL;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- NULL 관련 함수</span></span><br><span class="line"><span class="keyword">SELECT</span> manager_id, employee_id <span class="keyword">FROM</span> employees;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- NVL : 표현식 1이 NULL일 때, 표현식 2를 반환함</span></span><br><span class="line"><span class="keyword">SELECT</span> NVL(manager_id, employee_id)</span><br><span class="line">  <span class="keyword">FROM</span> employees</span><br><span class="line"> <span class="keyword">WHERE</span> manager_id <span class="keyword">IS</span> <span class="keyword">NULL</span>;</span><br><span class="line"> </span><br><span class="line"><span class="comment">-- NLV2 : 표현식 1이 NULL이 아니면, 표현식 2 출력</span></span><br><span class="line"><span class="comment">--        표현식 2가 NULL이면, 표현식 3 출력</span></span><br><span class="line"><span class="keyword">SELECT</span> employee_id</span><br><span class="line">     , NVL2(commission_pct, salary <span class="operator">+</span> (salary <span class="operator">*</span> commission_pct), salary) <span class="keyword">AS</span> salary <span class="number">2</span></span><br><span class="line"><span class="keyword">FROM</span> employees;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- COALESCE(expr1, expr2)</span></span><br><span class="line"><span class="comment">-- 매개변수로 들어오는 표현식에서 NULL이 아닌 첫 번째 표현식 반환</span></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">  employee_id</span><br><span class="line">  , salary</span><br><span class="line">  , commission_pct</span><br><span class="line">  , <span class="built_in">COALESCE</span>(salary <span class="operator">*</span> commission_pct, salary) <span class="keyword">as</span> salary2</span><br><span class="line"> <span class="keyword">FROM</span> employees;</span><br><span class="line"> </span><br><span class="line"> <span class="comment">-- DECODE</span></span><br><span class="line"> <span class="comment">-- IF-ELIF-ELIF-ELIF-ELSE</span></span><br><span class="line"> </span><br><span class="line"> <span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> SALES;</span><br><span class="line"> </span><br><span class="line"> <span class="keyword">SELECT</span> prod_id</span><br><span class="line">       , DECODE(channel_id, <span class="number">3</span>, <span class="string">&#x27;Direct&#x27;</span></span><br><span class="line">                          , <span class="number">9</span>, <span class="string">&#x27;Direct&#x27;</span></span><br><span class="line">                          , <span class="number">5</span>, <span class="string">&#x27;Indirect&#x27;</span></span><br><span class="line">                          , <span class="number">4</span>, <span class="string">&#x27;Indirect&#x27;</span></span><br><span class="line">                          , <span class="string">&#x27;Others&#x27;</span>) decodes</span><br><span class="line"><span class="keyword">FROM</span> sales</span><br><span class="line"><span class="keyword">WHERE</span> rownum <span class="operator">&lt;</span> <span class="number">10</span>;</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="entry-meta entry-footer">
      
      
      
    </footer>
    <hr class="entry-footer-hr">
  </div>
  
</article>

<!-- Table of Contents -->

  
    <article id="post-Day24_20220719"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/2022/07/19/Day24_20220719/">July 19, 2022, Day24</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	<a href="/2022/07/19/Day24_20220719/" class="article-date">
	  <time datetime="2022-07-18T23:22:22.000Z" itemprop="datePublished">July 19, 2022</time>
	</a>

       
      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="7-19-화-강의"><a href="#7-19-화-강의" class="headerlink" title="7.19(화) 강의"></a>7.19(화) 강의</h1><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> table_name <span class="keyword">FROM</span> user_tables;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- SQL vs PL/SQL</span></span><br><span class="line"><span class="comment">-- SQL (분석가(90%) + 개발자(30%))</span></span><br><span class="line"><span class="comment">------ 프로그래밍 성격이 옅음</span></span><br><span class="line"><span class="comment">-- PL/SQL (분석가(10%) + 개발자(70%) + DBA)</span></span><br><span class="line"><span class="comment">-- 입문 : SQL ---&gt; 테이블, 뷰 PL/SQL ---&gt; 함수, 프로시저</span></span><br><span class="line"><span class="comment">-- 테이블 생성</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">CREATE TABLE 테이블명(</span></span><br><span class="line"><span class="comment">컬럼1 컬럼1_데이터타입 결측치 허용유무</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">)</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- p.50</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> ex2_1 (</span><br><span class="line">COLUMN1 <span class="type">CHAR</span>(<span class="number">10</span>),</span><br><span class="line">COLUMN2 VARCHAR2(<span class="number">10</span>),</span><br><span class="line">COLUMN3 NVARCHAR2(<span class="number">10</span>),</span><br><span class="line">COLUMN4 NUMBER</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 데이터 추가</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> ex2_1 (column1, column2) <span class="keyword">VALUES</span> (<span class="string">&#x27;abc&#x27;</span>, <span class="string">&#x27;abc&#x27;</span>);</span><br><span class="line"><span class="comment">-- 테이블 생성, 추가, 삭제, 수정 코드들</span></span><br><span class="line"><span class="comment">-- 파이썬이나 JAVA에서 다 쓸 코드들</span></span><br><span class="line"><span class="comment">-- 데이터 조회</span></span><br><span class="line"><span class="keyword">SELECT</span> column1, LENGTH(column1) <span class="keyword">as</span> len1</span><br><span class="line"><span class="keyword">FROM</span> ex2_1;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- p.53</span></span><br><span class="line"><span class="comment">--- 영어에서 한 문자는 1byte</span></span><br><span class="line"><span class="comment">--- 한글에서 한 문자는 2byte</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> ex2_2(</span><br><span class="line">COLUMN1 VARCHAR2(<span class="number">3</span>),</span><br><span class="line">COLUMN2 VARCHAR2(<span class="number">3</span> byte),</span><br><span class="line">COLUMN3 VARCHAR2(<span class="number">3</span> <span class="type">char</span>)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 데이터 추가</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> ex2_2 <span class="keyword">VALUES</span>(<span class="string">&#x27;abc&#x27;</span>, <span class="string">&#x27;abc&#x27;</span>, <span class="string">&#x27;abc&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> column1</span><br><span class="line">, LENGTH(column1) <span class="keyword">AS</span> len1</span><br><span class="line">, column2</span><br><span class="line">, LENGTH(column2) <span class="keyword">AS</span> len2</span><br><span class="line">, column3</span><br><span class="line">, LENGTH(column3) <span class="keyword">AS</span> len3</span><br><span class="line"><span class="keyword">FROM</span> ex2_2;</span><br><span class="line"></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> ex2_2 <span class="keyword">VALUES</span> (<span class="string">&#x27;홍길동&#x27;</span>, <span class="string">&#x27;홍길동&#x27;</span>, <span class="string">&#x27;홍길동&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> ex2_2 (column3) <span class="keyword">VALUES</span> (<span class="string">&#x27;홍길동&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> column3</span><br><span class="line">, LENGTH(column3) <span class="keyword">AS</span> len3</span><br><span class="line">, LENGTHB(column3) <span class="keyword">AS</span> bytelen</span><br><span class="line"><span class="keyword">FROM</span> ex2_2;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 숫자 데이터 타입</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> ex2_3 (</span><br><span class="line">COL_INT <span class="type">INTEGER</span>,</span><br><span class="line">COL_DEC <span class="type">DECIMAL</span>,</span><br><span class="line">COL_NUM NUMBER</span><br><span class="line">);</span><br><span class="line"><span class="comment">-- SQL vs PL/SQL</span></span><br><span class="line"><span class="comment">-- R dplyr 패키지 ---&gt; SQL 모방해서 만든 것</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">SELECT 컬럼명</span></span><br><span class="line"><span class="comment">FROM 테이블명</span></span><br><span class="line"><span class="comment">WHERE 조건식</span></span><br><span class="line"><span class="comment">ORDER BY 정렬</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> user_tab_cols</span><br><span class="line"><span class="comment">-- * : 모든 컬럼</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> column_id</span><br><span class="line">, column_name</span><br><span class="line">, data_type</span><br><span class="line">, data_length</span><br><span class="line"><span class="keyword">FROM</span> user_tab_cols</span><br><span class="line"><span class="keyword">WHERE</span> table_name <span class="operator">=</span> <span class="string">&#x27;EX2_3&#x27;</span></span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> column_id;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 날짜 데이터 타입</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> ex2_5(</span><br><span class="line">COL_DATE <span class="type">DATE</span>,</span><br><span class="line">COL_TIMESTAMP <span class="type">TIMESTAMP</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> ex2_5 <span class="keyword">VALUES</span> (SYSDATE, SYSTIMESTAMP);</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span></span><br><span class="line"><span class="keyword">FROM</span> ex2_5;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- NULL : 값이 없음</span></span><br><span class="line"><span class="comment">-- 해당 컬럼은 NULL</span></span><br><span class="line"><span class="comment">-- 결측치 허용 X : NOT NULL</span></span><br><span class="line"><span class="comment">-- p.60</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> ex2_6(</span><br><span class="line">COL_NULL VARCHAR2(<span class="number">10</span>), <span class="comment">-- 결측치 허용</span></span><br><span class="line">COL_NOT_NULL VARCHAR2(<span class="number">10</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="comment">-- 결측치 허용 X</span></span><br><span class="line">);</span><br><span class="line"><span class="comment">--- 에러 발생</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> ex2_6 <span class="keyword">VALUES</span> (<span class="string">&#x27;AA&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="comment">--- 정상적으로 삽입됨</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> ex2_6 <span class="keyword">VALUES</span> (<span class="string">&#x27;&#x27;</span>, <span class="string">&#x27;BB&#x27;</span>);</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> ex2_6;</span><br><span class="line"></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> ex2_6 <span class="keyword">VALUES</span> (<span class="string">&#x27;AA&#x27;</span>, <span class="string">&#x27;BB&#x27;</span>);</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> ex2_6;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- p.61 제약조건 CONSTRAINTS</span></span><br><span class="line"><span class="keyword">SELECT</span> constraint_name</span><br><span class="line">, constraint_type</span><br><span class="line">, table_name</span><br><span class="line">, search_condition</span><br><span class="line"><span class="keyword">FROM</span> user_constraints</span><br><span class="line"><span class="keyword">WHERE</span> table_name <span class="operator">=</span> <span class="string">&#x27;EX2_6&#x27;</span>;</span><br><span class="line"><span class="comment">-- 제약조건 UNIQUE</span></span><br><span class="line"><span class="comment">-- 중복 값 허용</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> ex2_7(</span><br><span class="line">COL_UNIQUE_NULL VARCHAR2(<span class="number">10</span>) <span class="keyword">UNIQUE</span>,</span><br><span class="line">COL_UNIQUE_NNULL VARCHAR2(<span class="number">10</span>) <span class="keyword">UNIQUE</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">COL_UNIQUE VARCHAR2(<span class="number">10</span>),</span><br><span class="line">CONSTRAINTS unique_nm1 <span class="keyword">UNIQUE</span> (COL_UNIQUE)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> constraint_name</span><br><span class="line">, constraint_type</span><br><span class="line">, table_name</span><br><span class="line">, search_condition</span><br><span class="line"><span class="keyword">FROM</span> user_constraints</span><br><span class="line"><span class="keyword">WHERE</span> table_name <span class="operator">=</span> <span class="string">&#x27;EX2_7&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 테이블 삭제</span></span><br><span class="line"><span class="comment">/* DROP TABLE 테이블명;*/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> ex2_7 <span class="keyword">VALUES</span> (<span class="string">&#x27;AA&#x27;</span>, <span class="string">&#x27;AA&#x27;</span>, <span class="string">&#x27;AA&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> ex2_7 <span class="keyword">VALUES</span> (<span class="string">&#x27;&#x27;</span>, <span class="string">&#x27;BB&#x27;</span>, <span class="string">&#x27;CC&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> ex2_7 <span class="keyword">VALUES</span> (<span class="string">&#x27;&#x27;</span>, <span class="string">&#x27;CC&#x27;</span>, <span class="string">&#x27;BB&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 제약조건 기본키 ☆</span></span><br><span class="line"><span class="comment">-- Primary Key</span></span><br><span class="line"><span class="comment">-- UNIQUE(중복 허용 X), NOT NULL(결측치 허용 X) 2가지가 동시에 적용</span></span><br><span class="line"><span class="comment">-- 테이블 당 1개의 기본키만 설정 가능</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> ex2_8(</span><br><span class="line">COL1        VARCHAR2(<span class="number">10</span>) <span class="keyword">PRIMARY</span> KEY,</span><br><span class="line">COL2        VARCHAR2(<span class="number">10</span>)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> constraint_name</span><br><span class="line">, constraint_type</span><br><span class="line">, table_name</span><br><span class="line">, search_condition</span><br><span class="line"><span class="keyword">FROM</span> user_constraints</span><br><span class="line"><span class="keyword">WHERE</span> table_name <span class="operator">=</span> <span class="string">&#x27;EX2_8&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> ex2_8 <span class="keyword">VALUES</span> (<span class="string">&#x27;&#x27;</span>, <span class="string">&#x27;AA&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> ex2_8 <span class="keyword">VALUES</span> (<span class="string">&#x27;AA&#x27;</span>, <span class="string">&#x27;AA&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> constraint_name</span><br><span class="line">, constraint_type</span><br><span class="line">, table_name</span><br><span class="line">, search_condition</span><br><span class="line"><span class="keyword">FROM</span> user_constraints</span><br><span class="line"><span class="keyword">WHERE</span> table_name <span class="operator">=</span> <span class="string">&#x27;JOBS&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> user_constraints;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 제약조건 외래키 : 테이블 간의 참조 데이터 무결성 위한 제약 조건 ☆☆</span></span><br><span class="line"><span class="comment">-- 참조 무결성을 보장한다</span></span><br><span class="line"><span class="comment">---- 잘못된 정보가 입력되는 것을 방지</span></span><br><span class="line"><span class="comment">-- 제약조건 CHECK</span></span><br><span class="line"><span class="comment">-- 컬럼에 입력되는 데이터를 체크해 특정 조건에 맞는 데이터만 입력</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> ex2_9(</span><br><span class="line">num1 NUMBER</span><br><span class="line">CONSTRAINTS check1 <span class="keyword">CHECK</span> (num1 <span class="keyword">BETWEEN</span> <span class="number">1</span> <span class="keyword">AND</span> <span class="number">9</span>)</span><br><span class="line">, gender VARCHAR2(<span class="number">10</span>)</span><br><span class="line">CONSTRAINTS check2 <span class="keyword">CHECK</span> (gender <span class="keyword">IN</span> (<span class="string">&#x27;MALE&#x27;</span>, <span class="string">&#x27;FEMALE&#x27;</span>))</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> constraint_name</span><br><span class="line">, constraint_type</span><br><span class="line">, table_name</span><br><span class="line">, search_condition</span><br><span class="line"><span class="keyword">FROM</span> user_constraints</span><br><span class="line"><span class="keyword">WHERE</span> table_name <span class="operator">=</span> <span class="string">&#x27;EX2_9&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> ex2_9 <span class="keyword">VALUES</span> (<span class="number">10</span>, <span class="string">&#x27;MAN&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> ex2_9 <span class="keyword">VALUES</span> (<span class="number">10</span>, <span class="string">&#x27;FEMALE&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> ex2_9 <span class="keyword">VALUES</span> (<span class="number">5</span>, <span class="string">&#x27;FEMALE&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- Default</span></span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> ex2_10;</span><br><span class="line"><span class="comment">--- alter session set nls_date_format=&#x27;YYYY/MM/DD HH24:MI:SS&#x27;;</span></span><br><span class="line"><span class="comment">--- alter session set 코드</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> ex2_10(</span><br><span class="line">Col1    VARCHAR2(<span class="number">10</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span></span><br><span class="line">, Col2  VARCHAR2(<span class="number">10</span>) <span class="keyword">NULL</span></span><br><span class="line">, Create_date <span class="type">DATE</span> <span class="keyword">DEFAULT</span> SYSDATE</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> ex2_10 (col1, col2) <span class="keyword">VALUES</span> (<span class="string">&#x27;AA&#x27;</span>, <span class="string">&#x27;BB&#x27;</span>);</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> ex2_10;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 테이블 변경</span></span><br><span class="line"><span class="comment">-- ALTER TABLE</span></span><br><span class="line"><span class="comment">--- 컬럼명 변경</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> ex2_10 RENAME <span class="keyword">COLUMN</span> Col1 <span class="keyword">TO</span> Col11;</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> ex2_10;</span><br><span class="line"></span><br><span class="line"><span class="keyword">DESC</span> ex2_10;</span><br><span class="line"></span><br><span class="line"><span class="comment">--- 컬럼 유형 변경</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> ex2_10 MODIFY Col2 VARCHAR2(<span class="number">30</span>);</span><br><span class="line"><span class="keyword">DESC</span> ex2_10;</span><br><span class="line"><span class="comment">--- 신규 컬럼 추가</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> ex2_10 <span class="keyword">ADD</span> col3 NUMBER;</span><br><span class="line"><span class="keyword">DESC</span> ex2_10;</span><br><span class="line"><span class="comment">--- 컬럼 삭제</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> ex2_10 <span class="keyword">DROP</span> <span class="keyword">COLUMN</span> Col3;</span><br><span class="line"><span class="keyword">DESC</span> ex2_10;</span><br><span class="line"><span class="comment">--- 제약조건 추가</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> ex2_10 <span class="keyword">ADD</span> <span class="keyword">CONSTRAINT</span>S pk_ex2_10 <span class="keyword">PRIMARY</span> KEY(col11);</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> constraint_name</span><br><span class="line">, constraint_type</span><br><span class="line">, table_name</span><br><span class="line">, search_condition</span><br><span class="line"><span class="keyword">FROM</span> user_constraints</span><br><span class="line"><span class="keyword">WHERE</span> table_name <span class="operator">=</span> <span class="string">&#x27;EX2_10&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">--- 제약조건 삭제 : col11에서 기본키 삭제</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> ex2_10 <span class="keyword">DROP</span> CONSTRAINTS pk_ex2_10;</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> constraint_name</span><br><span class="line">, constraint_type</span><br><span class="line">, table_name</span><br><span class="line">, search_condition</span><br><span class="line"><span class="keyword">FROM</span> user_constraints</span><br><span class="line"><span class="keyword">WHERE</span> table_name <span class="operator">=</span> <span class="string">&#x27;EX2_10&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 테이블 복사</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> ex2_9_1 <span class="keyword">AS</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> ex2_9;</span><br><span class="line"><span class="keyword">DESC</span> ex2_9_1;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 뷰 생성</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">OR</span> REPLACE <span class="keyword">VIEW</span> emp_dept_v1 <span class="keyword">AS</span></span><br><span class="line"><span class="keyword">SELECT</span> a.employee_id</span><br><span class="line">, a.emp_name</span><br><span class="line">, a.department_id</span><br><span class="line">, b.department_name</span><br><span class="line"><span class="keyword">FROM</span> employees a</span><br><span class="line">, departments b</span><br><span class="line"><span class="keyword">WHERE</span> a.department_id <span class="operator">=</span> b.department_id;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 뷰 삭제</span></span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">VIEW</span> emp_dept_v1;</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="entry-meta entry-footer">
      
      
      
    </footer>
    <hr class="entry-footer-hr">
  </div>
  
</article>

<!-- Table of Contents -->

  
    <article id="post-bike-sharing-training"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/2022/07/08/bike-sharing-training/">Bike Sharing Demand Training</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	<a href="/2022/07/08/bike-sharing-training/" class="article-date">
	  <time datetime="2022-07-08T00:22:22.000Z" itemprop="datePublished">July 8, 2022</time>
	</a>

       
      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="양식을-강사님께서-주실-예정"><a href="#양식을-강사님께서-주실-예정" class="headerlink" title="양식을 강사님께서 주실 예정"></a>양식을 강사님께서 주실 예정</h1><ul>
<li>날짜</li>
<li>수강생 이름</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># This Python 3 environment comes with many helpful analytics libraries installed</span></span><br><span class="line"><span class="comment"># It is defined by the kaggle/python Docker image: https://github.com/kaggle/docker-python</span></span><br><span class="line"><span class="comment"># For example, here&#x27;s several helpful packages to load</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np <span class="comment"># linear algebra</span></span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd <span class="comment"># data processing, CSV file I/O (e.g. pd.read_csv)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Input data files are available in the read-only &quot;../input/&quot; directory</span></span><br><span class="line"><span class="comment"># For example, running this (by clicking run or pressing Shift+Enter) will list all files under the input directory</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">for</span> dirname, _, filenames <span class="keyword">in</span> os.walk(<span class="string">&#x27;/kaggle/input&#x27;</span>):</span><br><span class="line">    <span class="keyword">for</span> filename <span class="keyword">in</span> filenames:</span><br><span class="line">        <span class="built_in">print</span>(os.path.join(dirname, filename))</span><br><span class="line"></span><br><span class="line"><span class="comment"># You can write up to 20GB to the current directory (/kaggle/working/) that gets preserved as output when you create a version using &quot;Save &amp; Run All&quot; </span></span><br><span class="line"><span class="comment"># You can also write temporary files to /kaggle/temp/, but they won&#x27;t be saved outside of the current session</span></span><br></pre></td></tr></table></figure>

<h1 id="chapter-01-필수-라이브러리-불러오기"><a href="#chapter-01-필수-라이브러리-불러오기" class="headerlink" title="chapter 01. 필수 라이브러리 불러오기"></a>chapter 01. 필수 라이브러리 불러오기</h1><h2 id="※-필수-라이브러리를-불러오는-작업"><a href="#※-필수-라이브러리를-불러오는-작업" class="headerlink" title="※ 필수 라이브러리를 불러오는 작업"></a>※ 필수 라이브러리를 불러오는 작업</h2><ul>
<li>데이터 가공을 위한 Pandas</li>
<li>수치 연산을 위한 Numpy</li>
<li>시각화를 위한<br>  matplotlib<br>  seaborn</li>
<li>머신러닝 기본 라이브러리인 sklearn<ul>
<li>이후 머신러닝 모델 라이브러리는 그때마다 입력</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd   <span class="comment"># 데이터 가공</span></span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np    <span class="comment"># 수치 연산</span></span><br><span class="line"><span class="keyword">import</span> matplotlib <span class="keyword">as</span> mpl           <span class="comment"># 시각화</span></span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt    <span class="comment"># 시각화</span></span><br><span class="line"><span class="keyword">import</span> seaborn <span class="keyword">as</span> sns              <span class="comment"># 시각화</span></span><br><span class="line"><span class="keyword">import</span> sklearn   <span class="comment"># 머신러닝</span></span><br><span class="line"><span class="comment"># pyplot은 matplotlib 안에 속한 클래스이므로 따로 버전 확인을 할 필요가 없음</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;pandas version : &quot;</span>, pd.__version__)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;numpy version : &quot;</span>, np.__version__)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;matplotlib version : &quot;</span>, mpl.__version__)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;seaborn version : &quot;</span>, sns.__version__)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;sklearn version : &quot;</span>, sklearn.__version__)</span><br></pre></td></tr></table></figure>

<h1 id="Chapter-02-데이터-불러오기"><a href="#Chapter-02-데이터-불러오기" class="headerlink" title="Chapter 02. 데이터 불러오기"></a>Chapter 02. 데이터 불러오기</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">DATA_PATH = <span class="string">&#x27;/kaggle/input/bike-sharing-demand/&#x27;</span></span><br><span class="line">train = pd.read_csv(DATA_PATH + <span class="string">&#x27;train.csv&#x27;</span>)   <span class="comment"># 훈련 데이터</span></span><br><span class="line">test = pd.read_csv(DATA_PATH + <span class="string">&#x27;test.csv&#x27;</span>)     <span class="comment"># 테스트 데이터</span></span><br><span class="line">submission = pd.read_csv(DATA_PATH + <span class="string">&#x27;sampleSubmission.csv&#x27;</span>)</span><br><span class="line"></span><br><span class="line">train.shape, test.shape, submission.shape</span><br></pre></td></tr></table></figure>

<h2 id="데이터-확인"><a href="#데이터-확인" class="headerlink" title="데이터 확인"></a>데이터 확인</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(train.head(<span class="number">10</span>))</span><br><span class="line">train.info()</span><br></pre></td></tr></table></figure>


<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(test.head(<span class="number">10</span>))</span><br><span class="line">test.info()</span><br></pre></td></tr></table></figure>

<h2 id="결측치"><a href="#결측치" class="headerlink" title="결측치"></a>결측치</h2><ul>
<li>현재 판단으로는 결측치가 없어 보임</li>
</ul>
<h1 id="Chapter-03-탐색적-자료-분석"><a href="#Chapter-03-탐색적-자료-분석" class="headerlink" title="Chapter 03. 탐색적 자료 분석"></a>Chapter 03. 탐색적 자료 분석</h1><ul>
<li>시각화</li>
<li>날짜 기반 데이터</li>
<li>train 데이터를 다이렉트로 변화를 주면 전처리 시 헷갈림</li>
<li>복제본 뜨기 (탐색적 자료 분석)</li>
<li>데이터 셋이 매우 작다면<ul>
<li>전체를 다 써도 큰 상관 없음</li>
<li>But, 데이터 셋이 크다면 전체 데이터에서 일부 샘플링</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 원본이 망가질 우려가 있어 복제본을 뜬다</span></span><br><span class="line">temp_train = train.copy()</span><br><span class="line">temp_train.info()</span><br></pre></td></tr></table></figure>

<ul>
<li>시각화를 위한 날짜 데이터 처리</li>
<li>연도, 월, 일, 시간, 분, 초</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">temp_train[<span class="string">&#x27;datetime&#x27;</span>][:<span class="number">10</span>]</span><br></pre></td></tr></table></figure>


<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(temp_train[<span class="string">&#x27;datetime&#x27;</span>][<span class="number">0</span>].split()[<span class="number">1</span>])</span><br><span class="line"><span class="built_in">print</span>(temp_train[<span class="string">&#x27;datetime&#x27;</span>][<span class="number">0</span>].split()[<span class="number">1</span>].split(<span class="string">&#x27;:&#x27;</span>)[<span class="number">0</span>])</span><br></pre></td></tr></table></figure>


<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">year = temp_train[<span class="string">&#x27;datetime&#x27;</span>][<span class="number">100</span>].split()[<span class="number">0</span>].split(<span class="string">&#x27;-&#x27;</span>)[<span class="number">0</span>]</span><br><span class="line">month = temp_train[<span class="string">&#x27;datetime&#x27;</span>][<span class="number">100</span>].split()[<span class="number">0</span>].split(<span class="string">&#x27;-&#x27;</span>)[<span class="number">1</span>]</span><br><span class="line">day = temp_train[<span class="string">&#x27;datetime&#x27;</span>][<span class="number">100</span>].split()[<span class="number">0</span>].split(<span class="string">&#x27;-&#x27;</span>)[<span class="number">2</span>]</span><br><span class="line">hour = temp_train[<span class="string">&#x27;datetime&#x27;</span>][<span class="number">100</span>].split()[<span class="number">1</span>].split(<span class="string">&#x27;:&#x27;</span>)[<span class="number">0</span>]</span><br><span class="line">minutes = temp_train[<span class="string">&#x27;datetime&#x27;</span>][<span class="number">100</span>].split()[<span class="number">1</span>].split(<span class="string">&#x27;:&#x27;</span>)[<span class="number">1</span>]</span><br><span class="line">seconds = temp_train[<span class="string">&#x27;datetime&#x27;</span>][<span class="number">100</span>].split()[<span class="number">1</span>].split(<span class="string">&#x27;:&#x27;</span>)[<span class="number">2</span>]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">year, month, day, hour, minutes, seconds</span><br></pre></td></tr></table></figure>


<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">temp_train[<span class="string">&#x27;date&#x27;</span>] = temp_train[<span class="string">&#x27;datetime&#x27;</span>].apply(<span class="keyword">lambda</span> x : x.split()[<span class="number">0</span>])</span><br><span class="line"><span class="comment"># apply 메서드 : 반복문 코드를 안 써도 반복문 효과를 주는 메서드</span></span><br><span class="line">temp_train[<span class="string">&#x27;date&#x27;</span>]</span><br></pre></td></tr></table></figure>

<ul>
<li>시간 데이터 전처리 방법론 (1)</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">import</span> datetime</span><br><span class="line"></span><br><span class="line"><span class="comment"># 시간 테스트</span></span><br><span class="line">start_time = time.time()</span><br><span class="line"></span><br><span class="line">temp_train[<span class="string">&#x27;year&#x27;</span>] = temp_train[<span class="string">&#x27;datetime&#x27;</span>].apply(<span class="keyword">lambda</span> x : x.split()[<span class="number">0</span>].split(<span class="string">&#x27;-&#x27;</span>)[<span class="number">0</span>])</span><br><span class="line">temp_train[<span class="string">&#x27;month&#x27;</span>] = temp_train[<span class="string">&#x27;datetime&#x27;</span>].apply(<span class="keyword">lambda</span> x : x.split()[<span class="number">0</span>].split(<span class="string">&#x27;-&#x27;</span>)[<span class="number">1</span>])</span><br><span class="line">temp_train[<span class="string">&#x27;day&#x27;</span>] = temp_train[<span class="string">&#x27;datetime&#x27;</span>].apply(<span class="keyword">lambda</span> x : x.split()[<span class="number">0</span>].split(<span class="string">&#x27;-&#x27;</span>)[<span class="number">2</span>])</span><br><span class="line">temp_train[<span class="string">&#x27;hour&#x27;</span>] = temp_train[<span class="string">&#x27;datetime&#x27;</span>].apply(<span class="keyword">lambda</span> x : x.split()[<span class="number">1</span>].split(<span class="string">&#x27;:&#x27;</span>)[<span class="number">0</span>])</span><br><span class="line">temp_train[<span class="string">&#x27;minutes&#x27;</span>] = temp_train[<span class="string">&#x27;datetime&#x27;</span>].apply(<span class="keyword">lambda</span> x : x.split()[<span class="number">1</span>].split(<span class="string">&#x27;:&#x27;</span>)[<span class="number">1</span>])</span><br><span class="line">temp_train[<span class="string">&#x27;seconds&#x27;</span>] = temp_train[<span class="string">&#x27;datetime&#x27;</span>].apply(<span class="keyword">lambda</span> x : x.split()[<span class="number">1</span>].split(<span class="string">&#x27;:&#x27;</span>)[<span class="number">2</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment"># temp_train[[&#x27;year&#x27;, &#x27;month&#x27;, &#x27;day&#x27;]]</span></span><br><span class="line"><span class="comment"># temp_train[[&#x27;hour&#x27;, &#x27;minutes&#x27;, &#x27;seconds&#x27;]]</span></span><br><span class="line"></span><br><span class="line">end_time = time.time()</span><br><span class="line">lambda_ctime = end_time - start_time</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;실행시간(second) : &quot;</span>, np.<span class="built_in">round</span>(lambda_ctime, <span class="number">3</span>))</span><br><span class="line">temp_train[[<span class="string">&#x27;datetime&#x27;</span>, <span class="string">&#x27;year&#x27;</span>, <span class="string">&#x27;month&#x27;</span>, <span class="string">&#x27;day&#x27;</span>, <span class="string">&#x27;hour&#x27;</span>, <span class="string">&#x27;minutes&#x27;</span>, <span class="string">&#x27;seconds&#x27;</span>]]</span><br></pre></td></tr></table></figure>

<ul>
<li>시간 데이터 전처리 방법론 (2)</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">temp_train[<span class="string">&#x27;date&#x27;</span>] = pd.to_datetime(temp_train[<span class="string">&#x27;datetime&#x27;</span>])</span><br><span class="line">temp_train[<span class="string">&#x27;year&#x27;</span>] = temp_train[<span class="string">&#x27;date&#x27;</span>].dt.year</span><br><span class="line">temp_train[<span class="string">&#x27;year&#x27;</span>]</span><br></pre></td></tr></table></figure>


<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">import</span> datetime</span><br><span class="line"></span><br><span class="line"><span class="comment"># 시간 테스트</span></span><br><span class="line">start_time = time.time()</span><br><span class="line"></span><br><span class="line">temp_train[<span class="string">&#x27;date&#x27;</span>] = pd.to_datetime(temp_train[<span class="string">&#x27;datetime&#x27;</span>])</span><br><span class="line">temp_train[<span class="string">&#x27;year&#x27;</span>] = temp_train[<span class="string">&#x27;date&#x27;</span>].dt.year</span><br><span class="line">temp_train[<span class="string">&#x27;month&#x27;</span>] = temp_train[<span class="string">&#x27;date&#x27;</span>].dt.month</span><br><span class="line">temp_train[<span class="string">&#x27;day&#x27;</span>] = temp_train[<span class="string">&#x27;date&#x27;</span>].dt.day</span><br><span class="line">temp_train[<span class="string">&#x27;hour&#x27;</span>] = temp_train[<span class="string">&#x27;date&#x27;</span>].dt.hour</span><br><span class="line"><span class="comment"># temp_train[[&#x27;year&#x27;, &#x27;month&#x27;, &#x27;day&#x27;]]</span></span><br><span class="line"><span class="comment"># temp_train[[&#x27;hour&#x27;, &#x27;minutes&#x27;, &#x27;seconds&#x27;]]</span></span><br><span class="line"></span><br><span class="line">end_time = time.time()</span><br><span class="line">lambda_ctime = end_time - start_time</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;실행시간(second) : &quot;</span>, np.<span class="built_in">round</span>(lambda_ctime, <span class="number">3</span>))</span><br><span class="line">temp_train[[<span class="string">&#x27;datetime&#x27;</span>, <span class="string">&#x27;year&#x27;</span>, <span class="string">&#x27;month&#x27;</span>, <span class="string">&#x27;day&#x27;</span>, <span class="string">&#x27;hour&#x27;</span>]]</span><br></pre></td></tr></table></figure>

<ul>
<li>요일 추출하기</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">temp_train[<span class="string">&#x27;date&#x27;</span>]</span><br></pre></td></tr></table></figure>


<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">temp_train[<span class="string">&#x27;weekday&#x27;</span>] = temp_train[<span class="string">&#x27;date&#x27;</span>].dt.day_name()</span><br><span class="line">temp_train[<span class="string">&#x27;weekday&#x27;</span>]</span><br></pre></td></tr></table></figure>

<ul>
<li>계절 문자로 변환</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">temp_train[<span class="string">&#x27;season&#x27;</span>] = temp_train[<span class="string">&#x27;season&#x27;</span>].<span class="built_in">map</span>(&#123;</span><br><span class="line">    <span class="number">1</span> : <span class="string">&#x27;Spring&#x27;</span>,</span><br><span class="line">    <span class="number">2</span> : <span class="string">&#x27;Summer&#x27;</span>,</span><br><span class="line">    <span class="number">3</span> : <span class="string">&#x27;Fall&#x27;</span>,</span><br><span class="line">    <span class="number">4</span> : <span class="string">&#x27;Winter&#x27;</span>    </span><br><span class="line">&#125;)</span><br><span class="line">temp_train[<span class="string">&#x27;season&#x27;</span>]</span><br></pre></td></tr></table></figure>


<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">temp_train[<span class="string">&#x27;weather&#x27;</span>] = temp_train[<span class="string">&#x27;weather&#x27;</span>].<span class="built_in">map</span>(&#123;</span><br><span class="line">    <span class="number">1</span> : <span class="string">&#x27;Clear&#x27;</span>,</span><br><span class="line">    <span class="number">2</span> : <span class="string">&#x27;Few clouds&#x27;</span>,</span><br><span class="line">    <span class="number">3</span> : <span class="string">&#x27;Light snow, Rain&#x27;</span>,</span><br><span class="line">    <span class="number">4</span> : <span class="string">&#x27;Heavy snow, Rain&#x27;</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">temp_train[<span class="string">&#x27;weather&#x27;</span>]</span><br><span class="line"></span><br><span class="line">temp_train.info()</span><br></pre></td></tr></table></figure>


<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">temp_train.head()</span><br></pre></td></tr></table></figure>

<h1 id="Chapter-04-데이터-시각화"><a href="#Chapter-04-데이터-시각화" class="headerlink" title="Chapter 04. 데이터 시각화"></a>Chapter 04. 데이터 시각화</h1><ul>
<li>수치를 예측하는 대회</li>
<li>종속변수를 시각화해야 함</li>
<li>분포 확인 후, 로그변환을 줄지 말지를 결정해야 함</li>
<li>시각화를 하는 이유 : 어떤 컬럼을 삭제할 지 고민하기 위해서</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">fix, ax = plt.subplots(nrows = <span class="number">1</span>, ncols = <span class="number">2</span>, figsize = (<span class="number">10</span>, <span class="number">8</span>))</span><br><span class="line"></span><br><span class="line">sns.histplot(train[<span class="string">&#x27;count&#x27;</span>], ax = ax[<span class="number">0</span>])   <span class="comment"># ax[0] = 그래프 도화지의 인덱스 위치</span></span><br><span class="line">sns.histplot(np.log1p(train[<span class="string">&#x27;count&#x27;</span>]), ax = ax[<span class="number">1</span>])   <span class="comment"># 로그변환 --&gt; np.log1p(컬럼명)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 제목 옵션</span></span><br><span class="line">ax[<span class="number">0</span>].set_title(<span class="string">&#x27;Normal Graph&#x27;</span>)</span><br><span class="line">ax[<span class="number">1</span>].set_title(<span class="string">&#x27;Log Transformed Graph&#x27;</span>)</span><br><span class="line"></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>

<ul>
<li>막대 그래프<ul>
<li>year, count</li>
<li>month, count</li>
<li>day, count</li>
<li>hour, count</li>
</ul>
</li>
<li>각 그래프의 타이틀 추가</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">fig, ax = plt.subplots(nrows = <span class="number">2</span>, ncols = <span class="number">2</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">## 1단계 : 전체 그래프 기본 설정</span></span><br><span class="line"><span class="comment"># 그래프 사이 간격 띄우기</span></span><br><span class="line">fig.tight_layout()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 전체 그래프 사이즈 관리</span></span><br><span class="line">fig.set_size_inches(<span class="number">15</span>, <span class="number">12</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2단계 : 각 개별 그래프 입력</span></span><br><span class="line">sns.barplot(x = <span class="string">&#x27;year&#x27;</span>, y = <span class="string">&#x27;count&#x27;</span>, hue = <span class="string">&#x27;season&#x27;</span>, data = temp_train, ax = ax[<span class="number">0</span>, <span class="number">0</span>], capsize=<span class="number">.01</span>)</span><br><span class="line">sns.barplot(x = <span class="string">&#x27;month&#x27;</span>, y = <span class="string">&#x27;count&#x27;</span>, data = temp_train, ax = ax[<span class="number">0</span>, <span class="number">1</span>], capsize=<span class="number">.01</span>)</span><br><span class="line">sns.barplot(x = <span class="string">&#x27;day&#x27;</span>, y = <span class="string">&#x27;count&#x27;</span>, data = temp_train, ax = ax[<span class="number">1</span>, <span class="number">0</span>], capsize=<span class="number">.01</span>)</span><br><span class="line">sns.barplot(x = <span class="string">&#x27;hour&#x27;</span>, y = <span class="string">&#x27;count&#x27;</span>, data = temp_train, ax = ax[<span class="number">1</span>, <span class="number">1</span>], capsize=<span class="number">.01</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 3단계 : 디테일 옵션</span></span><br><span class="line">ax[<span class="number">0</span>, <span class="number">0</span>].set_title(<span class="string">&#x27;Rental amounts by Year&#x27;</span>)</span><br><span class="line">ax[<span class="number">0</span>, <span class="number">1</span>].set_title(<span class="string">&#x27;Rental amounts by Month&#x27;</span>)</span><br><span class="line">ax[<span class="number">1</span>, <span class="number">0</span>].set_title(<span class="string">&#x27;Rental amounts by Day&#x27;</span>)</span><br><span class="line">ax[<span class="number">1</span>, <span class="number">1</span>].set_title(<span class="string">&#x27;Rental amounts by Hour&#x27;</span>)</span><br><span class="line"></span><br><span class="line">ax[<span class="number">0</span>, <span class="number">0</span>].tick_params(axis = <span class="string">&#x27;x&#x27;</span>, labelrotation = <span class="number">90</span>)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>

<ul>
<li>boxplot<ul>
<li>season, count</li>
<li>weather, count</li>
<li>holiday, count</li>
<li>workingholiday, count</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">fig, ax = plt.subplots(nrows = <span class="number">2</span>, ncols = <span class="number">2</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">## 1단계 : 전체 그래프 기본 설정</span></span><br><span class="line"><span class="comment"># 그래프 사이 간격 띄우기</span></span><br><span class="line">fig.tight_layout()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 전체 그래프 사이즈 관리</span></span><br><span class="line">fig.set_size_inches(<span class="number">15</span>, <span class="number">18</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2단계 : 각 개별 그래프 입력</span></span><br><span class="line">sns.boxplot(x = <span class="string">&#x27;season&#x27;</span>, y = <span class="string">&#x27;count&#x27;</span>, data = temp_train, ax = ax[<span class="number">0</span>, <span class="number">0</span>])</span><br><span class="line">sns.boxplot(x = <span class="string">&#x27;weather&#x27;</span>, y = <span class="string">&#x27;count&#x27;</span>, data = temp_train, ax = ax[<span class="number">0</span>, <span class="number">1</span>])</span><br><span class="line">sns.boxplot(x = <span class="string">&#x27;holiday&#x27;</span>, y = <span class="string">&#x27;count&#x27;</span>, data = temp_train, ax = ax[<span class="number">1</span>, <span class="number">0</span>])</span><br><span class="line">sns.boxplot(x = <span class="string">&#x27;workingday&#x27;</span>, y = <span class="string">&#x27;count&#x27;</span>, data = temp_train, ax = ax[<span class="number">1</span>, <span class="number">1</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment"># 3단계 : 디테일 옵션</span></span><br><span class="line">ax[<span class="number">0</span>, <span class="number">0</span>].set_title(<span class="string">&#x27;Rental amounts by Season&#x27;</span>)</span><br><span class="line">ax[<span class="number">0</span>, <span class="number">1</span>].set_title(<span class="string">&#x27;Rental amounts by Weather&#x27;</span>)</span><br><span class="line">ax[<span class="number">1</span>, <span class="number">0</span>].set_title(<span class="string">&#x27;Rental amounts by Holiday&#x27;</span>)</span><br><span class="line">ax[<span class="number">1</span>, <span class="number">1</span>].set_title(<span class="string">&#x27;Rental amounts by Workingday&#x27;</span>)</span><br><span class="line"></span><br><span class="line">ax[<span class="number">0</span>, <span class="number">0</span>].tick_params(axis = <span class="string">&#x27;x&#x27;</span>, labelrotation = <span class="number">90</span>)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>

<ul>
<li>포인트플롯</li>
<li>5개의 행 그래프 작성<ul>
<li>workingday, holiday, weekday, season, weather</li>
</ul>
</li>
<li>5개의 그래프를 한 이미지로 그리기</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sns.pointplot(x = <span class="string">&#x27;hour&#x27;</span>, y = <span class="string">&#x27;count&#x27;</span>, hue = <span class="string">&#x27;season&#x27;</span>, data = temp_train)</span><br></pre></td></tr></table></figure>


<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">fig, ax = plt.subplots(nrows = <span class="number">5</span>)</span><br><span class="line"></span><br><span class="line">fig.tight_layout()</span><br><span class="line"></span><br><span class="line">fig.set_size_inches(<span class="number">12</span>, <span class="number">18</span>)</span><br><span class="line"></span><br><span class="line">sns.pointplot(x = <span class="string">&#x27;hour&#x27;</span>, y = <span class="string">&#x27;count&#x27;</span>, hue = <span class="string">&#x27;workingday&#x27;</span>, data = temp_train, ax = ax[<span class="number">0</span>])</span><br><span class="line">sns.pointplot(x = <span class="string">&#x27;hour&#x27;</span>, y = <span class="string">&#x27;count&#x27;</span>, hue = <span class="string">&#x27;holiday&#x27;</span>, data = temp_train, ax = ax[<span class="number">1</span>])</span><br><span class="line">sns.pointplot(x = <span class="string">&#x27;hour&#x27;</span>, y = <span class="string">&#x27;count&#x27;</span>, hue = <span class="string">&#x27;weekday&#x27;</span>,  data = temp_train, ax = ax[<span class="number">2</span>])</span><br><span class="line">sns.pointplot(x = <span class="string">&#x27;hour&#x27;</span>, y = <span class="string">&#x27;count&#x27;</span>, hue = <span class="string">&#x27;season&#x27;</span>,  data = temp_train, ax = ax[<span class="number">3</span>])</span><br><span class="line">sns.pointplot(x = <span class="string">&#x27;hour&#x27;</span>, y = <span class="string">&#x27;count&#x27;</span>, hue = <span class="string">&#x27;weather&#x27;</span>,  data = temp_train, ax = ax[<span class="number">4</span>])</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>

<ul>
<li>회귀선을 포함한 산점도 그래프</li>
<li>총 4개의 그래프가 나와야 함</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># (scatter_kws = &#123;&#x27;alpha : 0.2&#x27;&#125;, line_kws = &#123;&#x27;color&#x27; : &#x27;blue&#x27;&#125;)</span></span><br></pre></td></tr></table></figure>


<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">temp_train.head()</span><br></pre></td></tr></table></figure>


<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">fig, ax = plt.subplots(nrows = <span class="number">2</span>, ncols = <span class="number">2</span>)</span><br><span class="line"></span><br><span class="line">fig.tight_layout()</span><br><span class="line"></span><br><span class="line">fig.set_size_inches(<span class="number">12</span>, <span class="number">18</span>)</span><br><span class="line"></span><br><span class="line">sns.regplot(x =<span class="string">&#x27;temp&#x27;</span>, y =<span class="string">&#x27;count&#x27;</span>, data = temp_train, scatter_kws = &#123;<span class="string">&#x27;alpha&#x27;</span> : <span class="number">0.2</span>&#125;, line_kws = &#123;<span class="string">&#x27;color&#x27;</span> : <span class="string">&#x27;blue&#x27;</span>&#125;, ax = ax[<span class="number">0</span>, <span class="number">0</span>])</span><br><span class="line">sns.regplot(x =<span class="string">&#x27;atemp&#x27;</span>, y =<span class="string">&#x27;count&#x27;</span>, data = temp_train, scatter_kws = &#123;<span class="string">&#x27;alpha&#x27;</span> : <span class="number">0.2</span>&#125;, line_kws = &#123;<span class="string">&#x27;color&#x27;</span> : <span class="string">&#x27;blue&#x27;</span>&#125;, ax = ax[<span class="number">0</span>, <span class="number">1</span>])</span><br><span class="line">sns.regplot(x =<span class="string">&#x27;humidity&#x27;</span>, y =<span class="string">&#x27;count&#x27;</span>, data = temp_train, scatter_kws = &#123;<span class="string">&#x27;alpha&#x27;</span> : <span class="number">0.2</span>&#125;, line_kws = &#123;<span class="string">&#x27;color&#x27;</span> : <span class="string">&#x27;blue&#x27;</span>&#125;, ax = ax[<span class="number">1</span>, <span class="number">0</span>])</span><br><span class="line">sns.regplot(x =<span class="string">&#x27;windspeed&#x27;</span>, y =<span class="string">&#x27;count&#x27;</span>, data = temp_train, scatter_kws = &#123;<span class="string">&#x27;alpha&#x27;</span> : <span class="number">0.2</span>&#125;, line_kws = &#123;<span class="string">&#x27;color&#x27;</span> : <span class="string">&#x27;blue&#x27;</span>&#125;, ax = ax[<span class="number">1</span>, <span class="number">1</span>])</span><br><span class="line"></span><br><span class="line">ax[<span class="number">0</span>, <span class="number">0</span>].set_title(<span class="string">&#x27;Rental amounts by Temp&#x27;</span>)</span><br><span class="line">ax[<span class="number">0</span>, <span class="number">1</span>].set_title(<span class="string">&#x27;Rental amounts by aTemp&#x27;</span>)</span><br><span class="line">ax[<span class="number">1</span>, <span class="number">0</span>].set_title(<span class="string">&#x27;Rental amounts by Humidity&#x27;</span>)</span><br><span class="line">ax[<span class="number">1</span>, <span class="number">1</span>].set_title(<span class="string">&#x27;Rental amounts by Windspeed&#x27;</span>)</span><br><span class="line"></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>


<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">temp_train[<span class="string">&#x27;windspeed&#x27;</span>].value_counts()</span><br></pre></td></tr></table></figure>

<ul>
<li>히트맵 그래프 그리기</li>
<li>상관계수 해석<ul>
<li>수치가 양수다 (양의 관계)</li>
<li>수치가 음수다 (음의 관계)</li>
<li>0 ~ +-0.2 : 두 변수 사이의 상관관계는 없다.</li>
<li>+-0.2 ~ +-1 : 값이 커지면 커질수록 두 변수 간 상관관계는 크다.</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">corrMat = temp_train[[<span class="string">&#x27;temp&#x27;</span>, <span class="string">&#x27;atemp&#x27;</span>, <span class="string">&#x27;humidity&#x27;</span>, <span class="string">&#x27;windspeed&#x27;</span>, <span class="string">&#x27;count&#x27;</span>]].corr()</span><br><span class="line">corrMat</span><br></pre></td></tr></table></figure>


<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sns.heatmap(corrMat, annot = <span class="literal">True</span>)</span><br><span class="line"><span class="comment"># Count와 컬럼들의 상관관계 비</span></span><br></pre></td></tr></table></figure>

<h2 id="데이터-전처리"><a href="#데이터-전처리" class="headerlink" title="데이터 전처리"></a>데이터 전처리</h2><ul>
<li><p>첫번째 : train 데이터의 casual, registered 컬럼 제거할 것</p>
</li>
<li><p>두번째 : 날짜 데이터 처리, dt.month &lt;– 이렇게 할 것</p>
</li>
<li><p>세번째 : season 컬럼 처리 필요 (숫자를 문자로 변환)</p>
<ul>
<li>인코딩 변환(라벨 인코딩, 원핫 인코딩)</li>
</ul>
</li>
<li><p>네번째 : weather 컬럼 처리 필요 (숫자를 문자로 변환)</p>
<ul>
<li>인코딩 변환(라벨 인코딩, 원핫 인코딩)</li>
</ul>
</li>
<li><p>다섯번째 : month, day 컬럼 삭제 예정</p>
</li>
<li><p>여섯번째 : weather가 4인 데이터 삭제 (이상치)</p>
</li>
<li><p>일곱번째 : windspeed 컬럼 삭제 (놔둬도 상관없음)</p>
</li>
<li><p>여덟번째 : temp, atemp 중 하나 삭제 (옵션)</p>
</li>
<li><p>마지막 : 모든 문자를 숫자로 인코딩 (원핫 인코딩)</p>
</li>
<li><p>3시 10분까지</p>
</li>
<li><p>위 내용 처리 완료</p>
</li>
</ul>
<h3 id="첫번째-train-데이터의-casual-registered-컬럼-제거"><a href="#첫번째-train-데이터의-casual-registered-컬럼-제거" class="headerlink" title="첫번째 : train 데이터의 casual, registered 컬럼 제거"></a>첫번째 : train 데이터의 casual, registered 컬럼 제거</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">train.shape</span><br></pre></td></tr></table></figure>


<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">train = train.drop([<span class="string">&#x27;casual&#x27;</span>, <span class="string">&#x27;registered&#x27;</span>], axis = <span class="number">1</span>)</span><br><span class="line">train.shape</span><br></pre></td></tr></table></figure>

<h2 id="weather-컬럼-삭제"><a href="#weather-컬럼-삭제" class="headerlink" title="weather 컬럼 삭제"></a>weather 컬럼 삭제</h2><ul>
<li>4인 데이터는 삭제</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">train = train[train[<span class="string">&#x27;weather&#x27;</span>] != <span class="number">4</span>].reset_index(drop=<span class="literal">True</span>)</span><br><span class="line">train.shape</span><br></pre></td></tr></table></figure>


<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">train.info()</span><br></pre></td></tr></table></figure>

<ul>
<li>데이터 합치기</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">all_data = pd.concat([train, test]).reset_index(drop = <span class="literal">True</span>)</span><br><span class="line">all_data.info()</span><br></pre></td></tr></table></figure>

<h3 id="두번째-날짜-데이터-처리-dt-year-형태로"><a href="#두번째-날짜-데이터-처리-dt-year-형태로" class="headerlink" title="두번째 : 날짜 데이터 처리, dt.year 형태로!"></a>두번째 : 날짜 데이터 처리, dt.year 형태로!</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">all_data[<span class="string">&#x27;date&#x27;</span>] = pd.to_datetime(all_data[<span class="string">&#x27;datetime&#x27;</span>])</span><br><span class="line">all_data[<span class="string">&#x27;year&#x27;</span>] = all_data[<span class="string">&#x27;date&#x27;</span>].dt.year</span><br><span class="line">all_data[<span class="string">&#x27;hour&#x27;</span>] = all_data[<span class="string">&#x27;date&#x27;</span>].dt.hour</span><br><span class="line">all_data[<span class="string">&#x27;weekday&#x27;</span>] = all_data[<span class="string">&#x27;date&#x27;</span>].dt.day_name()</span><br><span class="line"></span><br><span class="line">all_data.shape</span><br><span class="line">all_data.info()   <span class="comment"># date 컬럼의 dtype이 datetime64로 변경됐는지 확인</span></span><br><span class="line"><span class="comment"># all_data[&#x27;year&#x27;], all_data[&#x27;hour&#x27;], all_data[&#x27;weekday&#x27;]</span></span><br></pre></td></tr></table></figure>

<h3 id="세번째-season-컬럼-처리-숫자를-문자로-변환-라벨-인코딩-or-원핫-인코딩"><a href="#세번째-season-컬럼-처리-숫자를-문자로-변환-라벨-인코딩-or-원핫-인코딩" class="headerlink" title="세번째 : season 컬럼 처리 (숫자를 문자로 변환, 라벨 인코딩 or 원핫 인코딩)"></a>세번째 : season 컬럼 처리 (숫자를 문자로 변환, 라벨 인코딩 or 원핫 인코딩)</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">all_data[<span class="string">&#x27;season&#x27;</span>] = all_data[<span class="string">&#x27;season&#x27;</span>].replace(to_replace = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>],</span><br><span class="line">                                               value = [<span class="string">&#x27;Spring&#x27;</span>, <span class="string">&#x27;Summer&#x27;</span>, <span class="string">&#x27;Fall&#x27;</span>, <span class="string">&#x27;Winter&#x27;</span>])</span><br><span class="line"><span class="built_in">print</span>(all_data[<span class="string">&#x27;season&#x27;</span>])</span><br><span class="line"></span><br><span class="line">all_data.shape</span><br><span class="line">all_data.info()</span><br></pre></td></tr></table></figure>

<h3 id="네번째-weather-컬럼-처리-숫자를-문자로-변환-라벨-인코딩-or-원핫-인코딩"><a href="#네번째-weather-컬럼-처리-숫자를-문자로-변환-라벨-인코딩-or-원핫-인코딩" class="headerlink" title="네번째 : weather 컬럼 처리 (숫자를 문자로 변환, 라벨 인코딩 or 원핫 인코딩"></a>네번째 : weather 컬럼 처리 (숫자를 문자로 변환, 라벨 인코딩 or 원핫 인코딩</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">all_data[<span class="string">&#x27;weather&#x27;</span>] = all_data[<span class="string">&#x27;weather&#x27;</span>].<span class="built_in">map</span>(&#123;</span><br><span class="line">        <span class="number">1</span> : <span class="string">&#x27;Clear&#x27;</span>,</span><br><span class="line">        <span class="number">2</span> : <span class="string">&#x27;Few Cloud&#x27;</span>,</span><br><span class="line">        <span class="number">3</span> : <span class="string">&#x27;Light rain, snow&#x27;</span>,</span><br><span class="line">        <span class="number">4</span> : <span class="string">&#x27;Heavy rain, snow&#x27;</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>


<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">all_data[<span class="string">&#x27;weather&#x27;</span>]</span><br></pre></td></tr></table></figure>

<h3 id="다섯번째-month-day-컬럼-삭제"><a href="#다섯번째-month-day-컬럼-삭제" class="headerlink" title="다섯번째 : month, day 컬럼 삭제"></a>다섯번째 : month, day 컬럼 삭제</h3><ul>
<li>두번째 과정에서 함께 진행했음</li>
</ul>
<h3 id="여섯번째-weather가-4인-데이터-삭제-이상치"><a href="#여섯번째-weather가-4인-데이터-삭제-이상치" class="headerlink" title="여섯번째 : weather가 4인 데이터 삭제 (이상치)"></a>여섯번째 : weather가 4인 데이터 삭제 (이상치)</h3><ul>
<li>all_data가 아니라 train에서 삭제해야 함</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># all_data.drop(all_data.loc[all_data[&#x27;weather&#x27;] == &#x27;Heavy rain, snow&#x27;].index, inplace =True)</span></span><br><span class="line"><span class="comment"># all_data = all_data[all_data[&#x27;weather&#x27;] != &#x27;Heavy rain, snow&#x27;]</span></span><br></pre></td></tr></table></figure>


<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># all_data.shape</span></span><br></pre></td></tr></table></figure>

<h3 id="일곱번째-windspeed-컬럼-삭제-놔둬도-상관없음"><a href="#일곱번째-windspeed-컬럼-삭제-놔둬도-상관없음" class="headerlink" title="일곱번째 : windspeed 컬럼 삭제 (놔둬도 상관없음)"></a>일곱번째 : windspeed 컬럼 삭제 (놔둬도 상관없음)</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">all_data = all_data.drop([<span class="string">&#x27;windspeed&#x27;</span>], axis = <span class="number">1</span>)</span><br><span class="line">all_data.shape</span><br></pre></td></tr></table></figure>

<h3 id="여덟번째-temp-atemp-중-하나-삭제-옵션"><a href="#여덟번째-temp-atemp-중-하나-삭제-옵션" class="headerlink" title="여덟번째 : temp, atemp 중 하나 삭제 (옵션)"></a>여덟번째 : temp, atemp 중 하나 삭제 (옵션)</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">all_data = all_data.drop([<span class="string">&#x27;atemp&#x27;</span>], axis = <span class="number">1</span>)</span><br><span class="line">all_data.shape</span><br></pre></td></tr></table></figure>

<h3 id="아홉번째-datetime과-date-컬럼-제거하기"><a href="#아홉번째-datetime과-date-컬럼-제거하기" class="headerlink" title="아홉번째 : datetime과 date 컬럼 제거하기"></a>아홉번째 : datetime과 date 컬럼 제거하기</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">all_data = all_data.drop([<span class="string">&#x27;datetime&#x27;</span>, <span class="string">&#x27;date&#x27;</span>], axis = <span class="number">1</span>)</span><br><span class="line">all_data.shape</span><br></pre></td></tr></table></figure>

<h3 id="마지막-모든-문자를-숫자로-인코딩-원핫-인코딩"><a href="#마지막-모든-문자를-숫자로-인코딩-원핫-인코딩" class="headerlink" title="마지막 : 모든 문자를 숫자로 인코딩 (원핫 인코딩)"></a>마지막 : 모든 문자를 숫자로 인코딩 (원핫 인코딩)</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">all_data = pd.get_dummies(all_data).reset_index(drop = <span class="literal">True</span>)</span><br><span class="line">all_data.shape</span><br></pre></td></tr></table></figure>


<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">all_data.info()</span><br></pre></td></tr></table></figure>

<h2 id="데이터셋-나누기"><a href="#데이터셋-나누기" class="headerlink" title="데이터셋 나누기"></a>데이터셋 나누기</h2><ul>
<li>훈련데이터와 테스트데이터로 재분리</li>
<li>count : 타킷 데이터(&#x3D;종속 데이터)<ul>
<li>타킷 데이터가 있으면 훈련 데이터</li>
<li>타킷 데이터가 없으면 테스트 데이터</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">train = all_data[~pd.isnull(all_data[<span class="string">&#x27;count&#x27;</span>])]</span><br><span class="line">test = all_data[pd.isnull(all_data[<span class="string">&#x27;count&#x27;</span>])]</span><br></pre></td></tr></table></figure>


<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">train.shape, test.shape</span><br></pre></td></tr></table></figure>

<ul>
<li>count 컬럼 제거</li>
<li>타킷 데이터이기 때문</li>
<li>타깃 데이터만 y로 추출<ul>
<li>train, test count 컬럼 제거</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">y = train[<span class="string">&#x27;count&#x27;</span>] <span class="comment"># 타깃 데이터</span></span><br></pre></td></tr></table></figure>


<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">X = train.drop([<span class="string">&#x27;count&#x27;</span>], axis = <span class="number">1</span>)</span><br><span class="line">test = test.drop([<span class="string">&#x27;count&#x27;</span>], axis = <span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">X.shape, test.shape</span><br></pre></td></tr></table></figure>


<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">X.shape, y.shape, test.shape</span><br></pre></td></tr></table></figure>

<h2 id="모델-훈련"><a href="#모델-훈련" class="headerlink" title="모델 훈련"></a>모델 훈련</h2><ul>
<li>LinearRegression 모형만 학습</li>
</ul>
<h3 id="과제"><a href="#과제" class="headerlink" title="과제"></a>과제</h3><ul>
<li>교차검증</li>
<li>모형추가</li>
<li>하이퍼파라미터 튜닝</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> sklearn.linear_model <span class="keyword">import</span> LinearRegression</span><br><span class="line"><span class="keyword">from</span> sklearn.model_selection <span class="keyword">import</span> train_test_split</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">lr_model = LinearRegression()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 모형 학습 전</span></span><br><span class="line"><span class="comment"># 로그변환을 해준다.</span></span><br><span class="line">log_y = np.log(y)</span><br><span class="line">lr_model.fit(X, log_y)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 모형 예측</span></span><br><span class="line">lr_preds = lr_model.predict(test)</span><br><span class="line">lr_preds[:<span class="number">10</span>]</span><br></pre></td></tr></table></figure>

<h2 id="모형-예측"><a href="#모형-예측" class="headerlink" title="모형 예측"></a>모형 예측</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 지수변환</span></span><br><span class="line">final_preds = np.exp(lr_preds)</span><br><span class="line">final_preds</span><br></pre></td></tr></table></figure>

<h2 id="제출"><a href="#제출" class="headerlink" title="제출"></a>제출</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">submission[<span class="string">&#x27;count&#x27;</span>] = final_preds </span><br><span class="line">submission.to_csv(<span class="string">&#x27;submission.csv&#x27;</span>, index=<span class="literal">False</span>)</span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="entry-meta entry-footer">
      
      
      
    </footer>
    <hr class="entry-footer-hr">
  </div>
  
</article>

<!-- Table of Contents -->

  
    <article id="post-house-prices-lec (1)"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/2022/07/08/house-prices-lec%20(1)/">House Prices Practice</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	<a href="/2022/07/08/house-prices-lec%20(1)/" class="article-date">
	  <time datetime="2022-07-07T23:22:22.000Z" itemprop="datePublished">July 8, 2022</time>
	</a>

       
      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># This Python 3 environment comes with many helpful analytics libraries installed</span></span><br><span class="line"><span class="comment"># It is defined by the kaggle/python Docker image: https://github.com/kaggle/docker-python</span></span><br><span class="line"><span class="comment"># For example, here&#x27;s several helpful packages to load</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np <span class="comment"># linear algebra</span></span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd <span class="comment"># data processing, CSV file I/O (e.g. pd.read_csv)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Input data files are available in the read-only &quot;../input/&quot; directory</span></span><br><span class="line"><span class="comment"># For example, running this (by clicking run or pressing Shift+Enter) will list all files under the input directory</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">for</span> dirname, _, filenames <span class="keyword">in</span> os.walk(<span class="string">&#x27;/kaggle/input&#x27;</span>):</span><br><span class="line">    <span class="keyword">for</span> filename <span class="keyword">in</span> filenames:</span><br><span class="line">        <span class="built_in">print</span>(os.path.join(dirname, filename))</span><br><span class="line"></span><br><span class="line"><span class="comment"># You can write up to 20GB to the current directory (/kaggle/working/) that gets preserved as output when you create a version using &quot;Save &amp; Run All&quot; </span></span><br><span class="line"><span class="comment"># You can also write temporary files to /kaggle/temp/, but they won&#x27;t be saved outside of the current session</span></span><br></pre></td></tr></table></figure>

<pre><code>/kaggle/input/house-prices-advanced-regression-techniques/sample_submission.csv
/kaggle/input/house-prices-advanced-regression-techniques/data_description.txt
/kaggle/input/house-prices-advanced-regression-techniques/train.csv
/kaggle/input/house-prices-advanced-regression-techniques/test.csv
</code></pre>
<h2 id="라이브러리-불러오기"><a href="#라이브러리-불러오기" class="headerlink" title="라이브러리 불러오기"></a>라이브러리 불러오기</h2><ul>
<li>주요 라이브러리 버전을 확인한다.</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd </span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np </span><br><span class="line"><span class="keyword">import</span> matplotlib <span class="keyword">as</span> mpl </span><br><span class="line"><span class="keyword">import</span> seaborn <span class="keyword">as</span> sns </span><br><span class="line"><span class="keyword">import</span> sklearn</span><br><span class="line"><span class="keyword">import</span> xgboost <span class="keyword">as</span> xgb </span><br><span class="line"><span class="keyword">import</span> lightgbm <span class="keyword">as</span> lgb</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;pandas version :&quot;</span>, pd.__version__)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;numpy version :&quot;</span>, np.__version__)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;matplotlib version :&quot;</span>, mpl.__version__)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;seaborn version :&quot;</span>, sns.__version__)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;scikit-learn version :&quot;</span>, sklearn.__version__)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;xgboost version :&quot;</span>, xgb.__version__)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;lightgbm version :&quot;</span>, lgb.__version__)</span><br></pre></td></tr></table></figure>


<style type='text/css'>
.datatable table.frame { margin-bottom: 0; }
.datatable table.frame thead { border-bottom: none; }
.datatable table.frame tr.coltypes td {  color: #FFFFFF;  line-height: 6px;  padding: 0 0.5em;}
.datatable .bool    { background: #DDDD99; }
.datatable .object  { background: #565656; }
.datatable .int     { background: #5D9E5D; }
.datatable .float   { background: #4040CC; }
.datatable .str     { background: #CC4040; }
.datatable .time    { background: #40CC40; }
.datatable .row_index {  background: var(--jp-border-color3);  border-right: 1px solid var(--jp-border-color0);  color: var(--jp-ui-font-color3);  font-size: 9px;}
.datatable .frame tbody td { text-align: left; }
.datatable .frame tr.coltypes .row_index {  background: var(--jp-border-color0);}
.datatable th:nth-child(2) { padding-left: 12px; }
.datatable .hellipsis {  color: var(--jp-cell-editor-border-color);}
.datatable .vellipsis {  background: var(--jp-layout-color0);  color: var(--jp-cell-editor-border-color);}
.datatable .na {  color: var(--jp-cell-editor-border-color);  font-size: 80%;}
.datatable .sp {  opacity: 0.25;}
.datatable .footer { font-size: 9px; }
.datatable .frame_dimensions {  background: var(--jp-border-color3);  border-top: 1px solid var(--jp-border-color0);  color: var(--jp-ui-font-color3);  display: inline-block;  opacity: 0.6;  padding: 1px 10px 1px 5px;}
</style>



<pre><code>pandas version : 1.3.5
numpy version : 1.21.6
matplotlib version : 3.5.2
seaborn version : 0.11.2
scikit-learn version : 1.0.2
xgboost version : 1.6.1
lightgbm version : 3.3.2
</code></pre>
<h2 id="데이터-불러오기"><a href="#데이터-불러오기" class="headerlink" title="데이터 불러오기"></a>데이터 불러오기</h2><ul>
<li>pandas 활용</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">DATA_PATH = <span class="string">&#x27;/kaggle/input/house-prices-advanced-regression-techniques/&#x27;</span></span><br><span class="line">train = pd.read_csv(DATA_PATH + <span class="string">&quot;train.csv&quot;</span>)</span><br><span class="line">test = pd.read_csv(DATA_PATH + <span class="string">&quot;test.csv&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;데이터 불러오기 완료!&quot;</span>)</span><br></pre></td></tr></table></figure>

<pre><code>데이터 불러오기 완료!
</code></pre>
<h2 id="데이터-둘러보기"><a href="#데이터-둘러보기" class="headerlink" title="데이터 둘러보기"></a>데이터 둘러보기</h2><ul>
<li>데이터를 둘러봅니다. </li>
<li>train : 행 갯수 1460 열 갯수 81 (SalePrice 존재)</li>
<li>test : 행 갯수 1459, 열 갯수 80 (SalePrice 컬럼 미 존재)</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">train.shape, test.shape</span><br></pre></td></tr></table></figure>




<pre><code>((1460, 81), (1459, 80))
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">train.info()</span><br></pre></td></tr></table></figure>

<pre><code>&lt;class &#39;pandas.core.frame.DataFrame&#39;&gt;
RangeIndex: 1460 entries, 0 to 1459
Data columns (total 81 columns):
 #   Column         Non-Null Count  Dtype  
---  ------         --------------  -----  
 0   Id             1460 non-null   int64  
 1   MSSubClass     1460 non-null   int64  
 2   MSZoning       1460 non-null   object 
 3   LotFrontage    1201 non-null   float64
 4   LotArea        1460 non-null   int64  
 5   Street         1460 non-null   object 
 6   Alley          91 non-null     object 
 7   LotShape       1460 non-null   object 
 8   LandContour    1460 non-null   object 
 9   Utilities      1460 non-null   object 
 10  LotConfig      1460 non-null   object 
 11  LandSlope      1460 non-null   object 
 12  Neighborhood   1460 non-null   object 
 13  Condition1     1460 non-null   object 
 14  Condition2     1460 non-null   object 
 15  BldgType       1460 non-null   object 
 16  HouseStyle     1460 non-null   object 
 17  OverallQual    1460 non-null   int64  
 18  OverallCond    1460 non-null   int64  
 19  YearBuilt      1460 non-null   int64  
 20  YearRemodAdd   1460 non-null   int64  
 21  RoofStyle      1460 non-null   object 
 22  RoofMatl       1460 non-null   object 
 23  Exterior1st    1460 non-null   object 
 24  Exterior2nd    1460 non-null   object 
 25  MasVnrType     1452 non-null   object 
 26  MasVnrArea     1452 non-null   float64
 27  ExterQual      1460 non-null   object 
 28  ExterCond      1460 non-null   object 
 29  Foundation     1460 non-null   object 
 30  BsmtQual       1423 non-null   object 
 31  BsmtCond       1423 non-null   object 
 32  BsmtExposure   1422 non-null   object 
 33  BsmtFinType1   1423 non-null   object 
 34  BsmtFinSF1     1460 non-null   int64  
 35  BsmtFinType2   1422 non-null   object 
 36  BsmtFinSF2     1460 non-null   int64  
 37  BsmtUnfSF      1460 non-null   int64  
 38  TotalBsmtSF    1460 non-null   int64  
 39  Heating        1460 non-null   object 
 40  HeatingQC      1460 non-null   object 
 41  CentralAir     1460 non-null   object 
 42  Electrical     1459 non-null   object 
 43  1stFlrSF       1460 non-null   int64  
 44  2ndFlrSF       1460 non-null   int64  
 45  LowQualFinSF   1460 non-null   int64  
 46  GrLivArea      1460 non-null   int64  
 47  BsmtFullBath   1460 non-null   int64  
 48  BsmtHalfBath   1460 non-null   int64  
 49  FullBath       1460 non-null   int64  
 50  HalfBath       1460 non-null   int64  
 51  BedroomAbvGr   1460 non-null   int64  
 52  KitchenAbvGr   1460 non-null   int64  
 53  KitchenQual    1460 non-null   object 
 54  TotRmsAbvGrd   1460 non-null   int64  
 55  Functional     1460 non-null   object 
 56  Fireplaces     1460 non-null   int64  
 57  FireplaceQu    770 non-null    object 
 58  GarageType     1379 non-null   object 
 59  GarageYrBlt    1379 non-null   float64
 60  GarageFinish   1379 non-null   object 
 61  GarageCars     1460 non-null   int64  
 62  GarageArea     1460 non-null   int64  
 63  GarageQual     1379 non-null   object 
 64  GarageCond     1379 non-null   object 
 65  PavedDrive     1460 non-null   object 
 66  WoodDeckSF     1460 non-null   int64  
 67  OpenPorchSF    1460 non-null   int64  
 68  EnclosedPorch  1460 non-null   int64  
 69  3SsnPorch      1460 non-null   int64  
 70  ScreenPorch    1460 non-null   int64  
 71  PoolArea       1460 non-null   int64  
 72  PoolQC         7 non-null      object 
 73  Fence          281 non-null    object 
 74  MiscFeature    54 non-null     object 
 75  MiscVal        1460 non-null   int64  
 76  MoSold         1460 non-null   int64  
 77  YrSold         1460 non-null   int64  
 78  SaleType       1460 non-null   object 
 79  SaleCondition  1460 non-null   object 
 80  SalePrice      1460 non-null   int64  
dtypes: float64(3), int64(35), object(43)
memory usage: 924.0+ KB
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">test.info()</span><br></pre></td></tr></table></figure>

<pre><code>&lt;class &#39;pandas.core.frame.DataFrame&#39;&gt;
RangeIndex: 1459 entries, 0 to 1458
Data columns (total 80 columns):
 #   Column         Non-Null Count  Dtype  
---  ------         --------------  -----  
 0   Id             1459 non-null   int64  
 1   MSSubClass     1459 non-null   int64  
 2   MSZoning       1455 non-null   object 
 3   LotFrontage    1232 non-null   float64
 4   LotArea        1459 non-null   int64  
 5   Street         1459 non-null   object 
 6   Alley          107 non-null    object 
 7   LotShape       1459 non-null   object 
 8   LandContour    1459 non-null   object 
 9   Utilities      1457 non-null   object 
 10  LotConfig      1459 non-null   object 
 11  LandSlope      1459 non-null   object 
 12  Neighborhood   1459 non-null   object 
 13  Condition1     1459 non-null   object 
 14  Condition2     1459 non-null   object 
 15  BldgType       1459 non-null   object 
 16  HouseStyle     1459 non-null   object 
 17  OverallQual    1459 non-null   int64  
 18  OverallCond    1459 non-null   int64  
 19  YearBuilt      1459 non-null   int64  
 20  YearRemodAdd   1459 non-null   int64  
 21  RoofStyle      1459 non-null   object 
 22  RoofMatl       1459 non-null   object 
 23  Exterior1st    1458 non-null   object 
 24  Exterior2nd    1458 non-null   object 
 25  MasVnrType     1443 non-null   object 
 26  MasVnrArea     1444 non-null   float64
 27  ExterQual      1459 non-null   object 
 28  ExterCond      1459 non-null   object 
 29  Foundation     1459 non-null   object 
 30  BsmtQual       1415 non-null   object 
 31  BsmtCond       1414 non-null   object 
 32  BsmtExposure   1415 non-null   object 
 33  BsmtFinType1   1417 non-null   object 
 34  BsmtFinSF1     1458 non-null   float64
 35  BsmtFinType2   1417 non-null   object 
 36  BsmtFinSF2     1458 non-null   float64
 37  BsmtUnfSF      1458 non-null   float64
 38  TotalBsmtSF    1458 non-null   float64
 39  Heating        1459 non-null   object 
 40  HeatingQC      1459 non-null   object 
 41  CentralAir     1459 non-null   object 
 42  Electrical     1459 non-null   object 
 43  1stFlrSF       1459 non-null   int64  
 44  2ndFlrSF       1459 non-null   int64  
 45  LowQualFinSF   1459 non-null   int64  
 46  GrLivArea      1459 non-null   int64  
 47  BsmtFullBath   1457 non-null   float64
 48  BsmtHalfBath   1457 non-null   float64
 49  FullBath       1459 non-null   int64  
 50  HalfBath       1459 non-null   int64  
 51  BedroomAbvGr   1459 non-null   int64  
 52  KitchenAbvGr   1459 non-null   int64  
 53  KitchenQual    1458 non-null   object 
 54  TotRmsAbvGrd   1459 non-null   int64  
 55  Functional     1457 non-null   object 
 56  Fireplaces     1459 non-null   int64  
 57  FireplaceQu    729 non-null    object 
 58  GarageType     1383 non-null   object 
 59  GarageYrBlt    1381 non-null   float64
 60  GarageFinish   1381 non-null   object 
 61  GarageCars     1458 non-null   float64
 62  GarageArea     1458 non-null   float64
 63  GarageQual     1381 non-null   object 
 64  GarageCond     1381 non-null   object 
 65  PavedDrive     1459 non-null   object 
 66  WoodDeckSF     1459 non-null   int64  
 67  OpenPorchSF    1459 non-null   int64  
 68  EnclosedPorch  1459 non-null   int64  
 69  3SsnPorch      1459 non-null   int64  
 70  ScreenPorch    1459 non-null   int64  
 71  PoolArea       1459 non-null   int64  
 72  PoolQC         3 non-null      object 
 73  Fence          290 non-null    object 
 74  MiscFeature    51 non-null     object 
 75  MiscVal        1459 non-null   int64  
 76  MoSold         1459 non-null   int64  
 77  YrSold         1459 non-null   int64  
 78  SaleType       1458 non-null   object 
 79  SaleCondition  1459 non-null   object 
dtypes: float64(11), int64(26), object(43)
memory usage: 912.0+ KB
</code></pre>
<h2 id="데이터-시각화"><a href="#데이터-시각화" class="headerlink" title="데이터 시각화"></a>데이터 시각화</h2><ul>
<li><p>여기에서는 생략</p>
</li>
<li><p>종속변수 분포 확인</p>
</li>
<li><p>샤피로 검정</p>
</li>
<li><p>정규분포인가요? </p>
<ul>
<li>정규분포가 아님! –&gt; 로그변환, 박스콕스 변환 등등</li>
<li>정규분포로 만들어 줘야 함.</li>
</ul>
</li>
<li><p>선형모델의 성능을 올리기 위해서는</p>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt </span><br><span class="line"><span class="keyword">from</span> scipy.stats <span class="keyword">import</span> norm </span><br><span class="line">(mu, sigma) = norm.fit(train[<span class="string">&#x27;SalePrice&#x27;</span>])</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;평균:&quot;</span>, mu)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;표준편차:&quot;</span>, sigma)</span><br><span class="line"></span><br><span class="line">fig, ax = plt.subplots(figsize=(<span class="number">10</span>, <span class="number">6</span>))</span><br><span class="line">sns.histplot(train[<span class="string">&#x27;SalePrice&#x27;</span>])</span><br><span class="line">ax.<span class="built_in">set</span>(title=<span class="string">&quot;SalePrice Distribution&quot;</span>)</span><br><span class="line">ax.axvline(mu, color = <span class="string">&#x27;r&#x27;</span>, linestyle = <span class="string">&#x27;--&#x27;</span>)</span><br><span class="line">ax.text(mu + <span class="number">10000</span>, <span class="number">160</span>, <span class="string">&#x27;Mean of SalePrice&#x27;</span>, color = <span class="string">&#x27;r&#x27;</span>)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>

<pre><code>평균: 180921.19589041095
표준편차: 79415.29188606751
</code></pre>
<p>![png](..&#x2F;images&#x2F;house-prices-lec (1)&#x2F;output__11_1.png)</p>
<ul>
<li>로그변환을 해서 정규분포로 변환해준다.</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 로그변환을 함. </span></span><br><span class="line">train[<span class="string">&#x27;SalePrice&#x27;</span>] = np.log1p(train[<span class="string">&#x27;SalePrice&#x27;</span>])</span><br><span class="line"></span><br><span class="line">(mu, sigma) = norm.fit(train[<span class="string">&#x27;SalePrice&#x27;</span>])</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;평균:&quot;</span>, mu)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;표준편차:&quot;</span>, sigma)</span><br><span class="line"></span><br><span class="line">fig, ax = plt.subplots(figsize=(<span class="number">10</span>, <span class="number">6</span>))</span><br><span class="line">sns.histplot(train[<span class="string">&#x27;SalePrice&#x27;</span>])</span><br><span class="line">ax.<span class="built_in">set</span>(title=<span class="string">&quot;SalePrice Distribution&quot;</span>)</span><br><span class="line">ax.axvline(mu, color = <span class="string">&#x27;r&#x27;</span>, linestyle = <span class="string">&#x27;--&#x27;</span>)</span><br><span class="line">ax.text(mu + <span class="number">0.0001</span>, <span class="number">160</span>, <span class="string">&#x27;Mean of SalePrice&#x27;</span>, color = <span class="string">&#x27;r&#x27;</span>)</span><br><span class="line">ax.set_ylim(<span class="number">0</span>, <span class="number">170</span>)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>

<pre><code>평균: 12.024057394918406
표준편차: 0.39931245219387496
</code></pre>
<p>![png](..&#x2F;images&#x2F;house-prices-lec (1)&#x2F;output__13_1.png)</p>
<h2 id="데이터-전처리"><a href="#데이터-전처리" class="headerlink" title="데이터 전처리"></a>데이터 전처리</h2><ul>
<li>컬럼 갯수가 많다?, 어떤 컬럼을 없앨 것인가? </li>
<li>머신러닝 연산 속도부터 높여야 함.</li>
</ul>
<h3 id="데이터-ID값-제거"><a href="#데이터-ID값-제거" class="headerlink" title="데이터 ID값 제거"></a>데이터 ID값 제거</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">train_ID = train[<span class="string">&#x27;Id&#x27;</span>]</span><br><span class="line">test_ID = test[<span class="string">&#x27;Id&#x27;</span>]</span><br><span class="line"></span><br><span class="line">train = train.drop([<span class="string">&#x27;Id&#x27;</span>], axis = <span class="number">1</span>)</span><br><span class="line">train.shape</span><br></pre></td></tr></table></figure>




<pre><code>(1460, 80)
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">test = test.drop([<span class="string">&#x27;Id&#x27;</span>], axis = <span class="number">1</span>)</span><br><span class="line">test.shape </span><br></pre></td></tr></table></figure>




<pre><code>(1459, 79)
</code></pre>
<h3 id="Y값-추출"><a href="#Y값-추출" class="headerlink" title="Y값 추출"></a>Y값 추출</h3><ul>
<li>train데이터에 SalePrice만 따로 저장한다.</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">y = train[<span class="string">&#x27;SalePrice&#x27;</span>]</span><br><span class="line">train = train.drop(<span class="string">&#x27;SalePrice&#x27;</span>, axis = <span class="number">1</span>)</span><br><span class="line">train.shape</span><br></pre></td></tr></table></figure>




<pre><code>(1460, 79)
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">test.shape</span><br></pre></td></tr></table></figure>




<pre><code>(1459, 79)
</code></pre>
<h3 id="데이터-합치기"><a href="#데이터-합치기" class="headerlink" title="데이터 합치기"></a>데이터 합치기</h3><ul>
<li>강의 목적</li>
<li>원칙<ul>
<li>train, 따로 정리</li>
<li>test, 따로 정리</li>
</ul>
</li>
<li>Data Leakage 오류를 범할 가능성이 높음.</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">all_df = pd.concat([train, test]).reset_index(drop=<span class="literal">True</span>)</span><br><span class="line">all_df.shape</span><br></pre></td></tr></table></figure>




<pre><code>(2919, 79)
</code></pre>
<h2 id="결측치-확인"><a href="#결측치-확인" class="headerlink" title="결측치 확인"></a>결측치 확인</h2><ul>
<li>결측치의 비율 확인하는 사용자 정의 함수 작성</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">train.info()</span><br></pre></td></tr></table></figure>

<pre><code>&lt;class &#39;pandas.core.frame.DataFrame&#39;&gt;
RangeIndex: 1460 entries, 0 to 1459
Data columns (total 79 columns):
 #   Column         Non-Null Count  Dtype  
---  ------         --------------  -----  
 0   MSSubClass     1460 non-null   int64  
 1   MSZoning       1460 non-null   object 
 2   LotFrontage    1201 non-null   float64
 3   LotArea        1460 non-null   int64  
 4   Street         1460 non-null   object 
 5   Alley          91 non-null     object 
 6   LotShape       1460 non-null   object 
 7   LandContour    1460 non-null   object 
 8   Utilities      1460 non-null   object 
 9   LotConfig      1460 non-null   object 
 10  LandSlope      1460 non-null   object 
 11  Neighborhood   1460 non-null   object 
 12  Condition1     1460 non-null   object 
 13  Condition2     1460 non-null   object 
 14  BldgType       1460 non-null   object 
 15  HouseStyle     1460 non-null   object 
 16  OverallQual    1460 non-null   int64  
 17  OverallCond    1460 non-null   int64  
 18  YearBuilt      1460 non-null   int64  
 19  YearRemodAdd   1460 non-null   int64  
 20  RoofStyle      1460 non-null   object 
 21  RoofMatl       1460 non-null   object 
 22  Exterior1st    1460 non-null   object 
 23  Exterior2nd    1460 non-null   object 
 24  MasVnrType     1452 non-null   object 
 25  MasVnrArea     1452 non-null   float64
 26  ExterQual      1460 non-null   object 
 27  ExterCond      1460 non-null   object 
 28  Foundation     1460 non-null   object 
 29  BsmtQual       1423 non-null   object 
 30  BsmtCond       1423 non-null   object 
 31  BsmtExposure   1422 non-null   object 
 32  BsmtFinType1   1423 non-null   object 
 33  BsmtFinSF1     1460 non-null   int64  
 34  BsmtFinType2   1422 non-null   object 
 35  BsmtFinSF2     1460 non-null   int64  
 36  BsmtUnfSF      1460 non-null   int64  
 37  TotalBsmtSF    1460 non-null   int64  
 38  Heating        1460 non-null   object 
 39  HeatingQC      1460 non-null   object 
 40  CentralAir     1460 non-null   object 
 41  Electrical     1459 non-null   object 
 42  1stFlrSF       1460 non-null   int64  
 43  2ndFlrSF       1460 non-null   int64  
 44  LowQualFinSF   1460 non-null   int64  
 45  GrLivArea      1460 non-null   int64  
 46  BsmtFullBath   1460 non-null   int64  
 47  BsmtHalfBath   1460 non-null   int64  
 48  FullBath       1460 non-null   int64  
 49  HalfBath       1460 non-null   int64  
 50  BedroomAbvGr   1460 non-null   int64  
 51  KitchenAbvGr   1460 non-null   int64  
 52  KitchenQual    1460 non-null   object 
 53  TotRmsAbvGrd   1460 non-null   int64  
 54  Functional     1460 non-null   object 
 55  Fireplaces     1460 non-null   int64  
 56  FireplaceQu    770 non-null    object 
 57  GarageType     1379 non-null   object 
 58  GarageYrBlt    1379 non-null   float64
 59  GarageFinish   1379 non-null   object 
 60  GarageCars     1460 non-null   int64  
 61  GarageArea     1460 non-null   int64  
 62  GarageQual     1379 non-null   object 
 63  GarageCond     1379 non-null   object 
 64  PavedDrive     1460 non-null   object 
 65  WoodDeckSF     1460 non-null   int64  
 66  OpenPorchSF    1460 non-null   int64  
 67  EnclosedPorch  1460 non-null   int64  
 68  3SsnPorch      1460 non-null   int64  
 69  ScreenPorch    1460 non-null   int64  
 70  PoolArea       1460 non-null   int64  
 71  PoolQC         7 non-null      object 
 72  Fence          281 non-null    object 
 73  MiscFeature    54 non-null     object 
 74  MiscVal        1460 non-null   int64  
 75  MoSold         1460 non-null   int64  
 76  YrSold         1460 non-null   int64  
 77  SaleType       1460 non-null   object 
 78  SaleCondition  1460 non-null   object 
dtypes: float64(3), int64(33), object(43)
memory usage: 901.2+ KB
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">check_na</span>(<span class="params">data, head_num = <span class="number">6</span></span>):</span><br><span class="line">  isnull_na = (data.isnull().<span class="built_in">sum</span>() / <span class="built_in">len</span>(data)) * <span class="number">100</span></span><br><span class="line">  data_na = isnull_na.drop(isnull_na[isnull_na == <span class="number">0</span>].index).sort_values(ascending=<span class="literal">False</span>)</span><br><span class="line">  missing_data = pd.DataFrame(&#123;<span class="string">&#x27;Missing Ratio&#x27;</span> :data_na, </span><br><span class="line">                               <span class="string">&#x27;Data Type&#x27;</span>: data.dtypes[data_na.index]&#125;)</span><br><span class="line">  <span class="built_in">print</span>(<span class="string">&quot;결측치 데이터 컬럼과 건수:\n&quot;</span>, missing_data.head(head_num))</span><br><span class="line"></span><br><span class="line">check_na(all_df, <span class="number">20</span>)</span><br></pre></td></tr></table></figure>

<pre><code>결측치 데이터 컬럼과 건수:
               Missing Ratio Data Type
PoolQC            99.657417    object
MiscFeature       96.402878    object
Alley             93.216855    object
Fence             80.438506    object
FireplaceQu       48.646797    object
LotFrontage       16.649538   float64
GarageFinish       5.447071    object
GarageQual         5.447071    object
GarageCond         5.447071    object
GarageYrBlt        5.447071   float64
GarageType         5.378554    object
BsmtExposure       2.809181    object
BsmtCond           2.809181    object
BsmtQual           2.774923    object
BsmtFinType2       2.740665    object
BsmtFinType1       2.706406    object
MasVnrType         0.822199    object
MasVnrArea         0.787941   float64
MSZoning           0.137033    object
BsmtFullBath       0.068517   float64
</code></pre>
<ul>
<li>결측치 제거</li>
<li>결측치 비율이 높은 변수들을 모두 제거하기로 했다.</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">all_df = all_df.drop([<span class="string">&#x27;PoolQC&#x27;</span>, <span class="string">&#x27;MiscFeature&#x27;</span>, <span class="string">&#x27;Alley&#x27;</span>, <span class="string">&#x27;Fence&#x27;</span>, <span class="string">&#x27;FireplaceQu&#x27;</span>, <span class="string">&#x27;LotFrontage&#x27;</span>], axis = <span class="number">1</span>)</span><br><span class="line"><span class="built_in">print</span>(all_df.shape)</span><br><span class="line">check_na(all_df, <span class="number">40</span>)</span><br></pre></td></tr></table></figure>

<pre><code>(2919, 73)
결측치 데이터 컬럼과 건수:
               Missing Ratio Data Type
GarageCond         5.447071    object
GarageQual         5.447071    object
GarageYrBlt        5.447071   float64
GarageFinish       5.447071    object
GarageType         5.378554    object
BsmtCond           2.809181    object
BsmtExposure       2.809181    object
BsmtQual           2.774923    object
BsmtFinType2       2.740665    object
BsmtFinType1       2.706406    object
MasVnrType         0.822199    object
MasVnrArea         0.787941   float64
MSZoning           0.137033    object
Functional         0.068517    object
Utilities          0.068517    object
BsmtFullBath       0.068517   float64
BsmtHalfBath       0.068517   float64
GarageArea         0.034258   float64
GarageCars         0.034258   float64
TotalBsmtSF        0.034258   float64
KitchenQual        0.034258    object
Electrical         0.034258    object
BsmtUnfSF          0.034258   float64
BsmtFinSF2         0.034258   float64
BsmtFinSF1         0.034258   float64
Exterior2nd        0.034258    object
Exterior1st        0.034258    object
SaleType           0.034258    object
</code></pre>
<h2 id="결측치-채우기"><a href="#결측치-채우기" class="headerlink" title="결측치 채우기"></a>결측치 채우기</h2><ul>
<li>train 데이터와 test 데이터가 섞이면 안됨. </li>
<li>train &#x2F; test 분리해서 진행해야 함. </li>
<li>문자데이터 : 자주 등장하는 빈도 값으로 채움</li>
<li>숫자데이터 : 평균이 아니라, 중간값으로 채울 예정</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># all_df[&#x27;SaleType&#x27;].value_counts()</span></span><br><span class="line">all_df[<span class="string">&#x27;SaleType&#x27;</span>].mode()[<span class="number">0</span>]</span><br></pre></td></tr></table></figure>




<pre><code>&#39;WD&#39;
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">check_na(all_df, <span class="number">40</span>)</span><br></pre></td></tr></table></figure>

<pre><code>결측치 데이터 컬럼과 건수:
               Missing Ratio Data Type
GarageCond         5.447071    object
GarageQual         5.447071    object
GarageYrBlt        5.447071   float64
GarageFinish       5.447071    object
GarageType         5.378554    object
BsmtCond           2.809181    object
BsmtExposure       2.809181    object
BsmtQual           2.774923    object
BsmtFinType2       2.740665    object
BsmtFinType1       2.706406    object
MasVnrType         0.822199    object
MasVnrArea         0.787941   float64
MSZoning           0.137033    object
Functional         0.068517    object
Utilities          0.068517    object
BsmtFullBath       0.068517   float64
BsmtHalfBath       0.068517   float64
GarageArea         0.034258   float64
GarageCars         0.034258   float64
TotalBsmtSF        0.034258   float64
KitchenQual        0.034258    object
Electrical         0.034258    object
BsmtUnfSF          0.034258   float64
BsmtFinSF2         0.034258   float64
BsmtFinSF1         0.034258   float64
Exterior2nd        0.034258    object
Exterior1st        0.034258    object
SaleType           0.034258    object
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line"><span class="comment"># 문자열 데이터만 추출</span></span><br><span class="line">cat_all_vars = train.select_dtypes(exclude=[np.number])</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;The whole number of all_vars&quot;</span>, <span class="built_in">len</span>(<span class="built_in">list</span>(cat_all_vars)))</span><br><span class="line"></span><br><span class="line"><span class="comment"># 문자열 데이터 중에서 이미 기 삭제했던 Feature들이 있었기 때문에, </span></span><br><span class="line"><span class="comment"># 한번 더 Feature를 정리하는 코드를 작성한다. </span></span><br><span class="line"><span class="comment"># 따라서 38개의 Feature만 추출했다. </span></span><br><span class="line">final_cat_vars = []</span><br><span class="line"><span class="keyword">for</span> v <span class="keyword">in</span> cat_all_vars:</span><br><span class="line">    <span class="keyword">if</span> v <span class="keyword">not</span> <span class="keyword">in</span> [<span class="string">&#x27;PoolQC&#x27;</span>, <span class="string">&#x27;MiscFeature&#x27;</span>, <span class="string">&#x27;Alley&#x27;</span>, <span class="string">&#x27;Fence&#x27;</span>, <span class="string">&#x27;FireplaceQu&#x27;</span>]:</span><br><span class="line">        final_cat_vars.append(v)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;The whole number of final_cat_vars&quot;</span>, <span class="built_in">len</span>(final_cat_vars))</span><br><span class="line"></span><br><span class="line"><span class="comment"># 이제 각 Feature 마다 빈도수가 가장 많이 나타나는 값을 추가하는 코드를 작성한다. </span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> final_cat_vars:</span><br><span class="line">  all_df[i] = all_df[i].fillna(all_df[i].mode()[<span class="number">0</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment"># 이제 수치형 데이터만 남은 것을 확인한다. </span></span><br><span class="line">check_na(all_df, <span class="number">20</span>)</span><br></pre></td></tr></table></figure>

<pre><code>The whole number of all_vars 43
The whole number of final_cat_vars 38
결측치 데이터 컬럼과 건수:
               Missing Ratio Data Type
GarageYrBlt        5.447071   float64
MasVnrArea         0.787941   float64
BsmtFullBath       0.068517   float64
BsmtHalfBath       0.068517   float64
BsmtFinSF1         0.034258   float64
BsmtFinSF2         0.034258   float64
BsmtUnfSF          0.034258   float64
TotalBsmtSF        0.034258   float64
GarageCars         0.034258   float64
GarageArea         0.034258   float64
</code></pre>
<ul>
<li>수치형 데이터의 결측치를 추가할 수 있다. </li>
<li>평균이 아닌 중간값으로 진행한다.</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line"><span class="comment"># 방법은 기존과 동일하다. </span></span><br><span class="line"><span class="comment"># 이번에는 수치형 데이터만 추출한다. </span></span><br><span class="line">num_all_vars = <span class="built_in">list</span>(train.select_dtypes(include=[np.number]))</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;The whole number of all_vars&quot;</span>, <span class="built_in">len</span>(num_all_vars))</span><br><span class="line"></span><br><span class="line"><span class="comment"># 수치형 데이터 중, 결측치가 많았던 `LotFrontage`만 처리한다. </span></span><br><span class="line">num_all_vars.remove(<span class="string">&#x27;LotFrontage&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;The whole number of final_cat_vars&quot;</span>, <span class="built_in">len</span>(num_all_vars))</span><br><span class="line"></span><br><span class="line"><span class="comment"># 이번에는 수치형 데이터의 평균이 아닌 중간값을 지정했다. </span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> num_all_vars:</span><br><span class="line">  all_df[i].fillna(value=all_df[i].median(), inplace=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line">check_na(all_df, <span class="number">20</span>)</span><br></pre></td></tr></table></figure>

<pre><code>The whole number of all_vars 36
The whole number of final_cat_vars 35
결측치 데이터 컬럼과 건수:
 Empty DataFrame
Columns: [Missing Ratio, Data Type]
Index: []
</code></pre>
<h2 id="도출-변수"><a href="#도출-변수" class="headerlink" title="도출 변수"></a>도출 변수</h2><ul>
<li><p>새로운 도출 변수를 작성 (기존 변수 활용)</p>
</li>
<li><p>기존 변수 제거 </p>
</li>
<li><p>각 층의 면적으로 모두 더해 전체 면적으로 계산한 새로운 변수를 작성한다.</p>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">all_df[<span class="string">&#x27;TotalSF&#x27;</span>] = all_df[<span class="string">&#x27;TotalBsmtSF&#x27;</span>] + all_df[<span class="string">&#x27;1stFlrSF&#x27;</span>] + all_df[<span class="string">&#x27;2ndFlrSF&#x27;</span>]</span><br><span class="line">all_df = all_df.drop([<span class="string">&#x27;TotalBsmtSF&#x27;</span>, <span class="string">&#x27;1stFlrSF&#x27;</span>, <span class="string">&#x27;2ndFlrSF&#x27;</span>], axis=<span class="number">1</span>)</span><br><span class="line"><span class="built_in">print</span>(all_df.shape)</span><br></pre></td></tr></table></figure>

<pre><code>(2919, 71)
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">all_df[<span class="string">&#x27;Total_Bathrooms&#x27;</span>] = (all_df[<span class="string">&#x27;FullBath&#x27;</span>] + (<span class="number">0.5</span> * all_df[<span class="string">&#x27;HalfBath&#x27;</span>]) + all_df[<span class="string">&#x27;BsmtFullBath&#x27;</span>] + (<span class="number">0.5</span> * all_df[<span class="string">&#x27;BsmtHalfBath&#x27;</span>]))</span><br><span class="line">all_df[<span class="string">&#x27;Total_porch_sf&#x27;</span>] = (all_df[<span class="string">&#x27;OpenPorchSF&#x27;</span>] + all_df[<span class="string">&#x27;3SsnPorch&#x27;</span>] + all_df[<span class="string">&#x27;EnclosedPorch&#x27;</span>] + all_df[<span class="string">&#x27;ScreenPorch&#x27;</span>])</span><br><span class="line">all_df = all_df.drop([<span class="string">&#x27;FullBath&#x27;</span>, <span class="string">&#x27;HalfBath&#x27;</span>, <span class="string">&#x27;BsmtFullBath&#x27;</span>, <span class="string">&#x27;BsmtHalfBath&#x27;</span>, <span class="string">&#x27;OpenPorchSF&#x27;</span>, <span class="string">&#x27;3SsnPorch&#x27;</span>, <span class="string">&#x27;EnclosedPorch&#x27;</span>, <span class="string">&#x27;ScreenPorch&#x27;</span>], axis=<span class="number">1</span>)</span><br><span class="line"><span class="built_in">print</span>(all_df.shape)</span><br></pre></td></tr></table></figure>

<pre><code>(2919, 65)
</code></pre>
<ul>
<li>연도와 관련된 변수를 추출하는 코드 작성.</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">num_all_vars = <span class="built_in">list</span>(train.select_dtypes(include=[np.number]))</span><br><span class="line">year_feature = []</span><br><span class="line"><span class="keyword">for</span> var <span class="keyword">in</span> num_all_vars:</span><br><span class="line">  <span class="keyword">if</span> <span class="string">&#x27;Yr&#x27;</span> <span class="keyword">in</span> var:</span><br><span class="line">    year_feature.append(var)</span><br><span class="line">  <span class="keyword">elif</span> <span class="string">&#x27;Year&#x27;</span> <span class="keyword">in</span> var:</span><br><span class="line">    year_feature.append(var)</span><br><span class="line">  <span class="keyword">else</span>:  </span><br><span class="line">    <span class="built_in">print</span>(var, <span class="string">&quot;is not related with Year&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(year_feature)</span><br></pre></td></tr></table></figure>

<pre><code>MSSubClass is not related with Year
LotFrontage is not related with Year
LotArea is not related with Year
OverallQual is not related with Year
OverallCond is not related with Year
MasVnrArea is not related with Year
BsmtFinSF1 is not related with Year
BsmtFinSF2 is not related with Year
BsmtUnfSF is not related with Year
TotalBsmtSF is not related with Year
1stFlrSF is not related with Year
2ndFlrSF is not related with Year
LowQualFinSF is not related with Year
GrLivArea is not related with Year
BsmtFullBath is not related with Year
BsmtHalfBath is not related with Year
FullBath is not related with Year
HalfBath is not related with Year
BedroomAbvGr is not related with Year
KitchenAbvGr is not related with Year
TotRmsAbvGrd is not related with Year
Fireplaces is not related with Year
GarageCars is not related with Year
GarageArea is not related with Year
WoodDeckSF is not related with Year
OpenPorchSF is not related with Year
EnclosedPorch is not related with Year
3SsnPorch is not related with Year
ScreenPorch is not related with Year
PoolArea is not related with Year
MiscVal is not related with Year
MoSold is not related with Year
[&#39;YearBuilt&#39;, &#39;YearRemodAdd&#39;, &#39;GarageYrBlt&#39;, &#39;YrSold&#39;]
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">fig, ax = plt.subplots(<span class="number">3</span>, <span class="number">1</span>, figsize=(<span class="number">10</span>, <span class="number">6</span>), sharex=<span class="literal">True</span>, sharey=<span class="literal">True</span>)</span><br><span class="line"><span class="keyword">for</span> i, var <span class="keyword">in</span> <span class="built_in">enumerate</span>(year_feature):</span><br><span class="line">  <span class="keyword">if</span> var != <span class="string">&#x27;YrSold&#x27;</span>:</span><br><span class="line">    ax[i].scatter(train[var], y, alpha=<span class="number">0.3</span>)</span><br><span class="line">    ax[i].set_title(<span class="string">&#x27;&#123;&#125;&#x27;</span>.<span class="built_in">format</span>(var), size=<span class="number">15</span>)</span><br><span class="line">    ax[i].set_ylabel(<span class="string">&#x27;SalePrice&#x27;</span>, size=<span class="number">15</span>, labelpad=<span class="number">12.5</span>)</span><br><span class="line">plt.tight_layout()</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>


<p>![png](..&#x2F;images&#x2F;house-prices-lec (1)&#x2F;output__41_0.png)</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">all_df = all_df.drop([<span class="string">&#x27;YearBuilt&#x27;</span>, <span class="string">&#x27;GarageYrBlt&#x27;</span>], axis=<span class="number">1</span>)</span><br><span class="line"><span class="built_in">print</span>(all_df.shape)</span><br></pre></td></tr></table></figure>

<pre><code>(2919, 63)
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">YearsSinceRemodel = train[<span class="string">&#x27;YrSold&#x27;</span>].astype(<span class="built_in">int</span>) - train[<span class="string">&#x27;YearRemodAdd&#x27;</span>].astype(<span class="built_in">int</span>)</span><br><span class="line"></span><br><span class="line">fig, ax = plt.subplots(figsize=(<span class="number">10</span>, <span class="number">6</span>))</span><br><span class="line">ax.scatter(YearsSinceRemodel, y, alpha=<span class="number">0.3</span>)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>


<p>![png](..&#x2F;images&#x2F;house-prices-lec (1)&#x2F;output__43_0.png)</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">all_df[<span class="string">&#x27;YearsSinceRemodel&#x27;</span>] = all_df[<span class="string">&#x27;YrSold&#x27;</span>].astype(<span class="built_in">int</span>) - all_df[<span class="string">&#x27;YearRemodAdd&#x27;</span>].astype(<span class="built_in">int</span>)</span><br><span class="line">all_df = all_df.drop([<span class="string">&#x27;YrSold&#x27;</span>, <span class="string">&#x27;YearRemodAdd&#x27;</span>], axis=<span class="number">1</span>)</span><br><span class="line"><span class="built_in">print</span>(all_df.shape)</span><br></pre></td></tr></table></figure>

<pre><code>(2919, 62)
</code></pre>
<h2 id="더미변수"><a href="#더미변수" class="headerlink" title="더미변수"></a>더미변수</h2><ul>
<li>더미변수란 원 데이터 독립변수를 0과 1로 변환하는 변수를 말함.</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">all_df[<span class="string">&#x27;PoolArea&#x27;</span>].value_counts() </span><br></pre></td></tr></table></figure>




<pre><code>0      2906
512       1
648       1
576       1
555       1
480       1
519       1
738       1
144       1
368       1
444       1
228       1
561       1
800       1
Name: PoolArea, dtype: int64
</code></pre>
<ul>
<li>사용자 정의 함수 만들기</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">count_dummy</span>(<span class="params">x</span>):</span><br><span class="line">    <span class="keyword">if</span> x &gt; <span class="number">0</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span></span><br></pre></td></tr></table></figure>


<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">all_df[<span class="string">&#x27;PoolArea&#x27;</span>] = all_df[<span class="string">&#x27;PoolArea&#x27;</span>].apply(count_dummy) </span><br><span class="line">all_df[<span class="string">&#x27;PoolArea&#x27;</span>].value_counts()</span><br></pre></td></tr></table></figure>




<pre><code>0    2906
1      13
Name: PoolArea, dtype: int64
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">all_df[<span class="string">&#x27;GarageArea&#x27;</span>] = all_df[<span class="string">&#x27;GarageArea&#x27;</span>].apply(count_dummy)</span><br><span class="line">all_df[<span class="string">&#x27;GarageArea&#x27;</span>].value_counts()</span><br></pre></td></tr></table></figure>




<pre><code>1    2762
0     157
Name: GarageArea, dtype: int64
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">all_df[<span class="string">&#x27;Fireplaces&#x27;</span>] = all_df[<span class="string">&#x27;Fireplaces&#x27;</span>].apply(count_dummy)</span><br><span class="line">all_df[<span class="string">&#x27;Fireplaces&#x27;</span>].value_counts()</span><br></pre></td></tr></table></figure>




<pre><code>1    1499
0    1420
Name: Fireplaces, dtype: int64
</code></pre>
<h2 id="인코딩"><a href="#인코딩" class="headerlink" title="인코딩"></a>인코딩</h2><ul>
<li>문자를 숫자로 변환해주는 코드를 인코딩 변환</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">all_df.shape</span><br></pre></td></tr></table></figure>




<pre><code>(2919, 62)
</code></pre>
<h2 id="Label-Encoding-Ordinal-Encoding-One-Hot-Encoding"><a href="#Label-Encoding-Ordinal-Encoding-One-Hot-Encoding" class="headerlink" title="Label Encoding, Ordinal Encoding, One-Hot Encoding"></a>Label Encoding, Ordinal Encoding, One-Hot Encoding</h2><ul>
<li>인코딩은 문자 데이터를 수치로 변환하는 방법론 중의 하나이다.</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 분류모형</span></span><br><span class="line"><span class="comment"># 종속변수 (양성, 음성)</span></span><br><span class="line"><span class="comment"># Label Encoder는 종속변수에만 적용</span></span><br><span class="line"><span class="keyword">from</span> sklearn.preprocessing <span class="keyword">import</span> LabelEncoder</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"></span><br><span class="line">temp = pd.DataFrame(&#123;<span class="string">&#x27;Food_Name&#x27;</span>: [<span class="string">&#x27;Apple&#x27;</span>, <span class="string">&#x27;Chicken&#x27;</span>, <span class="string">&#x27;Broccoli&#x27;</span>], </span><br><span class="line">                     <span class="string">&#x27;Calories&#x27;</span>: [<span class="number">95</span>, <span class="number">231</span>, <span class="number">50</span>]&#125;)</span><br><span class="line"></span><br><span class="line">encoder = LabelEncoder()</span><br><span class="line">encoder.fit(temp[<span class="string">&#x27;Food_Name&#x27;</span>])</span><br><span class="line">labels = encoder.transform(temp[<span class="string">&#x27;Food_Name&#x27;</span>])</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">list</span>(temp[<span class="string">&#x27;Food_Name&#x27;</span>]), <span class="string">&quot;==&gt;&quot;</span>, labels)</span><br></pre></td></tr></table></figure>

<pre><code>[&#39;Apple&#39;, &#39;Chicken&#39;, &#39;Broccoli&#39;] ==&gt; [0 2 1]
</code></pre>
<ul>
<li>OrdinalEncoder는 독립변수에만 쓴다.</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> sklearn.preprocessing <span class="keyword">import</span> OrdinalEncoder</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"></span><br><span class="line">temp = pd.DataFrame(&#123;<span class="string">&#x27;Food_Name&#x27;</span>: [<span class="string">&#x27;Apple&#x27;</span>, <span class="string">&#x27;Chicken&#x27;</span>, <span class="string">&#x27;Broccoli&#x27;</span>], </span><br><span class="line">                     <span class="string">&#x27;Calories&#x27;</span>: [<span class="number">95</span>, <span class="number">231</span>, <span class="number">50</span>]&#125;)</span><br><span class="line"></span><br><span class="line">encoder = OrdinalEncoder()</span><br><span class="line">labels = encoder.fit_transform(temp[[<span class="string">&#x27;Food_Name&#x27;</span>]])</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">list</span>(temp[<span class="string">&#x27;Food_Name&#x27;</span>]), <span class="string">&quot;==&gt;&quot;</span>, labels.tolist())</span><br></pre></td></tr></table></figure>

<pre><code>[&#39;Apple&#39;, &#39;Chicken&#39;, &#39;Broccoli&#39;] ==&gt; [[0.0], [2.0], [1.0]]
</code></pre>
<ul>
<li>pandas 메서드 통해서 직접 숫자로 변환</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">temp = pd.DataFrame(&#123;<span class="string">&#x27;Food_Name&#x27;</span>: [<span class="string">&#x27;Apple&#x27;</span>, <span class="string">&#x27;Chicken&#x27;</span>, <span class="string">&#x27;Broccoli&#x27;</span>], </span><br><span class="line">                     <span class="string">&#x27;Calories&#x27;</span>: [<span class="number">95</span>, <span class="number">231</span>, <span class="number">50</span>]&#125;)</span><br><span class="line"></span><br><span class="line">temp[<span class="string">&#x27;Food_No&#x27;</span>] = temp[<span class="string">&#x27;Food_Name&#x27;</span>].replace(to_replace = [<span class="string">&#x27;Apple&#x27;</span>, <span class="string">&#x27;Chicken&#x27;</span>, <span class="string">&#x27;Broccoli&#x27;</span>], value = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>])</span><br><span class="line"><span class="built_in">print</span>(temp[[<span class="string">&#x27;Food_Name&#x27;</span>, <span class="string">&#x27;Food_No&#x27;</span>]])</span><br></pre></td></tr></table></figure>

<pre><code>  Food_Name  Food_No
0     Apple        1
1   Chicken        2
2  Broccoli        3
</code></pre>
<ul>
<li>원핫 인코딩<ul>
<li>scikit-learn 방식이 조금 복잡함. </li>
<li>그래서 보통은 pandas get_dummies() 함수를 활</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">from</span> sklearn.preprocessing <span class="keyword">import</span> LabelBinarizer</span><br><span class="line"></span><br><span class="line">temp = pd.DataFrame(&#123;<span class="string">&#x27;Food_Name&#x27;</span>: [<span class="string">&#x27;Apple&#x27;</span>, <span class="string">&#x27;Chicken&#x27;</span>, <span class="string">&#x27;Broccoli&#x27;</span>], </span><br><span class="line">                     <span class="string">&#x27;Calories&#x27;</span>: [<span class="number">95</span>, <span class="number">231</span>, <span class="number">50</span>]&#125;)</span><br><span class="line"></span><br><span class="line">encoder = LabelBinarizer()</span><br><span class="line">encoder.fit(temp[<span class="string">&#x27;Food_Name&#x27;</span>])</span><br><span class="line">transformed = encoder.transform(temp[<span class="string">&#x27;Food_Name&#x27;</span>])</span><br><span class="line">ohe_df = pd.DataFrame(transformed)</span><br><span class="line">temp = pd.concat([temp, ohe_df], axis=<span class="number">1</span>).drop([<span class="string">&#x27;Food_Name&#x27;</span>], axis=<span class="number">1</span>)</span><br><span class="line">temp.columns = [<span class="string">&#x27;Calories&#x27;</span>, <span class="string">&#x27;Food_Name_Apple&#x27;</span>, <span class="string">&#x27;Food_Name_Broccoli&#x27;</span>, <span class="string">&#x27;Food_Name_Chicken&#x27;</span>]</span><br><span class="line"><span class="built_in">print</span>(temp)</span><br><span class="line"><span class="built_in">print</span>(temp.shape)</span><br></pre></td></tr></table></figure>

<pre><code>   Calories  Food_Name_Apple  Food_Name_Broccoli  Food_Name_Chicken
0        95                1                   0                  0
1       231                0                   0                  1
2        50                0                   1                  0
(3, 4)
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"></span><br><span class="line">temp = pd.DataFrame(&#123;<span class="string">&#x27;Food_Name&#x27;</span>: [<span class="string">&#x27;Apple&#x27;</span>, <span class="string">&#x27;Chicken&#x27;</span>, <span class="string">&#x27;Broccoli&#x27;</span>], </span><br><span class="line">                     <span class="string">&#x27;Calories&#x27;</span>: [<span class="number">95</span>, <span class="number">231</span>, <span class="number">50</span>]&#125;)</span><br><span class="line"></span><br><span class="line">temp = pd.get_dummies(temp)</span><br><span class="line"><span class="built_in">print</span>(temp)</span><br><span class="line"><span class="built_in">print</span>(temp.shape)</span><br></pre></td></tr></table></figure>

<pre><code>   Calories  Food_Name_Apple  Food_Name_Broccoli  Food_Name_Chicken
0        95                1                   0                  0
1       231                0                   0                  1
2        50                0                   1                  0
(3, 4)
</code></pre>
<ul>
<li>본 데이터 적용<ul>
<li>여기서는 Ordinal Encoding 적용 안함. (단, 실전에서는 꼭 찾아서 해야함).</li>
</ul>
</li>
<li>원핫 인코딩 적용</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">all_df = pd.get_dummies(all_df).reset_index(drop=<span class="literal">True</span>)</span><br><span class="line">all_df.shape</span><br></pre></td></tr></table></figure>




<pre><code>(2919, 258)
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">all_df.head()</span><br></pre></td></tr></table></figure>




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

<pre><code>.dataframe tbody tr th &#123;
    vertical-align: top;
&#125;

.dataframe thead th &#123;
    text-align: right;
&#125;
</code></pre>
<p></style></p>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>MSSubClass</th>
      <th>LotArea</th>
      <th>OverallQual</th>
      <th>OverallCond</th>
      <th>MasVnrArea</th>
      <th>BsmtFinSF1</th>
      <th>BsmtFinSF2</th>
      <th>BsmtUnfSF</th>
      <th>LowQualFinSF</th>
      <th>GrLivArea</th>
      <th>...</th>
      <th>SaleType_ConLw</th>
      <th>SaleType_New</th>
      <th>SaleType_Oth</th>
      <th>SaleType_WD</th>
      <th>SaleCondition_Abnorml</th>
      <th>SaleCondition_AdjLand</th>
      <th>SaleCondition_Alloca</th>
      <th>SaleCondition_Family</th>
      <th>SaleCondition_Normal</th>
      <th>SaleCondition_Partial</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>60</td>
      <td>8450</td>
      <td>7</td>
      <td>5</td>
      <td>196.0</td>
      <td>706.0</td>
      <td>0.0</td>
      <td>150.0</td>
      <td>0</td>
      <td>1710</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
    </tr>
    <tr>
      <th>1</th>
      <td>20</td>
      <td>9600</td>
      <td>6</td>
      <td>8</td>
      <td>0.0</td>
      <td>978.0</td>
      <td>0.0</td>
      <td>284.0</td>
      <td>0</td>
      <td>1262</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
    </tr>
    <tr>
      <th>2</th>
      <td>60</td>
      <td>11250</td>
      <td>7</td>
      <td>5</td>
      <td>162.0</td>
      <td>486.0</td>
      <td>0.0</td>
      <td>434.0</td>
      <td>0</td>
      <td>1786</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
    </tr>
    <tr>
      <th>3</th>
      <td>70</td>
      <td>9550</td>
      <td>7</td>
      <td>5</td>
      <td>0.0</td>
      <td>216.0</td>
      <td>0.0</td>
      <td>540.0</td>
      <td>0</td>
      <td>1717</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>4</th>
      <td>60</td>
      <td>14260</td>
      <td>8</td>
      <td>5</td>
      <td>350.0</td>
      <td>655.0</td>
      <td>0.0</td>
      <td>490.0</td>
      <td>0</td>
      <td>2198</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
    </tr>
  </tbody>
</table>
<p>5 rows × 258 columns</p>
</div>



<ul>
<li>train, test 데이터 합쳐서 진행. </li>
<li>train, test 데이터 재분리</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">X = all_df.iloc[:<span class="built_in">len</span>(y), :]</span><br><span class="line">test = all_df.iloc[<span class="built_in">len</span>(y):, :]</span><br><span class="line"></span><br><span class="line">X.shape, y.shape, test.shape</span><br></pre></td></tr></table></figure>




<pre><code>((1460, 258), (1460,), (1459, 258))
</code></pre>
<ul>
<li>머신러닝을 위한 데이터 전처리가 끝이 남.</li>
</ul>
<h2 id="과제"><a href="#과제" class="headerlink" title="과제"></a>과제</h2><ul>
<li>남은 시간동안 교제를 보고 머신러닝 학습 및 RMSE 구하세요. </li>
<li>데이터셋 분리<ul>
<li>X 데이터를 X_train, X_test, y_train, y_test로 분리</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> sklearn.model_selection <span class="keyword">import</span> train_test_split </span><br><span class="line">X_train, X_test, y_train, y_test = train_test_split(</span><br><span class="line">    <span class="comment"># 독립변수, 종속변수 </span></span><br><span class="line">    X,         y, test_size = <span class="number">0.3</span>, random_state=<span class="number">0</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">X_train.shape, X_test.shape, y_train.shape, y_test.shape</span><br></pre></td></tr></table></figure>




<pre><code>((1022, 258), (438, 258), (1022,), (438,))
</code></pre>
<h2 id="평가지표"><a href="#평가지표" class="headerlink" title="평가지표"></a>평가지표</h2><ul>
<li>MAE, MSE, RMSE</li>
</ul>
<h3 id="MAE"><a href="#MAE" class="headerlink" title="MAE"></a>MAE</h3><ul>
<li>실젯값과 예측값의 차이, 오차, 오차들의 절댓값 평균을 말함.</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np </span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">mean_absolute_error</span>(<span class="params">y_true, y_pred</span>):</span><br><span class="line">    error = <span class="number">0</span> </span><br><span class="line">    <span class="keyword">for</span> yt, yp <span class="keyword">in</span> <span class="built_in">zip</span>(y_true, y_pred):</span><br><span class="line">        <span class="comment"># yt : 실젯값</span></span><br><span class="line">        <span class="comment"># yp : 예측값</span></span><br><span class="line">        error = error + np.<span class="built_in">abs</span>(yt - yp)</span><br><span class="line">        <span class="comment"># 절댓값 오차의 평균</span></span><br><span class="line">    mae = error / <span class="built_in">len</span>(y_true)</span><br><span class="line">    <span class="keyword">return</span> mae</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">mean_squared_error</span>(<span class="params">y_true, y_pred</span>):</span><br><span class="line">    error = <span class="number">0</span> </span><br><span class="line">    <span class="keyword">for</span> yt, yp <span class="keyword">in</span> <span class="built_in">zip</span>(y_true, y_pred):</span><br><span class="line">        <span class="comment"># yt : 실젯값</span></span><br><span class="line">        <span class="comment"># yp : 예측값</span></span><br><span class="line">        error = error + (yt - yp) ** <span class="number">2</span></span><br><span class="line">        <span class="comment"># 제곱값 오차의 평균</span></span><br><span class="line">    mse = error / <span class="built_in">len</span>(y_true)</span><br><span class="line">    <span class="keyword">return</span> mse</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">root_mean_squared_error</span>(<span class="params">y_true, y_pred</span>):</span><br><span class="line">    error = <span class="number">0</span> </span><br><span class="line">    <span class="keyword">for</span> yt, yp <span class="keyword">in</span> <span class="built_in">zip</span>(y_true, y_pred):</span><br><span class="line">        <span class="comment"># yt : 실젯값</span></span><br><span class="line">        <span class="comment"># yp : 예측값</span></span><br><span class="line">        error = error + (yt - yp) ** <span class="number">2</span></span><br><span class="line">        <span class="comment"># 제곱값 오차의 평균</span></span><br><span class="line">    mse = error / <span class="built_in">len</span>(y_true)</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># 제곱근 추가</span></span><br><span class="line">    rmse = np.<span class="built_in">round</span>(np.sqrt(mse), <span class="number">3</span>)</span><br><span class="line">    <span class="keyword">return</span> rmse</span><br><span class="line"></span><br><span class="line">y_true = [<span class="number">400</span>, <span class="number">300</span>, <span class="number">800</span>]</span><br><span class="line">y_pred = [<span class="number">380</span>, <span class="number">320</span>, <span class="number">777</span>]</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;MAE:&quot;</span>, mean_absolute_error(y_true, y_pred))</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;MSE:&quot;</span>, mean_squared_error(y_true, y_pred))</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;RMSE:&quot;</span>, root_mean_squared_error(y_true, y_pred))</span><br></pre></td></tr></table></figure>

<pre><code>MAE: 21.0
MSE: 443.0
RMSE: 21.048
</code></pre>
<p>sklearn 참고 자료</p>
<ul>
<li>URL : <a target="_blank" rel="noopener" href="https://scikit-learn.org/stable/modules/generated/sklearn.metrics.mean_squared_error.html">https://scikit-learn.org/stable/modules/generated/sklearn.metrics.mean_squared_error.html</a></li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> sklearn.metrics <span class="keyword">import</span> mean_squared_error</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">rmse</span>(<span class="params">y_true, y_pred</span>):</span><br><span class="line">    <span class="keyword">return</span> np.sqrt(mean_squared_error(y_true, y_pred))</span><br></pre></td></tr></table></figure>

<h2 id="머신러닝-모형-정의-검증-평가"><a href="#머신러닝-모형-정의-검증-평가" class="headerlink" title="머신러닝 모형 정의, 검증 평가"></a>머신러닝 모형 정의, 검증 평가</h2><ul>
<li>교차 검증 함수 만들기</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> sklearn.metrics <span class="keyword">import</span> mean_squared_error</span><br><span class="line"><span class="keyword">from</span> sklearn.model_selection <span class="keyword">import</span> KFold, cross_val_score</span><br><span class="line"><span class="keyword">from</span> sklearn.linear_model <span class="keyword">import</span> LinearRegression</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">cv_rmse</span>(<span class="params">model, n_folds=<span class="number">5</span></span>):</span><br><span class="line">    cv = KFold(n_splits=n_folds, random_state=<span class="number">42</span>, shuffle=<span class="literal">True</span>)</span><br><span class="line">    rmse_list = np.sqrt(-cross_val_score(model, X, y, scoring=<span class="string">&#x27;neg_mean_squared_error&#x27;</span>, cv=cv))</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;CV RMSE value list:&#x27;</span>, np.<span class="built_in">round</span>(rmse_list, <span class="number">4</span>))</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;CV RMSE mean value:&#x27;</span>, np.<span class="built_in">round</span>(np.mean(rmse_list), <span class="number">4</span>))</span><br><span class="line">    <span class="keyword">return</span> (rmse_list)</span><br><span class="line"></span><br><span class="line">n_folds = <span class="number">5</span></span><br><span class="line">rmse_scores = &#123;&#125;</span><br><span class="line">lr_model = LinearRegression()</span><br></pre></td></tr></table></figure>


<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">score = cv_rmse(lr_model, n_folds)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;linear regression - mean: &#123;:.4f&#125; (std: &#123;:.4f&#125;)&quot;</span>.<span class="built_in">format</span>(score.mean(), score.std()))</span><br><span class="line">rmse_scores[<span class="string">&#x27;linear regression&#x27;</span>] = (score.mean(), score.std())</span><br></pre></td></tr></table></figure>

<pre><code>CV RMSE value list: [1.27900000e-01 1.95604200e+02 9.55274100e+02 1.16409952e+04
 1.11300000e-01]
CV RMSE mean value: 2558.4225
linear regression - mean: 2558.4225 (std: 4554.9083)
</code></pre>
<h2 id="제출-방법"><a href="#제출-방법" class="headerlink" title="제출 방법"></a>제출 방법</h2><p>- </p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> sklearn.model_selection <span class="keyword">import</span> cross_val_predict</span><br><span class="line"></span><br><span class="line"><span class="comment"># X = all_df.iloc[:len(y), :]</span></span><br><span class="line"><span class="comment"># X_test = all_df.iloc[len(y):, :]</span></span><br><span class="line"><span class="comment"># X.shape, y.shape, X_test.shape</span></span><br><span class="line"></span><br><span class="line">lr_model_fit = lr_model.fit(X_train, y_train)</span><br><span class="line">final_preds = np.floor(np.expm1(lr_model_fit.predict(test)))</span><br><span class="line"><span class="built_in">print</span>(final_preds)</span><br></pre></td></tr></table></figure>

<pre><code>[109087. 160506. 181350. ... 167204. 109941. 204493.]
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">submission = pd.read_csv(DATA_PATH + <span class="string">&quot;sample_submission.csv&quot;</span>)</span><br><span class="line">submission.iloc[:,<span class="number">1</span>] = final_preds</span><br><span class="line"><span class="built_in">print</span>(submission.head())</span><br><span class="line">submission.to_csv(<span class="string">&quot;submission.csv&quot;</span>, index=<span class="literal">False</span>)</span><br></pre></td></tr></table></figure>

<pre><code>     Id  SalePrice
0  1461   109087.0
1  1462   160506.0
2  1463   181350.0
3  1464   195112.0
4  1465   189181.0
</code></pre>
<h2 id="모형-만들기"><a href="#모형-만들기" class="headerlink" title="모형 만들기"></a>모형 만들기</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># from sklearn.linear_model import LinearRegression</span></span><br><span class="line"><span class="comment"># lr_model = LinearRegression()</span></span><br><span class="line"><span class="comment"># lr_model.fit(X_train, y_train) </span></span><br><span class="line"></span><br><span class="line"><span class="comment"># print(lr_model.score(X_train, y_train))</span></span><br><span class="line"><span class="comment"># print(lr_model.score(X_test, y_test))</span></span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="entry-meta entry-footer">
      
      
      
    </footer>
    <hr class="entry-footer-hr">
  </div>
  
</article>

<!-- Table of Contents -->

  
    <article id="post-Day15_20220706"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/2022/07/06/Day15_20220706/">July 6, 2022, Day15</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	<a href="/2022/07/06/Day15_20220706/" class="article-date">
	  <time datetime="2022-07-06T00:22:22.000Z" itemprop="datePublished">July 6, 2022</time>
	</a>

       
      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="데이터-분석-머신러닝-딥러닝-프로세스"><a href="#데이터-분석-머신러닝-딥러닝-프로세스" class="headerlink" title="데이터 분석(머신러닝, 딥러닝) 프로세스"></a>데이터 분석(머신러닝, 딥러닝) 프로세스</h1><ul>
<li><p>데이터 불러오기</p>
<ul>
<li>csv, 오라클, MySQL, PostgreSQL, 클라우드 DB 연동</li>
</ul>
</li>
<li><p>탐색적 자료 분석</p>
<ul>
<li>데이터 전처리 및 가공</li>
</ul>
</li>
<li><p>잠정적인 컬럼의 갯수 지정</p>
</li>
<li><p>머신러닝 모델(&#x3D;통계 모델링, t.test, 분산분석, 교차분석)</p>
</li>
<li><p>머신러닝 모델의 경우 배포 (현재는 X)</p>
<ul>
<li>JSP 스프링 웹개발 시, 배울 예정</li>
</ul>
</li>
<li><p>통계 모델링의 경우, p-value 값 기준으로, 귀무가설 및 대립가설 검정</p>
</li>
<li><p>공통 : 결과 보고서 작성</p>
<ul>
<li>PPT 만들어야 함</li>
<li>중요도 50:50</li>
</ul>
</li>
</ul>
<h1 id="그래프-복습"><a href="#그래프-복습" class="headerlink" title="그래프 복습"></a>그래프 복습</h1><ul>
<li>수치형 데이터 시각화</li>
<li>범주형 데이터 시각화</li>
<li>데이터 관계 시각화</li>
<li>matplotlib 라이브러리 방법 (복잡)</li>
<li>seaborn 라이브러리 방법 (단순)<ul>
<li>복잡한 그래프를 그리려 할 때 –&gt; matplotlib</li>
<li>1줄 그래프 –&gt; seaborn</li>
</ul>
</li>
</ul>
<h3 id="수치형-데이터-시각화"><a href="#수치형-데이터-시각화" class="headerlink" title="수치형 데이터 시각화"></a>수치형 데이터 시각화</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> seaborn <span class="keyword">as</span> sns</span><br><span class="line">titanic = sns.load_dataset(<span class="string">&#x27;titanic&#x27;</span>)</span><br><span class="line">titanic.info()</span><br></pre></td></tr></table></figure>

<pre><code>&lt;class &#39;pandas.core.frame.DataFrame&#39;&gt;
RangeIndex: 891 entries, 0 to 890
Data columns (total 15 columns):
 #   Column       Non-Null Count  Dtype   
---  ------       --------------  -----   
 0   survived     891 non-null    int64   
 1   pclass       891 non-null    int64   
 2   sex          891 non-null    object  
 3   age          714 non-null    float64 
 4   sibsp        891 non-null    int64   
 5   parch        891 non-null    int64   
 6   fare         891 non-null    float64 
 7   embarked     889 non-null    object  
 8   class        891 non-null    category
 9   who          891 non-null    object  
 10  adult_male   891 non-null    bool    
 11  deck         203 non-null    category
 12  embark_town  889 non-null    object  
 13  alive        891 non-null    object  
 14  alone        891 non-null    bool    
dtypes: bool(2), category(2), float64(2), int64(4), object(5)
memory usage: 80.7+ KB
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 히스토그램</span></span><br><span class="line">sns.histplot(data = titanic, x = <span class="string">&#x27;age&#x27;</span>, bins = <span class="number">10</span>, hue = <span class="string">&#x27;alive&#x27;</span>, multiple = <span class="string">&#x27;stack&#x27;</span>)</span><br></pre></td></tr></table></figure>




<pre><code>&lt;matplotlib.axes._subplots.AxesSubplot at 0x7f5e000bbdd0&gt;
</code></pre>
<p><img src="/../images/Day15_20220706/output_4_1.png" alt="png"></p>
<ul>
<li>위 그래프를 보아하니 블라블라…</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 커널밀도추정 함수 그래프</span></span><br><span class="line"><span class="comment"># 연속형 데이터 1개만 쓸 때 사용</span></span><br><span class="line">sns.kdeplot(data = titanic, x = <span class="string">&#x27;age&#x27;</span>, hue = <span class="string">&#x27;alive&#x27;</span>, multiple = <span class="string">&#x27;stack&#x27;</span>)</span><br></pre></td></tr></table></figure>




<pre><code>&lt;matplotlib.axes._subplots.AxesSubplot at 0x7f5dffd36650&gt;
</code></pre>
<p><img src="/../images/Day15_20220706/output_6_1.png" alt="png"></p>
<h4 id="분포도"><a href="#분포도" class="headerlink" title="분포도"></a>분포도</h4><ul>
<li>수치형 데이터 한 개 컬럼의 분포를 나타내는 그래프</li>
<li>정규분포인가?<ul>
<li>평균을 0으로 잡음</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sns.displot(data = titanic, x = <span class="string">&#x27;age&#x27;</span>)</span><br></pre></td></tr></table></figure>




<pre><code>&lt;seaborn.axisgrid.FacetGrid at 0x7f5dffcfce50&gt;
</code></pre>
<p><img src="/../images/Day15_20220706/output_8_1.png" alt="png"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sns.displot(data = titanic, x = <span class="string">&#x27;age&#x27;</span>, kde = <span class="literal">True</span>)</span><br></pre></td></tr></table></figure>




<pre><code>&lt;seaborn.axisgrid.FacetGrid at 0x7f5dffd64250&gt;
</code></pre>
<p><img src="/../images/Day15_20220706/output_9_1.png" alt="png"></p>
<h2 id="범주형-데이터-시각화"><a href="#범주형-데이터-시각화" class="headerlink" title="범주형 데이터 시각화"></a>범주형 데이터 시각화</h2><ul>
<li>주 : x축 범주형, y축 수치 데이터</li>
<li>x축 범주형, y축 범주형<ul>
<li>히트맵</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 막대 그래프</span></span><br><span class="line">sns.barplot(x = <span class="string">&#x27;class&#x27;</span>, y = <span class="string">&#x27;fare&#x27;</span>, data = titanic)</span><br></pre></td></tr></table></figure>




<pre><code>&lt;matplotlib.axes._subplots.AxesSubplot at 0x7f5dffb84bd0&gt;
</code></pre>
<p><img src="/../images/Day15_20220706/output_11_1.png" alt="png"></p>
<ul>
<li>에러 바(오차막대) : 샘플링에서 나타나는 오차를 시각적으로 표시</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 포인트 플롯</span></span><br><span class="line">sns.pointplot(x = <span class="string">&#x27;class&#x27;</span>, y = <span class="string">&#x27;fare&#x27;</span>, data = titanic)</span><br></pre></td></tr></table></figure>




<pre><code>&lt;matplotlib.axes._subplots.AxesSubplot at 0x7f5dffad6a90&gt;
</code></pre>
<p><img src="/../images/Day15_20220706/output_13_1.png" alt="png"></p>
<ul>
<li>박스플롯<ul>
<li>제1사분위 : 전체 데이터 중 하위 25%</li>
<li>사분위 범위 수(IQR) : 제3사분위 - 제1사분위</li>
<li>최댓값 : 제3사분위 + (1.5 * 10)</li>
<li>최댓값 바깥의 데이터 : 이상치</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># boxplot</span></span><br><span class="line">sns.boxplot(x = <span class="string">&#x27;class&#x27;</span>, y = <span class="string">&#x27;age&#x27;</span>, data = titanic)</span><br></pre></td></tr></table></figure>




<pre><code>&lt;matplotlib.axes._subplots.AxesSubplot at 0x7f5dffab6dd0&gt;
</code></pre>
<p><img src="/../images/Day15_20220706/output_15_1.png" alt="png"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 바이올린플롯</span></span><br><span class="line">sns.violinplot(x = <span class="string">&#x27;class&#x27;</span>, y = <span class="string">&#x27;age&#x27;</span>, hue = <span class="string">&#x27;sex&#x27;</span>, data = titanic, split = <span class="literal">True</span>)</span><br></pre></td></tr></table></figure>




<pre><code>&lt;matplotlib.axes._subplots.AxesSubplot at 0x7f5dff9df5d0&gt;
</code></pre>
<p><img src="/../images/Day15_20220706/output_16_1.png" alt="png"></p>
<h4 id="카운트-플롯"><a href="#카운트-플롯" class="headerlink" title="카운트 플롯"></a>카운트 플롯</h4><ul>
<li>범주형 데이터의 빈도 수를 시각화</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sns.countplot(x = <span class="string">&#x27;alive&#x27;</span>, data = titanic)</span><br></pre></td></tr></table></figure>




<pre><code>&lt;matplotlib.axes._subplots.AxesSubplot at 0x7f5dff96a050&gt;
</code></pre>
<p><img src="/../images/Day15_20220706/output_18_1.png" alt="png"></p>
<h2 id="데이터-관계-시각화"><a href="#데이터-관계-시각화" class="headerlink" title="데이터 관계 시각화"></a>데이터 관계 시각화</h2><ul>
<li>여러 데이터 사이의 관계도를 파악하기 위한 그래프</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"></span><br><span class="line">df = pd.DataFrame(&#123;<span class="string">&#x27;foo&#x27;</span>: [<span class="string">&#x27;one&#x27;</span>, <span class="string">&#x27;one&#x27;</span>, <span class="string">&#x27;one&#x27;</span>, <span class="string">&#x27;two&#x27;</span>, <span class="string">&#x27;two&#x27;</span>,</span><br><span class="line">                           <span class="string">&#x27;two&#x27;</span>],</span><br><span class="line">                   <span class="string">&#x27;bar&#x27;</span>: [<span class="string">&#x27;A&#x27;</span>, <span class="string">&#x27;B&#x27;</span>, <span class="string">&#x27;C&#x27;</span>, <span class="string">&#x27;A&#x27;</span>, <span class="string">&#x27;B&#x27;</span>, <span class="string">&#x27;C&#x27;</span>],</span><br><span class="line">                   <span class="string">&#x27;baz&#x27;</span>: [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>],</span><br><span class="line">                   <span class="string">&#x27;zoo&#x27;</span>: [<span class="string">&#x27;x&#x27;</span>, <span class="string">&#x27;y&#x27;</span>, <span class="string">&#x27;z&#x27;</span>, <span class="string">&#x27;q&#x27;</span>, <span class="string">&#x27;w&#x27;</span>, <span class="string">&#x27;t&#x27;</span>]&#125;)</span><br><span class="line">df</span><br><span class="line"></span><br><span class="line">df.pivot(index = [<span class="string">&#x27;foo&#x27;</span>,<span class="string">&#x27;zoo&#x27;</span>], columns = <span class="string">&#x27;bar&#x27;</span>, values = <span class="string">&#x27;baz&#x27;</span>)</span><br></pre></td></tr></table></figure>





  <div id="df-a05f1ca0-6a27-453f-9709-d4f2ad9d70df">
    <div class="colab-df-container">
      <div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

<pre><code>.dataframe tbody tr th &#123;
    vertical-align: top;
&#125;

.dataframe thead th &#123;
    text-align: right;
&#125;
</code></pre>
<p></style></p>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>bar</th>
      <th>A</th>
      <th>B</th>
      <th>C</th>
    </tr>
    <tr>
      <th>foo</th>
      <th>zoo</th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th rowspan="3" valign="top">one</th>
      <th>x</th>
      <td>1.0</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>y</th>
      <td>NaN</td>
      <td>2.0</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>z</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>3.0</td>
    </tr>
    <tr>
      <th rowspan="3" valign="top">two</th>
      <th>q</th>
      <td>4.0</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>t</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>6.0</td>
    </tr>
    <tr>
      <th>w</th>
      <td>NaN</td>
      <td>5.0</td>
      <td>NaN</td>
    </tr>
  </tbody>
</table>
</div>
      <button class="colab-df-convert" onclick="convertToInteractive('df-a05f1ca0-6a27-453f-9709-d4f2ad9d70df')"
              title="Convert this dataframe to an interactive table."
              style="display:none;">

<p>  &lt;svg xmlns&#x3D;”<a target="_blank" rel="noopener" href="http://www.w3.org/2000/svg&quot;">http://www.w3.org/2000/svg&quot;</a> height&#x3D;”24px”viewBox&#x3D;”0 0 24 24”<br>       width&#x3D;”24px”&gt;<br>    <path d="M0 0h24v24H0V0z" fill="none"/><br>    <path d="M18.56 5.44l.94 2.06.94-2.06 2.06-.94-2.06-.94-.94-2.06-.94 2.06-2.06.94zm-11 1L8.5 8.5l.94-2.06 2.06-.94-2.06-.94L8.5 2.5l-.94 2.06-2.06.94zm10 10l.94 2.06.94-2.06 2.06-.94-2.06-.94-.94-2.06-.94 2.06-2.06.94z"/><path d="M17.41 7.96l-1.37-1.37c-.4-.4-.92-.59-1.43-.59-.52 0-1.04.2-1.43.59L10.3 9.45l-7.72 7.72c-.78.78-.78 2.05 0 2.83L4 21.41c.39.39.9.59 1.41.59.51 0 1.02-.2 1.41-.59l7.78-7.78 2.81-2.81c.8-.78.8-2.07 0-2.86zM5.41 20L4 18.59l7.72-7.72 1.47 1.35L5.41 20z"/><br>  </svg><br>      </button></p>
  <style>
    .colab-df-container {
      display:flex;
      flex-wrap:wrap;
      gap: 12px;
    }

    .colab-df-convert {
      background-color: #E8F0FE;
      border: none;
      border-radius: 50%;
      cursor: pointer;
      display: none;
      fill: #1967D2;
      height: 32px;
      padding: 0 0 0 0;
      width: 32px;
    }

    .colab-df-convert:hover {
      background-color: #E2EBFA;
      box-shadow: 0px 1px 2px rgba(60, 64, 67, 0.3), 0px 1px 3px 1px rgba(60, 64, 67, 0.15);
      fill: #174EA6;
    }

    [theme=dark] .colab-df-convert {
      background-color: #3B4455;
      fill: #D2E3FC;
    }

    [theme=dark] .colab-df-convert:hover {
      background-color: #434B5C;
      box-shadow: 0px 1px 3px 1px rgba(0, 0, 0, 0.15);
      filter: drop-shadow(0px 1px 2px rgba(0, 0, 0, 0.3));
      fill: #FFFFFF;
    }
  </style>

<pre><code>  &lt;script&gt;
    const buttonEl =
      document.querySelector(&#39;#df-a05f1ca0-6a27-453f-9709-d4f2ad9d70df button.colab-df-convert&#39;);
    buttonEl.style.display =
      google.colab.kernel.accessAllowed ? &#39;block&#39; : &#39;none&#39;;

    async function convertToInteractive(key) &#123;
      const element = document.querySelector(&#39;#df-a05f1ca0-6a27-453f-9709-d4f2ad9d70df&#39;);
      const dataTable =
        await google.colab.kernel.invokeFunction(&#39;convertToInteractive&#39;,
                                                 [key], &#123;&#125;);
      if (!dataTable) return;

      const docLinkHtml = &#39;Like what you see? Visit the &#39; +
        &#39;&lt;a target=&quot;_blank&quot; href=https://colab.research.google.com/notebooks/data_table.ipynb&gt;data table notebook&lt;/a&gt;&#39;
        + &#39; to learn more about interactive tables.&#39;;
      element.innerHTML = &#39;&#39;;
      dataTable[&#39;output_type&#39;] = &#39;display_data&#39;;
      await google.colab.output.renderOutput(dataTable, element);
      const docLink = document.createElement(&#39;div&#39;);
      docLink.innerHTML = docLinkHtml;
      element.appendChild(docLink);
    &#125;
  &lt;/script&gt;
&lt;/div&gt;
</code></pre>
  </div>





<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">flights = sns.load_dataset(<span class="string">&#x27;flights&#x27;</span>)</span><br><span class="line">flights.head()</span><br></pre></td></tr></table></figure>





  <div id="df-dab4c973-2840-4add-8bb7-644f6fc556db">
    <div class="colab-df-container">
      <div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

<pre><code>.dataframe tbody tr th &#123;
    vertical-align: top;
&#125;

.dataframe thead th &#123;
    text-align: right;
&#125;
</code></pre>
<p></style></p>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>year</th>
      <th>month</th>
      <th>passengers</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1949</td>
      <td>Jan</td>
      <td>112</td>
    </tr>
    <tr>
      <th>1</th>
      <td>1949</td>
      <td>Feb</td>
      <td>118</td>
    </tr>
    <tr>
      <th>2</th>
      <td>1949</td>
      <td>Mar</td>
      <td>132</td>
    </tr>
    <tr>
      <th>3</th>
      <td>1949</td>
      <td>Apr</td>
      <td>129</td>
    </tr>
    <tr>
      <th>4</th>
      <td>1949</td>
      <td>May</td>
      <td>121</td>
    </tr>
  </tbody>
</table>
</div>
      <button class="colab-df-convert" onclick="convertToInteractive('df-dab4c973-2840-4add-8bb7-644f6fc556db')"
              title="Convert this dataframe to an interactive table."
              style="display:none;">

<p>  &lt;svg xmlns&#x3D;”<a target="_blank" rel="noopener" href="http://www.w3.org/2000/svg&quot;">http://www.w3.org/2000/svg&quot;</a> height&#x3D;”24px”viewBox&#x3D;”0 0 24 24”<br>       width&#x3D;”24px”&gt;<br>    <path d="M0 0h24v24H0V0z" fill="none"/><br>    <path d="M18.56 5.44l.94 2.06.94-2.06 2.06-.94-2.06-.94-.94-2.06-.94 2.06-2.06.94zm-11 1L8.5 8.5l.94-2.06 2.06-.94-2.06-.94L8.5 2.5l-.94 2.06-2.06.94zm10 10l.94 2.06.94-2.06 2.06-.94-2.06-.94-.94-2.06-.94 2.06-2.06.94z"/><path d="M17.41 7.96l-1.37-1.37c-.4-.4-.92-.59-1.43-.59-.52 0-1.04.2-1.43.59L10.3 9.45l-7.72 7.72c-.78.78-.78 2.05 0 2.83L4 21.41c.39.39.9.59 1.41.59.51 0 1.02-.2 1.41-.59l7.78-7.78 2.81-2.81c.8-.78.8-2.07 0-2.86zM5.41 20L4 18.59l7.72-7.72 1.47 1.35L5.41 20z"/><br>  </svg><br>      </button></p>
  <style>
    .colab-df-container {
      display:flex;
      flex-wrap:wrap;
      gap: 12px;
    }

    .colab-df-convert {
      background-color: #E8F0FE;
      border: none;
      border-radius: 50%;
      cursor: pointer;
      display: none;
      fill: #1967D2;
      height: 32px;
      padding: 0 0 0 0;
      width: 32px;
    }

    .colab-df-convert:hover {
      background-color: #E2EBFA;
      box-shadow: 0px 1px 2px rgba(60, 64, 67, 0.3), 0px 1px 3px 1px rgba(60, 64, 67, 0.15);
      fill: #174EA6;
    }

    [theme=dark] .colab-df-convert {
      background-color: #3B4455;
      fill: #D2E3FC;
    }

    [theme=dark] .colab-df-convert:hover {
      background-color: #434B5C;
      box-shadow: 0px 1px 3px 1px rgba(0, 0, 0, 0.15);
      filter: drop-shadow(0px 1px 2px rgba(0, 0, 0, 0.3));
      fill: #FFFFFF;
    }
  </style>

<pre><code>  &lt;script&gt;
    const buttonEl =
      document.querySelector(&#39;#df-dab4c973-2840-4add-8bb7-644f6fc556db button.colab-df-convert&#39;);
    buttonEl.style.display =
      google.colab.kernel.accessAllowed ? &#39;block&#39; : &#39;none&#39;;

    async function convertToInteractive(key) &#123;
      const element = document.querySelector(&#39;#df-dab4c973-2840-4add-8bb7-644f6fc556db&#39;);
      const dataTable =
        await google.colab.kernel.invokeFunction(&#39;convertToInteractive&#39;,
                                                 [key], &#123;&#125;);
      if (!dataTable) return;

      const docLinkHtml = &#39;Like what you see? Visit the &#39; +
        &#39;&lt;a target=&quot;_blank&quot; href=https://colab.research.google.com/notebooks/data_table.ipynb&gt;data table notebook&lt;/a&gt;&#39;
        + &#39; to learn more about interactive tables.&#39;;
      element.innerHTML = &#39;&#39;;
      dataTable[&#39;output_type&#39;] = &#39;display_data&#39;;
      await google.colab.output.renderOutput(dataTable, element);
      const docLink = document.createElement(&#39;div&#39;);
      docLink.innerHTML = docLinkHtml;
      element.appendChild(docLink);
    &#125;
  &lt;/script&gt;
&lt;/div&gt;
</code></pre>
  </div>




<ul>
<li>각 연도별, 월별 승객수 구하기</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">flights[<span class="string">&#x27;year&#x27;</span>].value_counts()</span><br></pre></td></tr></table></figure>




<pre><code>1949    12
1950    12
1951    12
1952    12
1953    12
1954    12
1955    12
1956    12
1957    12
1958    12
1959    12
1960    12
Name: year, dtype: int64
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">flights_pivot = flights.pivot(index = <span class="string">&#x27;month&#x27;</span>, columns = <span class="string">&#x27;year&#x27;</span>, values = <span class="string">&#x27;passengers&#x27;</span>)</span><br><span class="line">flights_pivot</span><br></pre></td></tr></table></figure>





  <div id="df-6c3e1395-c633-4f38-9034-145f23ef577b">
    <div class="colab-df-container">
      <div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

<pre><code>.dataframe tbody tr th &#123;
    vertical-align: top;
&#125;

.dataframe thead th &#123;
    text-align: right;
&#125;
</code></pre>
<p></style></p>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th>year</th>
      <th>1949</th>
      <th>1950</th>
      <th>1951</th>
      <th>1952</th>
      <th>1953</th>
      <th>1954</th>
      <th>1955</th>
      <th>1956</th>
      <th>1957</th>
      <th>1958</th>
      <th>1959</th>
      <th>1960</th>
    </tr>
    <tr>
      <th>month</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>Jan</th>
      <td>112</td>
      <td>115</td>
      <td>145</td>
      <td>171</td>
      <td>196</td>
      <td>204</td>
      <td>242</td>
      <td>284</td>
      <td>315</td>
      <td>340</td>
      <td>360</td>
      <td>417</td>
    </tr>
    <tr>
      <th>Feb</th>
      <td>118</td>
      <td>126</td>
      <td>150</td>
      <td>180</td>
      <td>196</td>
      <td>188</td>
      <td>233</td>
      <td>277</td>
      <td>301</td>
      <td>318</td>
      <td>342</td>
      <td>391</td>
    </tr>
    <tr>
      <th>Mar</th>
      <td>132</td>
      <td>141</td>
      <td>178</td>
      <td>193</td>
      <td>236</td>
      <td>235</td>
      <td>267</td>
      <td>317</td>
      <td>356</td>
      <td>362</td>
      <td>406</td>
      <td>419</td>
    </tr>
    <tr>
      <th>Apr</th>
      <td>129</td>
      <td>135</td>
      <td>163</td>
      <td>181</td>
      <td>235</td>
      <td>227</td>
      <td>269</td>
      <td>313</td>
      <td>348</td>
      <td>348</td>
      <td>396</td>
      <td>461</td>
    </tr>
    <tr>
      <th>May</th>
      <td>121</td>
      <td>125</td>
      <td>172</td>
      <td>183</td>
      <td>229</td>
      <td>234</td>
      <td>270</td>
      <td>318</td>
      <td>355</td>
      <td>363</td>
      <td>420</td>
      <td>472</td>
    </tr>
    <tr>
      <th>Jun</th>
      <td>135</td>
      <td>149</td>
      <td>178</td>
      <td>218</td>
      <td>243</td>
      <td>264</td>
      <td>315</td>
      <td>374</td>
      <td>422</td>
      <td>435</td>
      <td>472</td>
      <td>535</td>
    </tr>
    <tr>
      <th>Jul</th>
      <td>148</td>
      <td>170</td>
      <td>199</td>
      <td>230</td>
      <td>264</td>
      <td>302</td>
      <td>364</td>
      <td>413</td>
      <td>465</td>
      <td>491</td>
      <td>548</td>
      <td>622</td>
    </tr>
    <tr>
      <th>Aug</th>
      <td>148</td>
      <td>170</td>
      <td>199</td>
      <td>242</td>
      <td>272</td>
      <td>293</td>
      <td>347</td>
      <td>405</td>
      <td>467</td>
      <td>505</td>
      <td>559</td>
      <td>606</td>
    </tr>
    <tr>
      <th>Sep</th>
      <td>136</td>
      <td>158</td>
      <td>184</td>
      <td>209</td>
      <td>237</td>
      <td>259</td>
      <td>312</td>
      <td>355</td>
      <td>404</td>
      <td>404</td>
      <td>463</td>
      <td>508</td>
    </tr>
    <tr>
      <th>Oct</th>
      <td>119</td>
      <td>133</td>
      <td>162</td>
      <td>191</td>
      <td>211</td>
      <td>229</td>
      <td>274</td>
      <td>306</td>
      <td>347</td>
      <td>359</td>
      <td>407</td>
      <td>461</td>
    </tr>
    <tr>
      <th>Nov</th>
      <td>104</td>
      <td>114</td>
      <td>146</td>
      <td>172</td>
      <td>180</td>
      <td>203</td>
      <td>237</td>
      <td>271</td>
      <td>305</td>
      <td>310</td>
      <td>362</td>
      <td>390</td>
    </tr>
    <tr>
      <th>Dec</th>
      <td>118</td>
      <td>140</td>
      <td>166</td>
      <td>194</td>
      <td>201</td>
      <td>229</td>
      <td>278</td>
      <td>306</td>
      <td>336</td>
      <td>337</td>
      <td>405</td>
      <td>432</td>
    </tr>
  </tbody>
</table>
</div>
      <button class="colab-df-convert" onclick="convertToInteractive('df-6c3e1395-c633-4f38-9034-145f23ef577b')"
              title="Convert this dataframe to an interactive table."
              style="display:none;">

<p>  &lt;svg xmlns&#x3D;”<a target="_blank" rel="noopener" href="http://www.w3.org/2000/svg&quot;">http://www.w3.org/2000/svg&quot;</a> height&#x3D;”24px”viewBox&#x3D;”0 0 24 24”<br>       width&#x3D;”24px”&gt;<br>    <path d="M0 0h24v24H0V0z" fill="none"/><br>    <path d="M18.56 5.44l.94 2.06.94-2.06 2.06-.94-2.06-.94-.94-2.06-.94 2.06-2.06.94zm-11 1L8.5 8.5l.94-2.06 2.06-.94-2.06-.94L8.5 2.5l-.94 2.06-2.06.94zm10 10l.94 2.06.94-2.06 2.06-.94-2.06-.94-.94-2.06-.94 2.06-2.06.94z"/><path d="M17.41 7.96l-1.37-1.37c-.4-.4-.92-.59-1.43-.59-.52 0-1.04.2-1.43.59L10.3 9.45l-7.72 7.72c-.78.78-.78 2.05 0 2.83L4 21.41c.39.39.9.59 1.41.59.51 0 1.02-.2 1.41-.59l7.78-7.78 2.81-2.81c.8-.78.8-2.07 0-2.86zM5.41 20L4 18.59l7.72-7.72 1.47 1.35L5.41 20z"/><br>  </svg><br>      </button></p>
  <style>
    .colab-df-container {
      display:flex;
      flex-wrap:wrap;
      gap: 12px;
    }

    .colab-df-convert {
      background-color: #E8F0FE;
      border: none;
      border-radius: 50%;
      cursor: pointer;
      display: none;
      fill: #1967D2;
      height: 32px;
      padding: 0 0 0 0;
      width: 32px;
    }

    .colab-df-convert:hover {
      background-color: #E2EBFA;
      box-shadow: 0px 1px 2px rgba(60, 64, 67, 0.3), 0px 1px 3px 1px rgba(60, 64, 67, 0.15);
      fill: #174EA6;
    }

    [theme=dark] .colab-df-convert {
      background-color: #3B4455;
      fill: #D2E3FC;
    }

    [theme=dark] .colab-df-convert:hover {
      background-color: #434B5C;
      box-shadow: 0px 1px 3px 1px rgba(0, 0, 0, 0.15);
      filter: drop-shadow(0px 1px 2px rgba(0, 0, 0, 0.3));
      fill: #FFFFFF;
    }
  </style>

<pre><code>  &lt;script&gt;
    const buttonEl =
      document.querySelector(&#39;#df-6c3e1395-c633-4f38-9034-145f23ef577b button.colab-df-convert&#39;);
    buttonEl.style.display =
      google.colab.kernel.accessAllowed ? &#39;block&#39; : &#39;none&#39;;

    async function convertToInteractive(key) &#123;
      const element = document.querySelector(&#39;#df-6c3e1395-c633-4f38-9034-145f23ef577b&#39;);
      const dataTable =
        await google.colab.kernel.invokeFunction(&#39;convertToInteractive&#39;,
                                                 [key], &#123;&#125;);
      if (!dataTable) return;

      const docLinkHtml = &#39;Like what you see? Visit the &#39; +
        &#39;&lt;a target=&quot;_blank&quot; href=https://colab.research.google.com/notebooks/data_table.ipynb&gt;data table notebook&lt;/a&gt;&#39;
        + &#39; to learn more about interactive tables.&#39;;
      element.innerHTML = &#39;&#39;;
      dataTable[&#39;output_type&#39;] = &#39;display_data&#39;;
      await google.colab.output.renderOutput(dataTable, element);
      const docLink = document.createElement(&#39;div&#39;);
      docLink.innerHTML = docLinkHtml;
      element.appendChild(docLink);
    &#125;
  &lt;/script&gt;
&lt;/div&gt;
</code></pre>
  </div>





<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sns.heatmap(data = flights_pivot)</span><br></pre></td></tr></table></figure>




<pre><code>&lt;matplotlib.axes._subplots.AxesSubplot at 0x7f5dff8dc610&gt;
</code></pre>
<p><img src="/../images/Day15_20220706/output_25_1.png" alt="png"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 라인플롯</span></span><br><span class="line">sns.lineplot(x = <span class="string">&#x27;year&#x27;</span>, y = <span class="string">&#x27;passengers&#x27;</span>, data = flights) </span><br></pre></td></tr></table></figure>




<pre><code>&lt;matplotlib.axes._subplots.AxesSubplot at 0x7f5dff81a390&gt;
</code></pre>
<p><img src="/../images/Day15_20220706/output_26_1.png" alt="png"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 산점도</span></span><br><span class="line">tips = sns.load_dataset(<span class="string">&#x27;tips&#x27;</span>)</span><br><span class="line">tips.head()</span><br></pre></td></tr></table></figure>





  <div id="df-5aa22058-5823-4022-9db0-53643865a165">
    <div class="colab-df-container">
      <div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

<pre><code>.dataframe tbody tr th &#123;
    vertical-align: top;
&#125;

.dataframe thead th &#123;
    text-align: right;
&#125;
</code></pre>
<p></style></p>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>total_bill</th>
      <th>tip</th>
      <th>sex</th>
      <th>smoker</th>
      <th>day</th>
      <th>time</th>
      <th>size</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>16.99</td>
      <td>1.01</td>
      <td>Female</td>
      <td>No</td>
      <td>Sun</td>
      <td>Dinner</td>
      <td>2</td>
    </tr>
    <tr>
      <th>1</th>
      <td>10.34</td>
      <td>1.66</td>
      <td>Male</td>
      <td>No</td>
      <td>Sun</td>
      <td>Dinner</td>
      <td>3</td>
    </tr>
    <tr>
      <th>2</th>
      <td>21.01</td>
      <td>3.50</td>
      <td>Male</td>
      <td>No</td>
      <td>Sun</td>
      <td>Dinner</td>
      <td>3</td>
    </tr>
    <tr>
      <th>3</th>
      <td>23.68</td>
      <td>3.31</td>
      <td>Male</td>
      <td>No</td>
      <td>Sun</td>
      <td>Dinner</td>
      <td>2</td>
    </tr>
    <tr>
      <th>4</th>
      <td>24.59</td>
      <td>3.61</td>
      <td>Female</td>
      <td>No</td>
      <td>Sun</td>
      <td>Dinner</td>
      <td>4</td>
    </tr>
  </tbody>
</table>
</div>
      <button class="colab-df-convert" onclick="convertToInteractive('df-5aa22058-5823-4022-9db0-53643865a165')"
              title="Convert this dataframe to an interactive table."
              style="display:none;">

<p>  &lt;svg xmlns&#x3D;”<a target="_blank" rel="noopener" href="http://www.w3.org/2000/svg&quot;">http://www.w3.org/2000/svg&quot;</a> height&#x3D;”24px”viewBox&#x3D;”0 0 24 24”<br>       width&#x3D;”24px”&gt;<br>    <path d="M0 0h24v24H0V0z" fill="none"/><br>    <path d="M18.56 5.44l.94 2.06.94-2.06 2.06-.94-2.06-.94-.94-2.06-.94 2.06-2.06.94zm-11 1L8.5 8.5l.94-2.06 2.06-.94-2.06-.94L8.5 2.5l-.94 2.06-2.06.94zm10 10l.94 2.06.94-2.06 2.06-.94-2.06-.94-.94-2.06-.94 2.06-2.06.94z"/><path d="M17.41 7.96l-1.37-1.37c-.4-.4-.92-.59-1.43-.59-.52 0-1.04.2-1.43.59L10.3 9.45l-7.72 7.72c-.78.78-.78 2.05 0 2.83L4 21.41c.39.39.9.59 1.41.59.51 0 1.02-.2 1.41-.59l7.78-7.78 2.81-2.81c.8-.78.8-2.07 0-2.86zM5.41 20L4 18.59l7.72-7.72 1.47 1.35L5.41 20z"/><br>  </svg><br>      </button></p>
  <style>
    .colab-df-container {
      display:flex;
      flex-wrap:wrap;
      gap: 12px;
    }

    .colab-df-convert {
      background-color: #E8F0FE;
      border: none;
      border-radius: 50%;
      cursor: pointer;
      display: none;
      fill: #1967D2;
      height: 32px;
      padding: 0 0 0 0;
      width: 32px;
    }

    .colab-df-convert:hover {
      background-color: #E2EBFA;
      box-shadow: 0px 1px 2px rgba(60, 64, 67, 0.3), 0px 1px 3px 1px rgba(60, 64, 67, 0.15);
      fill: #174EA6;
    }

    [theme=dark] .colab-df-convert {
      background-color: #3B4455;
      fill: #D2E3FC;
    }

    [theme=dark] .colab-df-convert:hover {
      background-color: #434B5C;
      box-shadow: 0px 1px 3px 1px rgba(0, 0, 0, 0.15);
      filter: drop-shadow(0px 1px 2px rgba(0, 0, 0, 0.3));
      fill: #FFFFFF;
    }
  </style>

<pre><code>  &lt;script&gt;
    const buttonEl =
      document.querySelector(&#39;#df-5aa22058-5823-4022-9db0-53643865a165 button.colab-df-convert&#39;);
    buttonEl.style.display =
      google.colab.kernel.accessAllowed ? &#39;block&#39; : &#39;none&#39;;

    async function convertToInteractive(key) &#123;
      const element = document.querySelector(&#39;#df-5aa22058-5823-4022-9db0-53643865a165&#39;);
      const dataTable =
        await google.colab.kernel.invokeFunction(&#39;convertToInteractive&#39;,
                                                 [key], &#123;&#125;);
      if (!dataTable) return;

      const docLinkHtml = &#39;Like what you see? Visit the &#39; +
        &#39;&lt;a target=&quot;_blank&quot; href=https://colab.research.google.com/notebooks/data_table.ipynb&gt;data table notebook&lt;/a&gt;&#39;
        + &#39; to learn more about interactive tables.&#39;;
      element.innerHTML = &#39;&#39;;
      dataTable[&#39;output_type&#39;] = &#39;display_data&#39;;
      await google.colab.output.renderOutput(dataTable, element);
      const docLink = document.createElement(&#39;div&#39;);
      docLink.innerHTML = docLinkHtml;
      element.appendChild(docLink);
    &#125;
  &lt;/script&gt;
&lt;/div&gt;
</code></pre>
  </div>




<ul>
<li>두 개의 연속형 데이터</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sns.scatterplot(x = <span class="string">&#x27;total_bill&#x27;</span>, y = <span class="string">&#x27;tip&#x27;</span>, hue = <span class="string">&#x27;sex&#x27;</span>, data = tips)</span><br></pre></td></tr></table></figure>




<pre><code>&lt;matplotlib.axes._subplots.AxesSubplot at 0x7f5e00581390&gt;
</code></pre>
<p><img src="/../images/Day15_20220706/output_29_1.png" alt="png"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 회귀선</span></span><br><span class="line">sns.regplot(x = <span class="string">&#x27;total_bill&#x27;</span>, y = <span class="string">&#x27;tip&#x27;</span>, data = tips)</span><br></pre></td></tr></table></figure>




<pre><code>&lt;matplotlib.axes._subplots.AxesSubplot at 0x7f5dff878f10&gt;
</code></pre>
<p><img src="/../images/Day15_20220706/output_30_1.png" alt="png"></p>
<h1 id="머신러닝-리뷰"><a href="#머신러닝-리뷰" class="headerlink" title="머신러닝 리뷰"></a>머신러닝 리뷰</h1><ul>
<li>가장 인기 있는 모델<ul>
<li>LightGBM, XGBoost</li>
</ul>
</li>
</ul>
<h3 id="선형-회귀"><a href="#선형-회귀" class="headerlink" title="선형 회귀"></a>선형 회귀</h3><ul>
<li>선형 회귀식을 찾는 것이 중요</li>
<li>$y &#x3D; 3x + 4$에 근사한 데이터 50개 생성</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"></span><br><span class="line"><span class="comment"># 시드값 고정</span></span><br><span class="line">np.random.seed(<span class="number">0</span>)</span><br><span class="line">intercept = <span class="number">4</span> <span class="comment"># 절편, 상수</span></span><br><span class="line">slope = <span class="number">3</span> <span class="comment"># 기울기</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 변동성 주기 위해 노이즈 생성</span></span><br><span class="line">noise = np.random.randn(<span class="number">50</span>, <span class="number">1</span>)</span><br><span class="line">x = <span class="number">5</span> * np.random.randn(<span class="number">50</span>, <span class="number">1</span>)   <span class="comment"># 0과  사이의 실수값 50개 생성</span></span><br><span class="line">y = slope * x + intercept + noise</span><br><span class="line"></span><br><span class="line"><span class="comment"># 데이터 프레임 생성</span></span><br><span class="line">data = pd.DataFrame(</span><br><span class="line">    &#123; <span class="string">&#x27;X&#x27;</span> : x[:, <span class="number">0</span>], </span><br><span class="line">      <span class="string">&#x27;Y&#x27;</span> : y[:, <span class="number">0</span>]&#125;</span><br><span class="line">)</span><br><span class="line">data</span><br></pre></td></tr></table></figure>





  <div id="df-1c98d0f0-684c-4b69-bc49-90c68adb9270">
    <div class="colab-df-container">
      <div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

<pre><code>.dataframe tbody tr th &#123;
    vertical-align: top;
&#125;

.dataframe thead th &#123;
    text-align: right;
&#125;
</code></pre>
<p></style></p>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>X</th>
      <th>Y</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>-4.477333</td>
      <td>-7.667946</td>
    </tr>
    <tr>
      <th>1</th>
      <td>1.934512</td>
      <td>10.203695</td>
    </tr>
    <tr>
      <th>2</th>
      <td>-2.554026</td>
      <td>-2.683339</td>
    </tr>
    <tr>
      <th>3</th>
      <td>-5.903161</td>
      <td>-11.468590</td>
    </tr>
    <tr>
      <th>4</th>
      <td>-0.140911</td>
      <td>5.444825</td>
    </tr>
    <tr>
      <th>5</th>
      <td>2.141659</td>
      <td>9.447700</td>
    </tr>
    <tr>
      <th>6</th>
      <td>0.332586</td>
      <td>5.947847</td>
    </tr>
    <tr>
      <th>7</th>
      <td>1.512359</td>
      <td>8.385721</td>
    </tr>
    <tr>
      <th>8</th>
      <td>-3.171610</td>
      <td>-5.618050</td>
    </tr>
    <tr>
      <th>9</th>
      <td>-1.813706</td>
      <td>-1.030519</td>
    </tr>
    <tr>
      <th>10</th>
      <td>-3.362302</td>
      <td>-5.942863</td>
    </tr>
    <tr>
      <th>11</th>
      <td>-1.797766</td>
      <td>0.060976</td>
    </tr>
    <tr>
      <th>12</th>
      <td>-4.065731</td>
      <td>-7.436157</td>
    </tr>
    <tr>
      <th>13</th>
      <td>-8.631413</td>
      <td>-21.772564</td>
    </tr>
    <tr>
      <th>14</th>
      <td>0.887131</td>
      <td>7.105255</td>
    </tr>
    <tr>
      <th>15</th>
      <td>-2.008905</td>
      <td>-1.693040</td>
    </tr>
    <tr>
      <th>16</th>
      <td>-8.150992</td>
      <td>-18.958896</td>
    </tr>
    <tr>
      <th>17</th>
      <td>2.313911</td>
      <td>10.736576</td>
    </tr>
    <tr>
      <th>18</th>
      <td>-4.536492</td>
      <td>-9.296408</td>
    </tr>
    <tr>
      <th>19</th>
      <td>0.259727</td>
      <td>3.925085</td>
    </tr>
    <tr>
      <th>20</th>
      <td>3.645453</td>
      <td>12.383369</td>
    </tr>
    <tr>
      <th>21</th>
      <td>0.644915</td>
      <td>6.588362</td>
    </tr>
    <tr>
      <th>22</th>
      <td>5.697003</td>
      <td>21.955446</td>
    </tr>
    <tr>
      <th>23</th>
      <td>-6.174129</td>
      <td>-15.264552</td>
    </tr>
    <tr>
      <th>24</th>
      <td>2.011708</td>
      <td>12.304879</td>
    </tr>
    <tr>
      <th>25</th>
      <td>-3.424050</td>
      <td>-7.726517</td>
    </tr>
    <tr>
      <th>26</th>
      <td>-4.353986</td>
      <td>-9.016199</td>
    </tr>
    <tr>
      <th>27</th>
      <td>-2.894248</td>
      <td>-4.869929</td>
    </tr>
    <tr>
      <th>28</th>
      <td>-1.557763</td>
      <td>0.859491</td>
    </tr>
    <tr>
      <th>29</th>
      <td>0.280827</td>
      <td>6.311839</td>
    </tr>
    <tr>
      <th>30</th>
      <td>-5.825749</td>
      <td>-13.322300</td>
    </tr>
    <tr>
      <th>31</th>
      <td>4.504132</td>
      <td>17.890560</td>
    </tr>
    <tr>
      <th>32</th>
      <td>2.328312</td>
      <td>10.097151</td>
    </tr>
    <tr>
      <th>33</th>
      <td>-7.681218</td>
      <td>-21.024452</td>
    </tr>
    <tr>
      <th>34</th>
      <td>7.441261</td>
      <td>25.975871</td>
    </tr>
    <tr>
      <th>35</th>
      <td>9.479446</td>
      <td>32.594687</td>
    </tr>
    <tr>
      <th>36</th>
      <td>5.893898</td>
      <td>22.911984</td>
    </tr>
    <tr>
      <th>37</th>
      <td>-0.899624</td>
      <td>2.503507</td>
    </tr>
    <tr>
      <th>38</th>
      <td>-5.353763</td>
      <td>-12.448616</td>
    </tr>
    <tr>
      <th>39</th>
      <td>5.272259</td>
      <td>19.514473</td>
    </tr>
    <tr>
      <th>40</th>
      <td>-2.015885</td>
      <td>-3.096207</td>
    </tr>
    <tr>
      <th>41</th>
      <td>6.112225</td>
      <td>20.916658</td>
    </tr>
    <tr>
      <th>42</th>
      <td>1.041375</td>
      <td>5.417854</td>
    </tr>
    <tr>
      <th>43</th>
      <td>4.883195</td>
      <td>20.600361</td>
    </tr>
    <tr>
      <th>44</th>
      <td>1.781832</td>
      <td>8.835844</td>
    </tr>
    <tr>
      <th>45</th>
      <td>3.532866</td>
      <td>14.160523</td>
    </tr>
    <tr>
      <th>46</th>
      <td>0.052500</td>
      <td>2.904705</td>
    </tr>
    <tr>
      <th>47</th>
      <td>8.929352</td>
      <td>31.565548</td>
    </tr>
    <tr>
      <th>48</th>
      <td>0.634560</td>
      <td>4.289784</td>
    </tr>
    <tr>
      <th>49</th>
      <td>2.009947</td>
      <td>9.817100</td>
    </tr>
  </tbody>
</table>
</div>
      <button class="colab-df-convert" onclick="convertToInteractive('df-1c98d0f0-684c-4b69-bc49-90c68adb9270')"
              title="Convert this dataframe to an interactive table."
              style="display:none;">

<p>  &lt;svg xmlns&#x3D;”<a target="_blank" rel="noopener" href="http://www.w3.org/2000/svg&quot;">http://www.w3.org/2000/svg&quot;</a> height&#x3D;”24px”viewBox&#x3D;”0 0 24 24”<br>       width&#x3D;”24px”&gt;<br>    <path d="M0 0h24v24H0V0z" fill="none"/><br>    <path d="M18.56 5.44l.94 2.06.94-2.06 2.06-.94-2.06-.94-.94-2.06-.94 2.06-2.06.94zm-11 1L8.5 8.5l.94-2.06 2.06-.94-2.06-.94L8.5 2.5l-.94 2.06-2.06.94zm10 10l.94 2.06.94-2.06 2.06-.94-2.06-.94-.94-2.06-.94 2.06-2.06.94z"/><path d="M17.41 7.96l-1.37-1.37c-.4-.4-.92-.59-1.43-.59-.52 0-1.04.2-1.43.59L10.3 9.45l-7.72 7.72c-.78.78-.78 2.05 0 2.83L4 21.41c.39.39.9.59 1.41.59.51 0 1.02-.2 1.41-.59l7.78-7.78 2.81-2.81c.8-.78.8-2.07 0-2.86zM5.41 20L4 18.59l7.72-7.72 1.47 1.35L5.41 20z"/><br>  </svg><br>      </button></p>
  <style>
    .colab-df-container {
      display:flex;
      flex-wrap:wrap;
      gap: 12px;
    }

    .colab-df-convert {
      background-color: #E8F0FE;
      border: none;
      border-radius: 50%;
      cursor: pointer;
      display: none;
      fill: #1967D2;
      height: 32px;
      padding: 0 0 0 0;
      width: 32px;
    }

    .colab-df-convert:hover {
      background-color: #E2EBFA;
      box-shadow: 0px 1px 2px rgba(60, 64, 67, 0.3), 0px 1px 3px 1px rgba(60, 64, 67, 0.15);
      fill: #174EA6;
    }

    [theme=dark] .colab-df-convert {
      background-color: #3B4455;
      fill: #D2E3FC;
    }

    [theme=dark] .colab-df-convert:hover {
      background-color: #434B5C;
      box-shadow: 0px 1px 3px 1px rgba(0, 0, 0, 0.15);
      filter: drop-shadow(0px 1px 2px rgba(0, 0, 0, 0.3));
      fill: #FFFFFF;
    }
  </style>

<pre><code>  &lt;script&gt;
    const buttonEl =
      document.querySelector(&#39;#df-1c98d0f0-684c-4b69-bc49-90c68adb9270 button.colab-df-convert&#39;);
    buttonEl.style.display =
      google.colab.kernel.accessAllowed ? &#39;block&#39; : &#39;none&#39;;

    async function convertToInteractive(key) &#123;
      const element = document.querySelector(&#39;#df-1c98d0f0-684c-4b69-bc49-90c68adb9270&#39;);
      const dataTable =
        await google.colab.kernel.invokeFunction(&#39;convertToInteractive&#39;,
                                                 [key], &#123;&#125;);
      if (!dataTable) return;

      const docLinkHtml = &#39;Like what you see? Visit the &#39; +
        &#39;&lt;a target=&quot;_blank&quot; href=https://colab.research.google.com/notebooks/data_table.ipynb&gt;data table notebook&lt;/a&gt;&#39;
        + &#39; to learn more about interactive tables.&#39;;
      element.innerHTML = &#39;&#39;;
      dataTable[&#39;output_type&#39;] = &#39;display_data&#39;;
      await google.colab.output.renderOutput(dataTable, element);
      const docLink = document.createElement(&#39;div&#39;);
      docLink.innerHTML = docLinkHtml;
      element.appendChild(docLink);
    &#125;
  &lt;/script&gt;
&lt;/div&gt;
</code></pre>
  </div>





<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line">fig, ax = plt.subplots()</span><br><span class="line">ax.scatter(data[<span class="string">&#x27;X&#x27;</span>], data[<span class="string">&#x27;Y&#x27;</span>])</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>


<p><img src="/../images/Day15_20220706/output_34_0.png" alt="png"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> seaborn <span class="keyword">as</span> sns</span><br><span class="line">sns.scatterplot(x = <span class="string">&#x27;X&#x27;</span>, y = <span class="string">&#x27;Y&#x27;</span>, data = data)</span><br></pre></td></tr></table></figure>




<pre><code>&lt;matplotlib.axes._subplots.AxesSubplot at 0x7f5dff6ae910&gt;
</code></pre>
<p><img src="/../images/Day15_20220706/output_35_1.png" alt="png"></p>
<h4 id="선형회귀-모형-훈련"><a href="#선형회귀-모형-훈련" class="headerlink" title="선형회귀 모형 훈련"></a>선형회귀 모형 훈련</h4><ul>
<li>모형 생성 후, 회귀계수 3과 y절편 4에 근사한 값이 나와야</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> sklearn.linear_model <span class="keyword">import</span> LinearRegression</span><br><span class="line">lr_model = LinearRegression()</span><br><span class="line">lr_model.fit(x, y)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;Y절편 : &quot;</span>, lr_model.intercept_)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;회귀계수 : &quot;</span>, lr_model.coef_)</span><br></pre></td></tr></table></figure>

<pre><code>Y절편 :  [4.13895039]
회귀계수 :  [[2.98463581]]
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 예측값</span></span><br><span class="line">y_pred = lr_model.predict(x)</span><br><span class="line">fig, ax = plt.subplots()</span><br><span class="line">ax.scatter(x, y)</span><br><span class="line">ax.plot(x, y_pred, color = <span class="string">&quot;green&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># slope, intercept </span></span><br><span class="line">label = <span class="string">&#x27;slope: &#123;&#125;\nintercept: &#123;&#125;&#x27;</span>.<span class="built_in">format</span>(<span class="built_in">round</span>(lr_model.coef_[<span class="number">0</span>][<span class="number">0</span>], <span class="number">2</span>), <span class="built_in">round</span>(lr_model.intercept_[<span class="number">0</span>], <span class="number">2</span>))</span><br><span class="line">ax.text(<span class="number">3.5</span>, <span class="number">4</span>, label, style =<span class="string">&#x27;italic&#x27;</span>, </span><br><span class="line">        fontsize = <span class="number">10</span>, color =<span class="string">&quot;green&quot;</span>)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>


<p><img src="/../images/Day15_20220706/output_38_0.png" alt="png"></p>
<h3 id="로지스틱-회귀"><a href="#로지스틱-회귀" class="headerlink" title="로지스틱 회귀"></a>로지스틱 회귀</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">sigmoid</span>(<span class="params">arr, scale=<span class="number">1</span></span>):</span><br><span class="line">    arr = np.asarray(arr)</span><br><span class="line">    result = <span class="number">1</span>/(<span class="number">1</span> + np.exp(-arr*scale))</span><br><span class="line">    <span class="keyword">return</span> result</span><br><span class="line"></span><br><span class="line">x = np.linspace(-<span class="number">6</span>, <span class="number">6</span>)</span><br><span class="line">y = sigmoid(x)</span><br><span class="line"></span><br><span class="line">fig, ax = plt.subplots()</span><br><span class="line">ax.plot(x, y)</span><br><span class="line">ax.grid(which=<span class="string">&#x27;major&#x27;</span>, axis=<span class="string">&#x27;y&#x27;</span>, linestyle=<span class="string">&#x27;--&#x27;</span>)</span><br><span class="line">ax.axvline(x=<span class="number">0</span>, color=<span class="string">&#x27;r&#x27;</span>, linestyle=<span class="string">&#x27;--&#x27;</span>, linewidth=<span class="number">1</span>)</span><br><span class="line">ax.set_ylim(<span class="number">0</span>,<span class="number">1</span>)</span><br><span class="line">ax.set_yticks([<span class="number">0</span>, <span class="number">1</span>, <span class="number">0.5</span>])</span><br><span class="line">ax.text(<span class="number">0</span>-<span class="number">0.1</span>, <span class="number">0.5</span>, <span class="string">&#x27;0.5&#x27;</span>, ha=<span class="string">&#x27;right&#x27;</span>)</span><br><span class="line">ax.set_title(<span class="string">&#x27;Sigmoid Graph&#x27;</span>)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>


<p><img src="/../images/Day15_20220706/output_40_0.png" alt="png"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 라이브러리 불러오기</span></span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">from</span> sklearn.linear_model <span class="keyword">import</span> LogisticRegression</span><br><span class="line"><span class="keyword">from</span> sklearn.metrics <span class="keyword">import</span> classification_report, confusion_matrix</span><br><span class="line"></span><br><span class="line"><span class="comment"># 데이터 가져오기</span></span><br><span class="line">x = np.arange(<span class="number">10</span>).reshape(-<span class="number">1</span>, <span class="number">1</span>)</span><br><span class="line">y = np.array([<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment"># 모델 생성 및 학습</span></span><br><span class="line">model = LogisticRegression(solver=<span class="string">&#x27;liblinear&#x27;</span>, C=<span class="number">10.0</span>, random_state=<span class="number">0</span>)</span><br><span class="line">model.fit(x, y)</span><br></pre></td></tr></table></figure>




<pre><code>LogisticRegression(C=10.0, random_state=0, solver=&#39;liblinear&#39;)
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 모형 평가</span></span><br><span class="line">p_pred = model.predict_proba(x)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;p_pred&quot;</span>, p_pred, sep = <span class="string">&quot;\n&quot;</span>)</span><br></pre></td></tr></table></figure>

<pre><code>p_pred
[[0.97979027 0.02020973]
 [0.94958202 0.05041798]
 [0.87976149 0.12023851]
 [0.73975066 0.26024934]
 [0.52477284 0.47522716]
 [0.30020373 0.69979627]
 [0.1428487  0.8571513 ]
 [0.06080627 0.93919373]
 [0.02453462 0.97546538]
 [0.00967652 0.99032348]]
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">y_pred = model.predict(x)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;y_pred&quot;</span>, y_pred)</span><br></pre></td></tr></table></figure>

<pre><code>y_pred [0 0 0 0 0 1 1 1 1 1]
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">fig, ax = plt.subplots()</span><br><span class="line">ax.scatter(x, y)</span><br><span class="line">ax.plot(x, p_pred[:, <span class="number">1</span>], color = <span class="string">&#x27;black&#x27;</span>,  marker=<span class="string">&#x27;o&#x27;</span>, markersize=<span class="number">6</span>)</span><br><span class="line">ax.plot()</span><br><span class="line"></span><br><span class="line">ax.set_xticks(x)</span><br><span class="line">ax.set_yticks(np.arange(<span class="number">0</span>, <span class="number">1.1</span>, <span class="number">0.1</span>))</span><br><span class="line"></span><br><span class="line">ax.grid(which=<span class="string">&#x27;major&#x27;</span>, alpha=<span class="number">0.5</span>)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>


<p><img src="/../images/Day15_20220706/output_44_0.png" alt="png"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">conf_m = confusion_matrix(y, y_pred)</span><br><span class="line"><span class="built_in">print</span>(conf_m)</span><br></pre></td></tr></table></figure>

<pre><code>[[5 0]
 [0 5]]
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">cm = confusion_matrix(y, y_pred)</span><br><span class="line"></span><br><span class="line">fig, ax = plt.subplots(figsize=(<span class="number">8</span>, <span class="number">8</span>))</span><br><span class="line">ax.imshow(cm, cmap = <span class="string">&#x27;YlOrRd&#x27;</span>)</span><br><span class="line">ax.grid(<span class="literal">False</span>)</span><br><span class="line">ax.xaxis.<span class="built_in">set</span>(ticks=(<span class="number">0</span>, <span class="number">1</span>), ticklabels=(<span class="string">&#x27;Predicted 0&#x27;</span>, <span class="string">&#x27;Predicted 1&#x27;</span>))</span><br><span class="line">ax.yaxis.<span class="built_in">set</span>(ticks=(<span class="number">0</span>, <span class="number">1</span>), ticklabels=(<span class="string">&#x27;Actual 0&#x27;</span>, <span class="string">&#x27;Actual 1&#x27;</span>))</span><br><span class="line">ax.set_ylim(<span class="number">1.5</span>, -<span class="number">0.5</span>)</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">2</span>):</span><br><span class="line">    <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">2</span>):</span><br><span class="line">        ax.text(j, i, cm[i, j], ha=<span class="string">&#x27;center&#x27;</span>, va=<span class="string">&#x27;center&#x27;</span>, color=<span class="string">&#x27;black&#x27;</span>, fontsize=<span class="number">20</span>)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>


<p><img src="/../images/Day15_20220706/output_46_0.png" alt="png"></p>
<h3 id="결정-트리"><a href="#결정-트리" class="headerlink" title="결정 트리"></a>결정 트리</h3><h4 id="주요-개념"><a href="#주요-개념" class="headerlink" title="주요 개념"></a>주요 개념</h4><ul>
<li>작동 원리<ul>
<li>데이터를 가장 잘 구분하는 조건을 정함.</li>
<li>조건을 기준으로 데이터를 두 범주로 나눔</li>
<li>나뉜 각 범주의 데이터를 구분하는 조건을 정함</li>
<li>각 조건을 기준으로 데이터를 두 범주로 나눔</li>
<li>언제까지 계속 분할할지 정한 후, 최종 결정 값을 구함.</li>
</ul>
</li>
<li>불순도(Impurity)<ul>
<li>한 범주 안에 서로 다른 데이터가 얼마나 섞여 있는지 나타냄</li>
<li>흰색과 검은색이 50:50으로 섞여 있다. (불순도 최대)</li>
<li>흰색과 검은색으로 완전 분리 되었다. (불순도 최소)</li>
</ul>
</li>
<li>엔트로피(Entropy)<ul>
<li>불확실한 정도를 의미함. 0 ~ 1로 정함.</li>
<li>흰색과 검은색이 50:50으로 섞여 있다. 엔트로피 1</li>
<li>흰색과 검은색으로 완전 분리 되었다. 엔트로피 0</li>
</ul>
</li>
<li>정보이득(Information Gain)<ul>
<li>1에서 엔트로피를 뺀 수치</li>
<li>정보 이득을 최대화하는 방향(엔트로피를 최소화 하는 방향)으로 노드를 분할함</li>
</ul>
</li>
<li>지니 불순도(Gini Impurity)<ul>
<li>지니 불순도 값이 클수록 불순도도 높고, 작을수록 불순도도 낮음. 엔트로피와 마찬가지로 지니 불순도가 낮아지는 방향으로 노드 분할함.</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> sklearn.tree <span class="keyword">import</span> DecisionTreeClassifier</span><br><span class="line"><span class="keyword">from</span> sklearn.model_selection <span class="keyword">import</span> train_test_split </span><br><span class="line"><span class="keyword">import</span> seaborn <span class="keyword">as</span> sns</span><br><span class="line"></span><br><span class="line">titanic = sns.load_dataset(<span class="string">&#x27;titanic&#x27;</span>)</span><br><span class="line">titanic.info()</span><br></pre></td></tr></table></figure>

<pre><code>&lt;class &#39;pandas.core.frame.DataFrame&#39;&gt;
RangeIndex: 891 entries, 0 to 890
Data columns (total 15 columns):
 #   Column       Non-Null Count  Dtype   
---  ------       --------------  -----   
 0   survived     891 non-null    int64   
 1   pclass       891 non-null    int64   
 2   sex          891 non-null    object  
 3   age          714 non-null    float64 
 4   sibsp        891 non-null    int64   
 5   parch        891 non-null    int64   
 6   fare         891 non-null    float64 
 7   embarked     889 non-null    object  
 8   class        891 non-null    category
 9   who          891 non-null    object  
 10  adult_male   891 non-null    bool    
 11  deck         203 non-null    category
 12  embark_town  889 non-null    object  
 13  alive        891 non-null    object  
 14  alone        891 non-null    bool    
dtypes: bool(2), category(2), float64(2), int64(4), object(5)
memory usage: 80.7+ KB
</code></pre>
<ul>
<li>survived의 비율을 구함<ul>
<li>0 : 사망자</li>
<li>1 : 생존자</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">titanic[<span class="string">&#x27;survived&#x27;</span>].value_counts()</span><br></pre></td></tr></table></figure>




<pre><code>0    549
1    342
Name: survived, dtype: int64
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">X = titanic[[<span class="string">&#x27;pclass&#x27;</span>, <span class="string">&#x27;parch&#x27;</span>, <span class="string">&#x27;fare&#x27;</span>]]</span><br><span class="line">y = titanic[<span class="string">&#x27;survived&#x27;</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 훈련데이터, 테스트 데이터 분리</span></span><br><span class="line">X_train, X_test, y_train, y_test = train_test_split(X, y, stratify = y, test_size = <span class="number">0.3</span>, random_state=<span class="number">42</span>)</span><br><span class="line">X_train.shape, X_test.shape, y_train.shape, y_test.shape</span><br></pre></td></tr></table></figure>




<pre><code>((623, 3), (268, 3), (623,), (268,))
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">tree_model = DecisionTreeClassifier()</span><br><span class="line">tree_model.fit(X_train, y_train)</span><br><span class="line"></span><br><span class="line">acc = tree_model.score(X_test, y_test)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&#x27;모형 정확도 : <span class="subst">&#123;acc:<span class="number">.3</span>f&#125;</span>&#x27;</span>) <span class="comment"># 정확도 측정</span></span><br></pre></td></tr></table></figure>

<pre><code>모형 정확도 : 0.675
</code></pre>
<h3 id="랜덤-포레스트"><a href="#랜덤-포레스트" class="headerlink" title="랜덤 포레스트"></a>랜덤 포레스트</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> sklearn.ensemble <span class="keyword">import</span> RandomForestClassifier</span><br><span class="line"><span class="keyword">from</span> sklearn.model_selection <span class="keyword">import</span> train_test_split </span><br><span class="line"><span class="keyword">import</span> seaborn <span class="keyword">as</span> sns </span><br><span class="line"></span><br><span class="line"><span class="comment"># tips 데이터셋 </span></span><br><span class="line">titanic = sns.load_dataset(<span class="string">&#x27;titanic&#x27;</span>)</span><br><span class="line"></span><br><span class="line">X = titanic[[<span class="string">&#x27;pclass&#x27;</span>, <span class="string">&#x27;parch&#x27;</span>, <span class="string">&#x27;fare&#x27;</span>]]</span><br><span class="line">y = titanic[<span class="string">&#x27;survived&#x27;</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 훈련데이터, 테스트 데이터 분리</span></span><br><span class="line">X_train, X_test, y_train, y_test = train_test_split(X, y, stratify = y, test_size = <span class="number">0.3</span>, random_state=<span class="number">42</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 모델 훈련</span></span><br><span class="line">rf_model = RandomForestClassifier(random_state=<span class="number">42</span>) <span class="comment"># 랜덤 포레스트 정의</span></span><br><span class="line">rf_model.fit(X_train, y_train)</span><br><span class="line"></span><br><span class="line">acc = rf_model.score(X_test, y_test)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&#x27;모형 정확도 : <span class="subst">&#123;acc:<span class="number">.3</span>f&#125;</span>&#x27;</span>) <span class="comment"># 정확도 측정</span></span><br></pre></td></tr></table></figure>

<pre><code>모형 정확도 : 0.675
</code></pre>
<h2 id="XGBoost-amp-LightGBM-2016-2017"><a href="#XGBoost-amp-LightGBM-2016-2017" class="headerlink" title="XGBoost &amp; LightGBM (2016 ~ 2017)"></a>XGBoost &amp; LightGBM (2016 ~ 2017)</h2><ul>
<li>전통적인 머신러닝 알고리즘의 융합<ul>
<li>선형회귀 릿지 라쏘, 과적합 방지 위한 규제</li>
<li>결정 트리의 핵심적인 알고리즘</li>
<li>경사 하강법</li>
<li>부스팅 기법</li>
</ul>
</li>
<li>문제점 : 파라미터의 개수가 매우 많음</li>
<li>각광 받는 이유<ul>
<li>모델 학습 속도</li>
<li>모델의 성능<ul>
<li>가장 좋은 모델이란 학습 속도가 빠르면서 성능이 좋은 것 (지금까지 나온 알고리즘과 비교했을 때)</li>
</ul>
</li>
</ul>
</li>
<li>개발자 테크트리 : Python 시작<ul>
<li>JAVA, C, C++</li>
<li>C, C++ &#x2F; R data.table 패키지</li>
</ul>
</li>
<li>큰 회사들이 개발<ul>
<li>첫 번째 옵션 : 자체적으로 배포하자 –&gt; Python Wrapper API<ul>
<li>R, 머신러닝 프레임워크 종류多</li>
</ul>
</li>
<li>두 번째 옵션 : Python 프레임워크는 Scikit-Learn으로 통일<ul>
<li>Python 머신러닝 &#x3D; Scikit-Learn에서 쉽게 쓸 수 있도록 개발, Scikit-Learn Wrapper API</li>
</ul>
</li>
</ul>
</li>
<li>★ 문법적으로 차이가 있다는 것을 확인 ★</li>
</ul>
<h3 id="XGBoost-Python-Wrapper-API-방식"><a href="#XGBoost-Python-Wrapper-API-방식" class="headerlink" title="XGBoost Python Wrapper API 방식"></a>XGBoost Python Wrapper API 방식</h3><ul>
<li>X_train, Y_train</li>
<li>각 모듈에 맞도록 행렬을 재변환해야 함</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> xgboost <span class="keyword">as</span> xgb</span><br><span class="line"><span class="keyword">from</span> sklearn.model_selection <span class="keyword">import</span> train_test_split</span><br><span class="line"><span class="keyword">import</span> seaborn <span class="keyword">as</span> sns</span><br><span class="line"></span><br><span class="line"><span class="comment"># titanic</span></span><br><span class="line">titanic = sns.load_dataset(<span class="string">&#x27;titanic&#x27;</span>)</span><br><span class="line">titanic.info()</span><br><span class="line"></span><br><span class="line"><span class="comment"># X -&gt; 독립변수, y -&gt; 종속변수</span></span><br><span class="line">X = titanic[[<span class="string">&#x27;pclass&#x27;</span>, <span class="string">&#x27;parch&#x27;</span>, <span class="string">&#x27;fare&#x27;</span>]]</span><br><span class="line">y = titanic[<span class="string">&#x27;survived&#x27;</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment">#훈련데이터, 테스트 데이터 분리</span></span><br><span class="line">X_train, X_test, Y_train, Y_test = train_test_split(X,</span><br><span class="line">                                                    y,</span><br><span class="line">                                                    stratify = y,</span><br><span class="line">                                                    test_size = <span class="number">0.3</span>,</span><br><span class="line">                                                    random_state = <span class="number">42</span>)</span><br><span class="line"></span><br><span class="line">X_train.shape, X_test.shape, Y_train.shape, Y_test.shape</span><br></pre></td></tr></table></figure>

<pre><code>&lt;class &#39;pandas.core.frame.DataFrame&#39;&gt;
RangeIndex: 891 entries, 0 to 890
Data columns (total 15 columns):
 #   Column       Non-Null Count  Dtype   
---  ------       --------------  -----   
 0   survived     891 non-null    int64   
 1   pclass       891 non-null    int64   
 2   sex          891 non-null    object  
 3   age          714 non-null    float64 
 4   sibsp        891 non-null    int64   
 5   parch        891 non-null    int64   
 6   fare         891 non-null    float64 
 7   embarked     889 non-null    object  
 8   class        891 non-null    category
 9   who          891 non-null    object  
 10  adult_male   891 non-null    bool    
 11  deck         203 non-null    category
 12  embark_town  889 non-null    object  
 13  alive        891 non-null    object  
 14  alone        891 non-null    bool    
dtypes: bool(2), category(2), float64(2), int64(4), object(5)
memory usage: 80.7+ KB





((623, 3), (268, 3), (623,), (268,))
</code></pre>
<ul>
<li>여기가 핵심</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">dtrain = xgb.DMatrix(data = X_train, label = y_train)</span><br><span class="line">dtest = xgb.DMatrix(data = X_test, label = y_test)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(dtrain)</span><br></pre></td></tr></table></figure>

<pre><code>&lt;xgboost.core.DMatrix object at 0x7f5dffde0090&gt;
</code></pre>
<ul>
<li>머신러닝 코드</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># xgb.train</span></span><br><span class="line">params = &#123;</span><br><span class="line">    <span class="string">&#x27;max_depth&#x27;</span> : <span class="number">3</span>,</span><br><span class="line">    <span class="string">&#x27;n_estimators&#x27;</span> : <span class="number">100</span>,</span><br><span class="line">    <span class="string">&#x27;eta&#x27;</span> : <span class="number">0.1</span>,    <span class="comment"># 학습률</span></span><br><span class="line">    <span class="string">&#x27;object&#x27;</span> : <span class="string">&#x27;binary:logistic&#x27;</span>    <span class="comment"># 이진 분류/다중 분류/회귀 중 선택</span></span><br><span class="line">&#125;</span><br><span class="line">num_rounds = <span class="number">400</span></span><br><span class="line"></span><br><span class="line">w_list = [(dtrain, <span class="string">&#x27;train&#x27;</span>), (dtest,<span class="string">&#x27;test&#x27;</span>)]</span><br><span class="line">xgb_ml = xgb.train(params = params,</span><br><span class="line">                   dtrain = dtrain, </span><br><span class="line">                   num_boost_round = <span class="number">400</span>,</span><br><span class="line">                   early_stopping_rounds = <span class="number">100</span>,</span><br><span class="line">                   evals = w_list)</span><br></pre></td></tr></table></figure>

<pre><code>[0]	train-rmse:0.487915	test-rmse:0.490146
Multiple eval metrics have been passed: &#39;test-rmse&#39; will be used for early stopping.

Will train until test-rmse hasn&#39;t improved in 100 rounds.
[1]	train-rmse:0.477856	test-rmse:0.482183
[2]	train-rmse:0.470061	test-rmse:0.47532
[3]	train-rmse:0.462182	test-rmse:0.470924
[4]	train-rmse:0.45572	test-rmse:0.466351
[5]	train-rmse:0.450354	test-rmse:0.462927
[6]	train-rmse:0.445683	test-rmse:0.459554
[7]	train-rmse:0.441298	test-rmse:0.458577
[8]	train-rmse:0.437792	test-rmse:0.456831
[9]	train-rmse:0.434393	test-rmse:0.456526
[10]	train-rmse:0.431726	test-rmse:0.455362
[11]	train-rmse:0.428592	test-rmse:0.454746
[12]	train-rmse:0.426484	test-rmse:0.454121
[13]	train-rmse:0.423992	test-rmse:0.453891
[14]	train-rmse:0.421947	test-rmse:0.453115
[15]	train-rmse:0.42036	test-rmse:0.452995
[16]	train-rmse:0.418512	test-rmse:0.452991
[17]	train-rmse:0.417025	test-rmse:0.452558
[18]	train-rmse:0.415955	test-rmse:0.45293
[19]	train-rmse:0.41396	test-rmse:0.453367
[20]	train-rmse:0.413199	test-rmse:0.453852
[21]	train-rmse:0.412091	test-rmse:0.453547
[22]	train-rmse:0.410501	test-rmse:0.4541
[23]	train-rmse:0.409461	test-rmse:0.453524
[24]	train-rmse:0.408469	test-rmse:0.453724
[25]	train-rmse:0.407781	test-rmse:0.454117
[26]	train-rmse:0.406954	test-rmse:0.454325
[27]	train-rmse:0.405708	test-rmse:0.454997
[28]	train-rmse:0.405121	test-rmse:0.455545
[29]	train-rmse:0.404449	test-rmse:0.455746
[30]	train-rmse:0.403643	test-rmse:0.45576
[31]	train-rmse:0.403092	test-rmse:0.456029
[32]	train-rmse:0.40252	test-rmse:0.456502
[33]	train-rmse:0.401617	test-rmse:0.456903
[34]	train-rmse:0.401175	test-rmse:0.457341
[35]	train-rmse:0.40015	test-rmse:0.458455
[36]	train-rmse:0.399748	test-rmse:0.458725
[37]	train-rmse:0.398984	test-rmse:0.45933
[38]	train-rmse:0.3982	test-rmse:0.459086
[39]	train-rmse:0.397529	test-rmse:0.459736
[40]	train-rmse:0.39734	test-rmse:0.460037
[41]	train-rmse:0.396627	test-rmse:0.460473
[42]	train-rmse:0.396461	test-rmse:0.460603
[43]	train-rmse:0.395537	test-rmse:0.460408
[44]	train-rmse:0.395255	test-rmse:0.460791
[45]	train-rmse:0.394568	test-rmse:0.461165
[46]	train-rmse:0.39406	test-rmse:0.461553
[47]	train-rmse:0.393351	test-rmse:0.461595
[48]	train-rmse:0.393206	test-rmse:0.461718
[49]	train-rmse:0.392991	test-rmse:0.462002
[50]	train-rmse:0.392352	test-rmse:0.461921
[51]	train-rmse:0.391973	test-rmse:0.462235
[52]	train-rmse:0.391844	test-rmse:0.462413
[53]	train-rmse:0.391345	test-rmse:0.462503
[54]	train-rmse:0.391184	test-rmse:0.462824
[55]	train-rmse:0.391068	test-rmse:0.462939
[56]	train-rmse:0.390596	test-rmse:0.462163
[57]	train-rmse:0.390164	test-rmse:0.462743
[58]	train-rmse:0.389861	test-rmse:0.463045
[59]	train-rmse:0.389441	test-rmse:0.462628
[60]	train-rmse:0.389339	test-rmse:0.462737
[61]	train-rmse:0.388745	test-rmse:0.462942
[62]	train-rmse:0.388405	test-rmse:0.462691
[63]	train-rmse:0.388277	test-rmse:0.463041
[64]	train-rmse:0.387828	test-rmse:0.463243
[65]	train-rmse:0.387614	test-rmse:0.463214
[66]	train-rmse:0.387088	test-rmse:0.463584
[67]	train-rmse:0.386906	test-rmse:0.463627
[68]	train-rmse:0.386444	test-rmse:0.463517
[69]	train-rmse:0.385685	test-rmse:0.463735
[70]	train-rmse:0.385353	test-rmse:0.463113
[71]	train-rmse:0.384828	test-rmse:0.463005
[72]	train-rmse:0.38444	test-rmse:0.462966
[73]	train-rmse:0.383198	test-rmse:0.462825
[74]	train-rmse:0.382841	test-rmse:0.462947
[75]	train-rmse:0.382416	test-rmse:0.463253
[76]	train-rmse:0.381966	test-rmse:0.462963
[77]	train-rmse:0.381655	test-rmse:0.463399
[78]	train-rmse:0.381399	test-rmse:0.463326
[79]	train-rmse:0.380593	test-rmse:0.463277
[80]	train-rmse:0.380329	test-rmse:0.463051
[81]	train-rmse:0.380233	test-rmse:0.46316
[82]	train-rmse:0.379942	test-rmse:0.463234
[83]	train-rmse:0.379686	test-rmse:0.463517
[84]	train-rmse:0.37893	test-rmse:0.463051
[85]	train-rmse:0.378841	test-rmse:0.463287
[86]	train-rmse:0.378756	test-rmse:0.463389
[87]	train-rmse:0.378501	test-rmse:0.463446
[88]	train-rmse:0.378011	test-rmse:0.463085
[89]	train-rmse:0.377178	test-rmse:0.46281
[90]	train-rmse:0.376872	test-rmse:0.462851
[91]	train-rmse:0.376563	test-rmse:0.46331
[92]	train-rmse:0.376317	test-rmse:0.463088
[93]	train-rmse:0.376049	test-rmse:0.463515
[94]	train-rmse:0.375914	test-rmse:0.463486
[95]	train-rmse:0.375643	test-rmse:0.463194
[96]	train-rmse:0.375378	test-rmse:0.463459
[97]	train-rmse:0.375145	test-rmse:0.46375
[98]	train-rmse:0.37453	test-rmse:0.463309
[99]	train-rmse:0.374021	test-rmse:0.463431
[100]	train-rmse:0.373289	test-rmse:0.463593
[101]	train-rmse:0.373032	test-rmse:0.463798
[102]	train-rmse:0.372814	test-rmse:0.464226
[103]	train-rmse:0.372443	test-rmse:0.464454
[104]	train-rmse:0.372217	test-rmse:0.464417
[105]	train-rmse:0.372145	test-rmse:0.464435
[106]	train-rmse:0.371726	test-rmse:0.464241
[107]	train-rmse:0.37158	test-rmse:0.464172
[108]	train-rmse:0.371396	test-rmse:0.464582
[109]	train-rmse:0.371335	test-rmse:0.4646
[110]	train-rmse:0.371127	test-rmse:0.464403
[111]	train-rmse:0.371001	test-rmse:0.464328
[112]	train-rmse:0.370928	test-rmse:0.464546
[113]	train-rmse:0.370688	test-rmse:0.464457
[114]	train-rmse:0.370634	test-rmse:0.464475
[115]	train-rmse:0.37042	test-rmse:0.464819
[116]	train-rmse:0.37007	test-rmse:0.46479
[117]	train-rmse:0.369921	test-rmse:0.464798
Stopping. Best iteration:
[17]	train-rmse:0.417025	test-rmse:0.452558
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 평가</span></span><br><span class="line"><span class="keyword">from</span> sklearn.metrics <span class="keyword">import</span> accuracy_score</span><br><span class="line">pred_probs = xgb_ml.predict(dtest)</span><br><span class="line">y_pred = [<span class="number">1</span> <span class="keyword">if</span> x &gt; <span class="number">0.5</span> <span class="keyword">else</span> <span class="number">0</span> <span class="keyword">for</span> x <span class="keyword">in</span>  pred_probs]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 예측 라벨과 실제 라벨 사이의 정확도 측정</span></span><br><span class="line">accuracy_score(y_pred, y_test)</span><br></pre></td></tr></table></figure>




<pre><code>0.6977611940298507
</code></pre>
<h3 id="XGBoost-Scikit-Learn-API-방식"><a href="#XGBoost-Scikit-Learn-API-방식" class="headerlink" title="XGBoost Scikit-Learn API 방식"></a>XGBoost Scikit-Learn API 방식</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> sklearn.tree <span class="keyword">import</span> DecisionTreeClassifier</span><br><span class="line"><span class="keyword">from</span> xgboost <span class="keyword">import</span> XGBClassifier     <span class="comment"># API</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># dt = DecisionTreeClassifier()</span></span><br><span class="line">xgb_model = XGBClassifier(objective = <span class="string">&#x27;binary:logistic&#x27;</span>,</span><br><span class="line">                          n_estimators = <span class="number">100</span>,</span><br><span class="line">                          max_depth = <span class="number">3</span>,</span><br><span class="line">                          learning_rate = <span class="number">0.1</span>,</span><br><span class="line">                          num_rounds = <span class="number">400</span>,</span><br><span class="line">                          random_state = <span class="number">42</span>)</span><br><span class="line"></span><br><span class="line">w_list = [(X_train, y_train), (X_test, y_test)]</span><br><span class="line"></span><br><span class="line">xgb_model.fit(X_train, y_train, eval_set = w_list, eval_metric = <span class="string">&#x27;error&#x27;</span>, verbose = <span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line">y_probas = xgb_model.predict_proba(X_test)</span><br><span class="line">y_pred = [<span class="number">1</span> <span class="keyword">if</span> x &gt; <span class="number">0.5</span> <span class="keyword">else</span> <span class="number">0</span> <span class="keyword">for</span> x <span class="keyword">in</span>  pred_probs]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 예측 라벨과 실제 라벨 사이의 정확도 측정</span></span><br><span class="line">accuracy_score(y_pred, y_test)</span><br></pre></td></tr></table></figure>

<pre><code>[0]	validation_0-error:0.260032	validation_1-error:0.302239
[1]	validation_0-error:0.260032	validation_1-error:0.302239
[2]	validation_0-error:0.260032	validation_1-error:0.302239
[3]	validation_0-error:0.260032	validation_1-error:0.302239
[4]	validation_0-error:0.260032	validation_1-error:0.302239
[5]	validation_0-error:0.260032	validation_1-error:0.302239
[6]	validation_0-error:0.260032	validation_1-error:0.302239
[7]	validation_0-error:0.260032	validation_1-error:0.302239
[8]	validation_0-error:0.260032	validation_1-error:0.302239
[9]	validation_0-error:0.260032	validation_1-error:0.302239
[10]	validation_0-error:0.260032	validation_1-error:0.302239
[11]	validation_0-error:0.260032	validation_1-error:0.302239
[12]	validation_0-error:0.260032	validation_1-error:0.302239
[13]	validation_0-error:0.247191	validation_1-error:0.298507
[14]	validation_0-error:0.247191	validation_1-error:0.298507
[15]	validation_0-error:0.248796	validation_1-error:0.302239
[16]	validation_0-error:0.248796	validation_1-error:0.302239
[17]	validation_0-error:0.248796	validation_1-error:0.302239
[18]	validation_0-error:0.248796	validation_1-error:0.302239
[19]	validation_0-error:0.248796	validation_1-error:0.302239
[20]	validation_0-error:0.248796	validation_1-error:0.302239
[21]	validation_0-error:0.248796	validation_1-error:0.302239
[22]	validation_0-error:0.248796	validation_1-error:0.302239
[23]	validation_0-error:0.248796	validation_1-error:0.302239
[24]	validation_0-error:0.248796	validation_1-error:0.302239
[25]	validation_0-error:0.248796	validation_1-error:0.302239
[26]	validation_0-error:0.248796	validation_1-error:0.302239
[27]	validation_0-error:0.248796	validation_1-error:0.302239
[28]	validation_0-error:0.247191	validation_1-error:0.302239
[29]	validation_0-error:0.247191	validation_1-error:0.302239
[30]	validation_0-error:0.247191	validation_1-error:0.302239
[31]	validation_0-error:0.243981	validation_1-error:0.298507
[32]	validation_0-error:0.247191	validation_1-error:0.302239
[33]	validation_0-error:0.243981	validation_1-error:0.298507
[34]	validation_0-error:0.243981	validation_1-error:0.298507
[35]	validation_0-error:0.242376	validation_1-error:0.294776
[36]	validation_0-error:0.24077	validation_1-error:0.294776
[37]	validation_0-error:0.24077	validation_1-error:0.294776
[38]	validation_0-error:0.24077	validation_1-error:0.294776
[39]	validation_0-error:0.24077	validation_1-error:0.294776
[40]	validation_0-error:0.24077	validation_1-error:0.294776
[41]	validation_0-error:0.24077	validation_1-error:0.294776
[42]	validation_0-error:0.24077	validation_1-error:0.294776
[43]	validation_0-error:0.24077	validation_1-error:0.294776
[44]	validation_0-error:0.24077	validation_1-error:0.302239
[45]	validation_0-error:0.24077	validation_1-error:0.302239
[46]	validation_0-error:0.24077	validation_1-error:0.302239
[47]	validation_0-error:0.24077	validation_1-error:0.302239
[48]	validation_0-error:0.24077	validation_1-error:0.302239
[49]	validation_0-error:0.24077	validation_1-error:0.302239
[50]	validation_0-error:0.24077	validation_1-error:0.302239
[51]	validation_0-error:0.24077	validation_1-error:0.302239
[52]	validation_0-error:0.23435	validation_1-error:0.302239
[53]	validation_0-error:0.23435	validation_1-error:0.302239
[54]	validation_0-error:0.232745	validation_1-error:0.298507
[55]	validation_0-error:0.229535	validation_1-error:0.298507
[56]	validation_0-error:0.229535	validation_1-error:0.298507
[57]	validation_0-error:0.229535	validation_1-error:0.298507
[58]	validation_0-error:0.229535	validation_1-error:0.298507
[59]	validation_0-error:0.227929	validation_1-error:0.294776
[60]	validation_0-error:0.227929	validation_1-error:0.298507
[61]	validation_0-error:0.227929	validation_1-error:0.298507
[62]	validation_0-error:0.227929	validation_1-error:0.298507
[63]	validation_0-error:0.227929	validation_1-error:0.298507
[64]	validation_0-error:0.227929	validation_1-error:0.298507
[65]	validation_0-error:0.227929	validation_1-error:0.298507
[66]	validation_0-error:0.227929	validation_1-error:0.298507
[67]	validation_0-error:0.227929	validation_1-error:0.298507
[68]	validation_0-error:0.227929	validation_1-error:0.298507
[69]	validation_0-error:0.227929	validation_1-error:0.298507
[70]	validation_0-error:0.227929	validation_1-error:0.298507
[71]	validation_0-error:0.227929	validation_1-error:0.298507
[72]	validation_0-error:0.227929	validation_1-error:0.302239
[73]	validation_0-error:0.227929	validation_1-error:0.302239
[74]	validation_0-error:0.229535	validation_1-error:0.30597
[75]	validation_0-error:0.229535	validation_1-error:0.30597
[76]	validation_0-error:0.229535	validation_1-error:0.30597
[77]	validation_0-error:0.229535	validation_1-error:0.30597
[78]	validation_0-error:0.229535	validation_1-error:0.30597
[79]	validation_0-error:0.229535	validation_1-error:0.30597
[80]	validation_0-error:0.229535	validation_1-error:0.30597
[81]	validation_0-error:0.229535	validation_1-error:0.30597
[82]	validation_0-error:0.229535	validation_1-error:0.30597
[83]	validation_0-error:0.229535	validation_1-error:0.30597
[84]	validation_0-error:0.229535	validation_1-error:0.30597
[85]	validation_0-error:0.229535	validation_1-error:0.30597
[86]	validation_0-error:0.229535	validation_1-error:0.30597
[87]	validation_0-error:0.229535	validation_1-error:0.30597
[88]	validation_0-error:0.229535	validation_1-error:0.30597
[89]	validation_0-error:0.229535	validation_1-error:0.30597
[90]	validation_0-error:0.229535	validation_1-error:0.30597
[91]	validation_0-error:0.229535	validation_1-error:0.30597
[92]	validation_0-error:0.229535	validation_1-error:0.30597
[93]	validation_0-error:0.229535	validation_1-error:0.30597
[94]	validation_0-error:0.227929	validation_1-error:0.313433
[95]	validation_0-error:0.226324	validation_1-error:0.313433
[96]	validation_0-error:0.223114	validation_1-error:0.317164
[97]	validation_0-error:0.223114	validation_1-error:0.317164
[98]	validation_0-error:0.223114	validation_1-error:0.317164
[99]	validation_0-error:0.223114	validation_1-error:0.317164





0.6977611940298507
</code></pre>
<h3 id="LightGBM-Python-Wrapper-방식"><a href="#LightGBM-Python-Wrapper-방식" class="headerlink" title="LightGBM Python Wrapper 방식"></a>LightGBM Python Wrapper 방식</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># XGBoost 코드와 유사</span></span><br><span class="line"><span class="keyword">import</span> lightgbm <span class="keyword">as</span> lgb </span><br><span class="line"><span class="keyword">from</span> sklearn.model_selection <span class="keyword">import</span> train_test_split </span><br><span class="line"><span class="keyword">from</span> sklearn.metrics <span class="keyword">import</span> accuracy_score</span><br><span class="line"><span class="keyword">import</span> seaborn <span class="keyword">as</span> sns </span><br><span class="line"></span><br><span class="line"><span class="comment"># tips 데이터셋 </span></span><br><span class="line">titanic = sns.load_dataset(<span class="string">&#x27;titanic&#x27;</span>)</span><br><span class="line"></span><br><span class="line">X = titanic[[<span class="string">&#x27;pclass&#x27;</span>, <span class="string">&#x27;parch&#x27;</span>, <span class="string">&#x27;fare&#x27;</span>]]</span><br><span class="line">y = titanic[<span class="string">&#x27;survived&#x27;</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 훈련데이터, 테스트 데이터 분리</span></span><br><span class="line">X_train, X_test, y_train, y_test = train_test_split(X, y, stratify = y, test_size = <span class="number">0.3</span>, random_state=<span class="number">42</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># XGBoost 코드와 유사하다. </span></span><br><span class="line">dtrain = lgb.Dataset(data = X_train, label = y_train)</span><br><span class="line">dtest = lgb.Dataset(data = X_test, label = y_test)</span><br><span class="line"></span><br><span class="line">params = &#123;<span class="string">&#x27;max_depth&#x27;</span>:<span class="number">3</span>,</span><br><span class="line">          <span class="string">&#x27;n_estimators&#x27;</span>:<span class="number">100</span>,</span><br><span class="line">          <span class="string">&#x27;learning_rate&#x27;</span>: <span class="number">0.1</span>,</span><br><span class="line">          <span class="string">&#x27;objective&#x27;</span>:<span class="string">&#x27;binary&#x27;</span>,</span><br><span class="line">          <span class="string">&#x27;metric&#x27;</span> : <span class="string">&#x27;binary_error&#x27;</span>, </span><br><span class="line">          <span class="string">&#x27;num_boost_round&#x27;</span> : <span class="number">400</span>, </span><br><span class="line">          <span class="string">&#x27;verbose&#x27;</span> : <span class="number">1</span>&#125; </span><br><span class="line"></span><br><span class="line">w_list = [dtrain, dtest]</span><br><span class="line">lgb_ml = lgb.train(params=params, train_set = dtrain,\</span><br><span class="line">                  early_stopping_rounds=<span class="number">100</span>, valid_sets= w_list)</span><br><span class="line"></span><br><span class="line">pred_probs = lgb_ml.predict(X_test)</span><br><span class="line">y_pred=[<span class="number">1</span> <span class="keyword">if</span> x &gt; <span class="number">0.5</span> <span class="keyword">else</span> <span class="number">0</span> <span class="keyword">for</span> x <span class="keyword">in</span> pred_probs]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 예측 라벨과 실제 라벨 사이의 정확도 측정</span></span><br><span class="line">accuracy_score(y_pred, y_test)</span><br></pre></td></tr></table></figure>

<h3 id="LightGBM-Scikit-Learn-API-방식"><a href="#LightGBM-Scikit-Learn-API-방식" class="headerlink" title="LightGBM Scikit-Learn API 방식"></a>LightGBM Scikit-Learn API 방식</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> lightgbm <span class="keyword">import</span> LGBMClassifier</span><br><span class="line"><span class="keyword">from</span> sklearn.metrics <span class="keyword">import</span> accuracy_score</span><br><span class="line"></span><br><span class="line"><span class="comment"># model </span></span><br><span class="line">w_list = [dtrain, dtest]</span><br><span class="line">model = LGBMClassifier(objective = <span class="string">&#x27;binary&#x27;</span>, </span><br><span class="line">                       metric = <span class="string">&#x27;binary_error&#x27;</span>,</span><br><span class="line">                       n_estimators=<span class="number">100</span>, </span><br><span class="line">                       learning_rate=<span class="number">0.1</span>, </span><br><span class="line">                       max_depth=<span class="number">3</span>, </span><br><span class="line">                       num_boost_round = <span class="number">400</span>,</span><br><span class="line">                       random_state = <span class="number">32</span>)</span><br><span class="line">model.fit(X_train, </span><br><span class="line">          y_train, </span><br><span class="line">          eval_set = [(X_train, y_train), (X_test, y_test)], </span><br><span class="line">          verbose=<span class="number">1</span>,</span><br><span class="line">          early_stopping_rounds = <span class="number">100</span>)</span><br><span class="line">y_probas = model.predict_proba(X_test) </span><br><span class="line">y_pred=[<span class="number">1</span> <span class="keyword">if</span> x &gt; <span class="number">0.5</span> <span class="keyword">else</span> <span class="number">0</span> <span class="keyword">for</span> x <span class="keyword">in</span> y_probas[:, <span class="number">1</span>]] <span class="comment"># 예측 라벨(0과 1로 예측)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 예측 라벨과 실제 라벨 사이의 정확도 측정</span></span><br><span class="line">accuracy_score(y_pred, y_test)</span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="entry-meta entry-footer">
      
      
      
    </footer>
    <hr class="entry-footer-hr">
  </div>
  
</article>

<!-- Table of Contents -->

  
    <article id="post-Review_Test"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/2022/07/06/Review_Test/">July 6, 2022, Day15</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	<a href="/2022/07/06/Review_Test/" class="article-date">
	  <time datetime="2022-07-05T22:22:22.000Z" itemprop="datePublished">July 6, 2022</time>
	</a>

       
      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> seaborn <span class="keyword">as</span> sns</span><br><span class="line">titanic = sns.load_dataset(<span class="string">&#x27;titanic&#x27;</span>)</span><br><span class="line">titanic.info()</span><br><span class="line">titanic.head(<span class="number">10</span>)</span><br></pre></td></tr></table></figure>

<pre><code>&lt;class &#39;pandas.core.frame.DataFrame&#39;&gt;
RangeIndex: 891 entries, 0 to 890
Data columns (total 15 columns):
 #   Column       Non-Null Count  Dtype   
---  ------       --------------  -----   
 0   survived     891 non-null    int64   
 1   pclass       891 non-null    int64   
 2   sex          891 non-null    object  
 3   age          714 non-null    float64 
 4   sibsp        891 non-null    int64   
 5   parch        891 non-null    int64   
 6   fare         891 non-null    float64 
 7   embarked     889 non-null    object  
 8   class        891 non-null    category
 9   who          891 non-null    object  
 10  adult_male   891 non-null    bool    
 11  deck         203 non-null    category
 12  embark_town  889 non-null    object  
 13  alive        891 non-null    object  
 14  alone        891 non-null    bool    
dtypes: bool(2), category(2), float64(2), int64(4), object(5)
memory usage: 80.7+ KB
</code></pre>
  <div id="df-5b46856c-14e7-43b0-87d8-184603a46837">
    <div class="colab-df-container">
      <div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

<pre><code>.dataframe tbody tr th &#123;
    vertical-align: top;
&#125;

.dataframe thead th &#123;
    text-align: right;
&#125;
</code></pre>
<p></style></p>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>survived</th>
      <th>pclass</th>
      <th>sex</th>
      <th>age</th>
      <th>sibsp</th>
      <th>parch</th>
      <th>fare</th>
      <th>embarked</th>
      <th>class</th>
      <th>who</th>
      <th>adult_male</th>
      <th>deck</th>
      <th>embark_town</th>
      <th>alive</th>
      <th>alone</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>0</td>
      <td>3</td>
      <td>male</td>
      <td>22.0</td>
      <td>1</td>
      <td>0</td>
      <td>7.2500</td>
      <td>S</td>
      <td>Third</td>
      <td>man</td>
      <td>True</td>
      <td>NaN</td>
      <td>Southampton</td>
      <td>no</td>
      <td>False</td>
    </tr>
    <tr>
      <th>1</th>
      <td>1</td>
      <td>1</td>
      <td>female</td>
      <td>38.0</td>
      <td>1</td>
      <td>0</td>
      <td>71.2833</td>
      <td>C</td>
      <td>First</td>
      <td>woman</td>
      <td>False</td>
      <td>C</td>
      <td>Cherbourg</td>
      <td>yes</td>
      <td>False</td>
    </tr>
    <tr>
      <th>2</th>
      <td>1</td>
      <td>3</td>
      <td>female</td>
      <td>26.0</td>
      <td>0</td>
      <td>0</td>
      <td>7.9250</td>
      <td>S</td>
      <td>Third</td>
      <td>woman</td>
      <td>False</td>
      <td>NaN</td>
      <td>Southampton</td>
      <td>yes</td>
      <td>True</td>
    </tr>
    <tr>
      <th>3</th>
      <td>1</td>
      <td>1</td>
      <td>female</td>
      <td>35.0</td>
      <td>1</td>
      <td>0</td>
      <td>53.1000</td>
      <td>S</td>
      <td>First</td>
      <td>woman</td>
      <td>False</td>
      <td>C</td>
      <td>Southampton</td>
      <td>yes</td>
      <td>False</td>
    </tr>
    <tr>
      <th>4</th>
      <td>0</td>
      <td>3</td>
      <td>male</td>
      <td>35.0</td>
      <td>0</td>
      <td>0</td>
      <td>8.0500</td>
      <td>S</td>
      <td>Third</td>
      <td>man</td>
      <td>True</td>
      <td>NaN</td>
      <td>Southampton</td>
      <td>no</td>
      <td>True</td>
    </tr>
    <tr>
      <th>5</th>
      <td>0</td>
      <td>3</td>
      <td>male</td>
      <td>NaN</td>
      <td>0</td>
      <td>0</td>
      <td>8.4583</td>
      <td>Q</td>
      <td>Third</td>
      <td>man</td>
      <td>True</td>
      <td>NaN</td>
      <td>Queenstown</td>
      <td>no</td>
      <td>True</td>
    </tr>
    <tr>
      <th>6</th>
      <td>0</td>
      <td>1</td>
      <td>male</td>
      <td>54.0</td>
      <td>0</td>
      <td>0</td>
      <td>51.8625</td>
      <td>S</td>
      <td>First</td>
      <td>man</td>
      <td>True</td>
      <td>E</td>
      <td>Southampton</td>
      <td>no</td>
      <td>True</td>
    </tr>
    <tr>
      <th>7</th>
      <td>0</td>
      <td>3</td>
      <td>male</td>
      <td>2.0</td>
      <td>3</td>
      <td>1</td>
      <td>21.0750</td>
      <td>S</td>
      <td>Third</td>
      <td>child</td>
      <td>False</td>
      <td>NaN</td>
      <td>Southampton</td>
      <td>no</td>
      <td>False</td>
    </tr>
    <tr>
      <th>8</th>
      <td>1</td>
      <td>3</td>
      <td>female</td>
      <td>27.0</td>
      <td>0</td>
      <td>2</td>
      <td>11.1333</td>
      <td>S</td>
      <td>Third</td>
      <td>woman</td>
      <td>False</td>
      <td>NaN</td>
      <td>Southampton</td>
      <td>yes</td>
      <td>False</td>
    </tr>
    <tr>
      <th>9</th>
      <td>1</td>
      <td>2</td>
      <td>female</td>
      <td>14.0</td>
      <td>1</td>
      <td>0</td>
      <td>30.0708</td>
      <td>C</td>
      <td>Second</td>
      <td>child</td>
      <td>False</td>
      <td>NaN</td>
      <td>Cherbourg</td>
      <td>yes</td>
      <td>False</td>
    </tr>
  </tbody>
</table>
</div>
      <button class="colab-df-convert" onclick="convertToInteractive('df-5b46856c-14e7-43b0-87d8-184603a46837')"
              title="Convert this dataframe to an interactive table."
              style="display:none;">

<p>  &lt;svg xmlns&#x3D;”<a target="_blank" rel="noopener" href="http://www.w3.org/2000/svg&quot;">http://www.w3.org/2000/svg&quot;</a> height&#x3D;”24px”viewBox&#x3D;”0 0 24 24”<br>       width&#x3D;”24px”&gt;<br>    <path d="M0 0h24v24H0V0z" fill="none"/><br>    <path d="M18.56 5.44l.94 2.06.94-2.06 2.06-.94-2.06-.94-.94-2.06-.94 2.06-2.06.94zm-11 1L8.5 8.5l.94-2.06 2.06-.94-2.06-.94L8.5 2.5l-.94 2.06-2.06.94zm10 10l.94 2.06.94-2.06 2.06-.94-2.06-.94-.94-2.06-.94 2.06-2.06.94z"/><path d="M17.41 7.96l-1.37-1.37c-.4-.4-.92-.59-1.43-.59-.52 0-1.04.2-1.43.59L10.3 9.45l-7.72 7.72c-.78.78-.78 2.05 0 2.83L4 21.41c.39.39.9.59 1.41.59.51 0 1.02-.2 1.41-.59l7.78-7.78 2.81-2.81c.8-.78.8-2.07 0-2.86zM5.41 20L4 18.59l7.72-7.72 1.47 1.35L5.41 20z"/><br>  </svg><br>      </button></p>
  <style>
    .colab-df-container {
      display:flex;
      flex-wrap:wrap;
      gap: 12px;
    }

    .colab-df-convert {
      background-color: #E8F0FE;
      border: none;
      border-radius: 50%;
      cursor: pointer;
      display: none;
      fill: #1967D2;
      height: 32px;
      padding: 0 0 0 0;
      width: 32px;
    }

    .colab-df-convert:hover {
      background-color: #E2EBFA;
      box-shadow: 0px 1px 2px rgba(60, 64, 67, 0.3), 0px 1px 3px 1px rgba(60, 64, 67, 0.15);
      fill: #174EA6;
    }

    [theme=dark] .colab-df-convert {
      background-color: #3B4455;
      fill: #D2E3FC;
    }

    [theme=dark] .colab-df-convert:hover {
      background-color: #434B5C;
      box-shadow: 0px 1px 3px 1px rgba(0, 0, 0, 0.15);
      filter: drop-shadow(0px 1px 2px rgba(0, 0, 0, 0.3));
      fill: #FFFFFF;
    }
  </style>

<pre><code>  &lt;script&gt;
    const buttonEl =
      document.querySelector(&#39;#df-5b46856c-14e7-43b0-87d8-184603a46837 button.colab-df-convert&#39;);
    buttonEl.style.display =
      google.colab.kernel.accessAllowed ? &#39;block&#39; : &#39;none&#39;;

    async function convertToInteractive(key) &#123;
      const element = document.querySelector(&#39;#df-5b46856c-14e7-43b0-87d8-184603a46837&#39;);
      const dataTable =
        await google.colab.kernel.invokeFunction(&#39;convertToInteractive&#39;,
                                                 [key], &#123;&#125;);
      if (!dataTable) return;

      const docLinkHtml = &#39;Like what you see? Visit the &#39; +
        &#39;&lt;a target=&quot;_blank&quot; href=https://colab.research.google.com/notebooks/data_table.ipynb&gt;data table notebook&lt;/a&gt;&#39;
        + &#39; to learn more about interactive tables.&#39;;
      element.innerHTML = &#39;&#39;;
      dataTable[&#39;output_type&#39;] = &#39;display_data&#39;;
      await google.colab.output.renderOutput(dataTable, element);
      const docLink = document.createElement(&#39;div&#39;);
      docLink.innerHTML = docLinkHtml;
      element.appendChild(docLink);
    &#125;
  &lt;/script&gt;
&lt;/div&gt;
</code></pre>
  </div>





<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sns.histplot(data = titanic, x = <span class="string">&#x27;age&#x27;</span>, bins = <span class="number">30</span>, hue = <span class="string">&#x27;sex&#x27;</span>)</span><br></pre></td></tr></table></figure>




<pre><code>&lt;matplotlib.axes._subplots.AxesSubplot at 0x7f9047e37d50&gt;
</code></pre>
<p><img src="/../images/Review_Test/output_1_1.png" alt="png"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sns.histplot(data = titanic, x = <span class="string">&#x27;age&#x27;</span>, bins = <span class="number">20</span>, hue = <span class="string">&#x27;alive&#x27;</span>, multiple = <span class="string">&#x27;stack&#x27;</span>)</span><br></pre></td></tr></table></figure>




<pre><code>&lt;matplotlib.axes._subplots.AxesSubplot at 0x7f9047ccb790&gt;
</code></pre>
<p><img src="/../images/Review_Test/output_2_1.png" alt="png"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sns.kdeplot(data = titanic, x = <span class="string">&#x27;age&#x27;</span>, hue = <span class="string">&#x27;sex&#x27;</span>, multiple = <span class="string">&#x27;stack&#x27;</span>)</span><br></pre></td></tr></table></figure>




<pre><code>&lt;matplotlib.axes._subplots.AxesSubplot at 0x7f9047f59c50&gt;
</code></pre>
<p><img src="/../images/Review_Test/output_3_1.png" alt="png"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sns.kdeplot(data = titanic, x = <span class="string">&#x27;age&#x27;</span>, hue = <span class="string">&#x27;alive&#x27;</span>, multiple = <span class="string">&#x27;stack&#x27;</span>)</span><br></pre></td></tr></table></figure>




<pre><code>&lt;matplotlib.axes._subplots.AxesSubplot at 0x7f9047b57cd0&gt;
</code></pre>
<p><img src="/../images/Review_Test/output_4_1.png" alt="png"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sns.displot(data = titanic, x = <span class="string">&#x27;age&#x27;</span>)</span><br></pre></td></tr></table></figure>




<pre><code>&lt;seaborn.axisgrid.FacetGrid at 0x7f9047b102d0&gt;
</code></pre>
<p><img src="/../images/Review_Test/output_5_1.png" alt="png"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sns.displot(data = titanic, x = <span class="string">&#x27;age&#x27;</span>, kde = <span class="literal">True</span>)</span><br></pre></td></tr></table></figure>




<pre><code>&lt;seaborn.axisgrid.FacetGrid at 0x7f9047af2090&gt;
</code></pre>
<p><img src="/../images/Review_Test/output_6_1.png" alt="png"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sns.displot(data = titanic, x = <span class="string">&#x27;fare&#x27;</span>)</span><br></pre></td></tr></table></figure>




<pre><code>&lt;seaborn.axisgrid.FacetGrid at 0x7f9047a86d50&gt;
</code></pre>
<p><img src="/../images/Review_Test/output_7_1.png" alt="png"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sns.displot(data = titanic, x = <span class="string">&#x27;fare&#x27;</span>, kde = <span class="literal">True</span>)</span><br></pre></td></tr></table></figure>




<pre><code>&lt;seaborn.axisgrid.FacetGrid at 0x7f90479d4590&gt;
</code></pre>
<p><img src="/../images/Review_Test/output_8_1.png" alt="png"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sns.barplot(x = <span class="string">&#x27;class&#x27;</span>, y = <span class="string">&#x27;age&#x27;</span>, data = titanic)</span><br></pre></td></tr></table></figure>




<pre><code>&lt;matplotlib.axes._subplots.AxesSubplot at 0x7f9047771150&gt;
</code></pre>
<p><img src="/../images/Review_Test/output_9_1.png" alt="png"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sns.pointplot(x = <span class="string">&#x27;class&#x27;</span>, y = <span class="string">&#x27;age&#x27;</span>, data = titanic)</span><br></pre></td></tr></table></figure>




<pre><code>&lt;matplotlib.axes._subplots.AxesSubplot at 0x7f90476dff50&gt;
</code></pre>
<p><img src="/../images/Review_Test/output_10_1.png" alt="png"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sns.barplot(x = <span class="string">&#x27;sex&#x27;</span>, y = <span class="string">&#x27;fare&#x27;</span>, data = titanic)</span><br></pre></td></tr></table></figure>




<pre><code>&lt;matplotlib.axes._subplots.AxesSubplot at 0x7f90476c1990&gt;
</code></pre>
<p><img src="/../images/Review_Test/output_11_1.png" alt="png"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sns.pointplot(x = <span class="string">&#x27;sex&#x27;</span>, y = <span class="string">&#x27;fare&#x27;</span>, data = titanic)</span><br><span class="line">titanic[<span class="string">&#x27;sex&#x27;</span>].value_counts()</span><br></pre></td></tr></table></figure>




<pre><code>male      577
female    314
Name: sex, dtype: int64
</code></pre>
<p><img src="/../images/Review_Test/output_12_1.png" alt="png"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sns.barplot(x = <span class="string">&#x27;sex&#x27;</span>, y = <span class="string">&#x27;age&#x27;</span>, data = titanic)</span><br></pre></td></tr></table></figure>




<pre><code>&lt;matplotlib.axes._subplots.AxesSubplot at 0x7f90475abd10&gt;
</code></pre>
<p><img src="/../images/Review_Test/output_13_1.png" alt="png"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sns.boxplot(x = <span class="string">&#x27;alive&#x27;</span>, y = <span class="string">&#x27;age&#x27;</span>, data = titanic)</span><br></pre></td></tr></table></figure>




<pre><code>&lt;matplotlib.axes._subplots.AxesSubplot at 0x7f9047509410&gt;
</code></pre>
<p><img src="/../images/Review_Test/output_14_1.png" alt="png"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sns.violinplot(x = <span class="string">&#x27;alive&#x27;</span> , y = <span class="string">&#x27;age&#x27;</span>, hue = <span class="string">&#x27;sex&#x27;</span>, data = titanic)</span><br></pre></td></tr></table></figure>




<pre><code>&lt;matplotlib.axes._subplots.AxesSubplot at 0x7f9047ae5f90&gt;
</code></pre>
<p><img src="/../images/Review_Test/output_15_1.png" alt="png"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sns.violinplot(x = <span class="string">&#x27;alive&#x27;</span> , y = <span class="string">&#x27;age&#x27;</span>, hue = <span class="string">&#x27;sex&#x27;</span>, data = titanic, split = <span class="literal">True</span>)</span><br></pre></td></tr></table></figure>




<pre><code>&lt;matplotlib.axes._subplots.AxesSubplot at 0x7f904741ba50&gt;
</code></pre>
<p><img src="/../images/Review_Test/output_16_1.png" alt="png"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sns.countplot(x = <span class="string">&#x27;sex&#x27;</span>, data = titanic)</span><br><span class="line">sns.countplot(x = <span class="string">&#x27;alive&#x27;</span>, data = titanic)</span><br></pre></td></tr></table></figure>




<pre><code>&lt;matplotlib.axes._subplots.AxesSubplot at 0x7f9047388750&gt;
</code></pre>
<p><img src="/../images/Review_Test/output_17_1.png" alt="png"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"></span><br><span class="line">flights = sns.load_dataset(<span class="string">&#x27;flights&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">type</span>(flights))</span><br><span class="line">flights.head()</span><br></pre></td></tr></table></figure>

<pre><code>&lt;class &#39;pandas.core.frame.DataFrame&#39;&gt;
</code></pre>
  <div id="df-8bd6ff5a-351a-43ed-a9d8-b31cac425258">
    <div class="colab-df-container">
      <div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

<pre><code>.dataframe tbody tr th &#123;
    vertical-align: top;
&#125;

.dataframe thead th &#123;
    text-align: right;
&#125;
</code></pre>
<p></style></p>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>year</th>
      <th>month</th>
      <th>passengers</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1949</td>
      <td>Jan</td>
      <td>112</td>
    </tr>
    <tr>
      <th>1</th>
      <td>1949</td>
      <td>Feb</td>
      <td>118</td>
    </tr>
    <tr>
      <th>2</th>
      <td>1949</td>
      <td>Mar</td>
      <td>132</td>
    </tr>
    <tr>
      <th>3</th>
      <td>1949</td>
      <td>Apr</td>
      <td>129</td>
    </tr>
    <tr>
      <th>4</th>
      <td>1949</td>
      <td>May</td>
      <td>121</td>
    </tr>
  </tbody>
</table>
</div>
      <button class="colab-df-convert" onclick="convertToInteractive('df-8bd6ff5a-351a-43ed-a9d8-b31cac425258')"
              title="Convert this dataframe to an interactive table."
              style="display:none;">

<p>  &lt;svg xmlns&#x3D;”<a target="_blank" rel="noopener" href="http://www.w3.org/2000/svg&quot;">http://www.w3.org/2000/svg&quot;</a> height&#x3D;”24px”viewBox&#x3D;”0 0 24 24”<br>       width&#x3D;”24px”&gt;<br>    <path d="M0 0h24v24H0V0z" fill="none"/><br>    <path d="M18.56 5.44l.94 2.06.94-2.06 2.06-.94-2.06-.94-.94-2.06-.94 2.06-2.06.94zm-11 1L8.5 8.5l.94-2.06 2.06-.94-2.06-.94L8.5 2.5l-.94 2.06-2.06.94zm10 10l.94 2.06.94-2.06 2.06-.94-2.06-.94-.94-2.06-.94 2.06-2.06.94z"/><path d="M17.41 7.96l-1.37-1.37c-.4-.4-.92-.59-1.43-.59-.52 0-1.04.2-1.43.59L10.3 9.45l-7.72 7.72c-.78.78-.78 2.05 0 2.83L4 21.41c.39.39.9.59 1.41.59.51 0 1.02-.2 1.41-.59l7.78-7.78 2.81-2.81c.8-.78.8-2.07 0-2.86zM5.41 20L4 18.59l7.72-7.72 1.47 1.35L5.41 20z"/><br>  </svg><br>      </button></p>
  <style>
    .colab-df-container {
      display:flex;
      flex-wrap:wrap;
      gap: 12px;
    }

    .colab-df-convert {
      background-color: #E8F0FE;
      border: none;
      border-radius: 50%;
      cursor: pointer;
      display: none;
      fill: #1967D2;
      height: 32px;
      padding: 0 0 0 0;
      width: 32px;
    }

    .colab-df-convert:hover {
      background-color: #E2EBFA;
      box-shadow: 0px 1px 2px rgba(60, 64, 67, 0.3), 0px 1px 3px 1px rgba(60, 64, 67, 0.15);
      fill: #174EA6;
    }

    [theme=dark] .colab-df-convert {
      background-color: #3B4455;
      fill: #D2E3FC;
    }

    [theme=dark] .colab-df-convert:hover {
      background-color: #434B5C;
      box-shadow: 0px 1px 3px 1px rgba(0, 0, 0, 0.15);
      filter: drop-shadow(0px 1px 2px rgba(0, 0, 0, 0.3));
      fill: #FFFFFF;
    }
  </style>

<pre><code>  &lt;script&gt;
    const buttonEl =
      document.querySelector(&#39;#df-8bd6ff5a-351a-43ed-a9d8-b31cac425258 button.colab-df-convert&#39;);
    buttonEl.style.display =
      google.colab.kernel.accessAllowed ? &#39;block&#39; : &#39;none&#39;;

    async function convertToInteractive(key) &#123;
      const element = document.querySelector(&#39;#df-8bd6ff5a-351a-43ed-a9d8-b31cac425258&#39;);
      const dataTable =
        await google.colab.kernel.invokeFunction(&#39;convertToInteractive&#39;,
                                                 [key], &#123;&#125;);
      if (!dataTable) return;

      const docLinkHtml = &#39;Like what you see? Visit the &#39; +
        &#39;&lt;a target=&quot;_blank&quot; href=https://colab.research.google.com/notebooks/data_table.ipynb&gt;data table notebook&lt;/a&gt;&#39;
        + &#39; to learn more about interactive tables.&#39;;
      element.innerHTML = &#39;&#39;;
      dataTable[&#39;output_type&#39;] = &#39;display_data&#39;;
      await google.colab.output.renderOutput(dataTable, element);
      const docLink = document.createElement(&#39;div&#39;);
      docLink.innerHTML = docLinkHtml;
      element.appendChild(docLink);
    &#125;
  &lt;/script&gt;
&lt;/div&gt;
</code></pre>
  </div>





<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">flights[<span class="string">&#x27;month&#x27;</span>].value_counts()</span><br></pre></td></tr></table></figure>




<pre><code>Jan    12
Feb    12
Mar    12
Apr    12
May    12
Jun    12
Jul    12
Aug    12
Sep    12
Oct    12
Nov    12
Dec    12
Name: month, dtype: int64
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"></span><br><span class="line">flights_pivot = flights.pivot(index = <span class="string">&#x27;month&#x27;</span>, columns = <span class="string">&#x27;year&#x27;</span>, values = <span class="string">&#x27;passengers&#x27;</span>)</span><br><span class="line">flights_pivot</span><br></pre></td></tr></table></figure>





  <div id="df-aa216323-40e3-4a02-9dc0-c9a82d5f9bd4">
    <div class="colab-df-container">
      <div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

<pre><code>.dataframe tbody tr th &#123;
    vertical-align: top;
&#125;

.dataframe thead th &#123;
    text-align: right;
&#125;
</code></pre>
<p></style></p>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th>year</th>
      <th>1949</th>
      <th>1950</th>
      <th>1951</th>
      <th>1952</th>
      <th>1953</th>
      <th>1954</th>
      <th>1955</th>
      <th>1956</th>
      <th>1957</th>
      <th>1958</th>
      <th>1959</th>
      <th>1960</th>
    </tr>
    <tr>
      <th>month</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>Jan</th>
      <td>112</td>
      <td>115</td>
      <td>145</td>
      <td>171</td>
      <td>196</td>
      <td>204</td>
      <td>242</td>
      <td>284</td>
      <td>315</td>
      <td>340</td>
      <td>360</td>
      <td>417</td>
    </tr>
    <tr>
      <th>Feb</th>
      <td>118</td>
      <td>126</td>
      <td>150</td>
      <td>180</td>
      <td>196</td>
      <td>188</td>
      <td>233</td>
      <td>277</td>
      <td>301</td>
      <td>318</td>
      <td>342</td>
      <td>391</td>
    </tr>
    <tr>
      <th>Mar</th>
      <td>132</td>
      <td>141</td>
      <td>178</td>
      <td>193</td>
      <td>236</td>
      <td>235</td>
      <td>267</td>
      <td>317</td>
      <td>356</td>
      <td>362</td>
      <td>406</td>
      <td>419</td>
    </tr>
    <tr>
      <th>Apr</th>
      <td>129</td>
      <td>135</td>
      <td>163</td>
      <td>181</td>
      <td>235</td>
      <td>227</td>
      <td>269</td>
      <td>313</td>
      <td>348</td>
      <td>348</td>
      <td>396</td>
      <td>461</td>
    </tr>
    <tr>
      <th>May</th>
      <td>121</td>
      <td>125</td>
      <td>172</td>
      <td>183</td>
      <td>229</td>
      <td>234</td>
      <td>270</td>
      <td>318</td>
      <td>355</td>
      <td>363</td>
      <td>420</td>
      <td>472</td>
    </tr>
    <tr>
      <th>Jun</th>
      <td>135</td>
      <td>149</td>
      <td>178</td>
      <td>218</td>
      <td>243</td>
      <td>264</td>
      <td>315</td>
      <td>374</td>
      <td>422</td>
      <td>435</td>
      <td>472</td>
      <td>535</td>
    </tr>
    <tr>
      <th>Jul</th>
      <td>148</td>
      <td>170</td>
      <td>199</td>
      <td>230</td>
      <td>264</td>
      <td>302</td>
      <td>364</td>
      <td>413</td>
      <td>465</td>
      <td>491</td>
      <td>548</td>
      <td>622</td>
    </tr>
    <tr>
      <th>Aug</th>
      <td>148</td>
      <td>170</td>
      <td>199</td>
      <td>242</td>
      <td>272</td>
      <td>293</td>
      <td>347</td>
      <td>405</td>
      <td>467</td>
      <td>505</td>
      <td>559</td>
      <td>606</td>
    </tr>
    <tr>
      <th>Sep</th>
      <td>136</td>
      <td>158</td>
      <td>184</td>
      <td>209</td>
      <td>237</td>
      <td>259</td>
      <td>312</td>
      <td>355</td>
      <td>404</td>
      <td>404</td>
      <td>463</td>
      <td>508</td>
    </tr>
    <tr>
      <th>Oct</th>
      <td>119</td>
      <td>133</td>
      <td>162</td>
      <td>191</td>
      <td>211</td>
      <td>229</td>
      <td>274</td>
      <td>306</td>
      <td>347</td>
      <td>359</td>
      <td>407</td>
      <td>461</td>
    </tr>
    <tr>
      <th>Nov</th>
      <td>104</td>
      <td>114</td>
      <td>146</td>
      <td>172</td>
      <td>180</td>
      <td>203</td>
      <td>237</td>
      <td>271</td>
      <td>305</td>
      <td>310</td>
      <td>362</td>
      <td>390</td>
    </tr>
    <tr>
      <th>Dec</th>
      <td>118</td>
      <td>140</td>
      <td>166</td>
      <td>194</td>
      <td>201</td>
      <td>229</td>
      <td>278</td>
      <td>306</td>
      <td>336</td>
      <td>337</td>
      <td>405</td>
      <td>432</td>
    </tr>
  </tbody>
</table>
</div>
      <button class="colab-df-convert" onclick="convertToInteractive('df-aa216323-40e3-4a02-9dc0-c9a82d5f9bd4')"
              title="Convert this dataframe to an interactive table."
              style="display:none;">

<p>  &lt;svg xmlns&#x3D;”<a target="_blank" rel="noopener" href="http://www.w3.org/2000/svg&quot;">http://www.w3.org/2000/svg&quot;</a> height&#x3D;”24px”viewBox&#x3D;”0 0 24 24”<br>       width&#x3D;”24px”&gt;<br>    <path d="M0 0h24v24H0V0z" fill="none"/><br>    <path d="M18.56 5.44l.94 2.06.94-2.06 2.06-.94-2.06-.94-.94-2.06-.94 2.06-2.06.94zm-11 1L8.5 8.5l.94-2.06 2.06-.94-2.06-.94L8.5 2.5l-.94 2.06-2.06.94zm10 10l.94 2.06.94-2.06 2.06-.94-2.06-.94-.94-2.06-.94 2.06-2.06.94z"/><path d="M17.41 7.96l-1.37-1.37c-.4-.4-.92-.59-1.43-.59-.52 0-1.04.2-1.43.59L10.3 9.45l-7.72 7.72c-.78.78-.78 2.05 0 2.83L4 21.41c.39.39.9.59 1.41.59.51 0 1.02-.2 1.41-.59l7.78-7.78 2.81-2.81c.8-.78.8-2.07 0-2.86zM5.41 20L4 18.59l7.72-7.72 1.47 1.35L5.41 20z"/><br>  </svg><br>      </button></p>
  <style>
    .colab-df-container {
      display:flex;
      flex-wrap:wrap;
      gap: 12px;
    }

    .colab-df-convert {
      background-color: #E8F0FE;
      border: none;
      border-radius: 50%;
      cursor: pointer;
      display: none;
      fill: #1967D2;
      height: 32px;
      padding: 0 0 0 0;
      width: 32px;
    }

    .colab-df-convert:hover {
      background-color: #E2EBFA;
      box-shadow: 0px 1px 2px rgba(60, 64, 67, 0.3), 0px 1px 3px 1px rgba(60, 64, 67, 0.15);
      fill: #174EA6;
    }

    [theme=dark] .colab-df-convert {
      background-color: #3B4455;
      fill: #D2E3FC;
    }

    [theme=dark] .colab-df-convert:hover {
      background-color: #434B5C;
      box-shadow: 0px 1px 3px 1px rgba(0, 0, 0, 0.15);
      filter: drop-shadow(0px 1px 2px rgba(0, 0, 0, 0.3));
      fill: #FFFFFF;
    }
  </style>

<pre><code>  &lt;script&gt;
    const buttonEl =
      document.querySelector(&#39;#df-aa216323-40e3-4a02-9dc0-c9a82d5f9bd4 button.colab-df-convert&#39;);
    buttonEl.style.display =
      google.colab.kernel.accessAllowed ? &#39;block&#39; : &#39;none&#39;;

    async function convertToInteractive(key) &#123;
      const element = document.querySelector(&#39;#df-aa216323-40e3-4a02-9dc0-c9a82d5f9bd4&#39;);
      const dataTable =
        await google.colab.kernel.invokeFunction(&#39;convertToInteractive&#39;,
                                                 [key], &#123;&#125;);
      if (!dataTable) return;

      const docLinkHtml = &#39;Like what you see? Visit the &#39; +
        &#39;&lt;a target=&quot;_blank&quot; href=https://colab.research.google.com/notebooks/data_table.ipynb&gt;data table notebook&lt;/a&gt;&#39;
        + &#39; to learn more about interactive tables.&#39;;
      element.innerHTML = &#39;&#39;;
      dataTable[&#39;output_type&#39;] = &#39;display_data&#39;;
      await google.colab.output.renderOutput(dataTable, element);
      const docLink = document.createElement(&#39;div&#39;);
      docLink.innerHTML = docLinkHtml;
      element.appendChild(docLink);
    &#125;
  &lt;/script&gt;
&lt;/div&gt;
</code></pre>
  </div>





<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sns.heatmap(data = flights_pivot)</span><br></pre></td></tr></table></figure>




<pre><code>&lt;matplotlib.axes._subplots.AxesSubplot at 0x7f90472669d0&gt;
</code></pre>
<p><img src="/../images/Review_Test/output_21_1.png" alt="png"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sns.lineplot(x = <span class="string">&#x27;month&#x27;</span>, y = <span class="string">&#x27;passengers&#x27;</span>, data = flights)</span><br></pre></td></tr></table></figure>




<pre><code>&lt;matplotlib.axes._subplots.AxesSubplot at 0x7f90470d0850&gt;
</code></pre>
<p><img src="/../images/Review_Test/output_22_1.png" alt="png"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">tips = sns.load_dataset(<span class="string">&#x27;tips&#x27;</span>)</span><br><span class="line">tips.head()</span><br></pre></td></tr></table></figure>





  <div id="df-518fa7f3-c2ae-4371-b992-128e8e419a71">
    <div class="colab-df-container">
      <div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

<pre><code>.dataframe tbody tr th &#123;
    vertical-align: top;
&#125;

.dataframe thead th &#123;
    text-align: right;
&#125;
</code></pre>
<p></style></p>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>total_bill</th>
      <th>tip</th>
      <th>sex</th>
      <th>smoker</th>
      <th>day</th>
      <th>time</th>
      <th>size</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>16.99</td>
      <td>1.01</td>
      <td>Female</td>
      <td>No</td>
      <td>Sun</td>
      <td>Dinner</td>
      <td>2</td>
    </tr>
    <tr>
      <th>1</th>
      <td>10.34</td>
      <td>1.66</td>
      <td>Male</td>
      <td>No</td>
      <td>Sun</td>
      <td>Dinner</td>
      <td>3</td>
    </tr>
    <tr>
      <th>2</th>
      <td>21.01</td>
      <td>3.50</td>
      <td>Male</td>
      <td>No</td>
      <td>Sun</td>
      <td>Dinner</td>
      <td>3</td>
    </tr>
    <tr>
      <th>3</th>
      <td>23.68</td>
      <td>3.31</td>
      <td>Male</td>
      <td>No</td>
      <td>Sun</td>
      <td>Dinner</td>
      <td>2</td>
    </tr>
    <tr>
      <th>4</th>
      <td>24.59</td>
      <td>3.61</td>
      <td>Female</td>
      <td>No</td>
      <td>Sun</td>
      <td>Dinner</td>
      <td>4</td>
    </tr>
  </tbody>
</table>
</div>
      <button class="colab-df-convert" onclick="convertToInteractive('df-518fa7f3-c2ae-4371-b992-128e8e419a71')"
              title="Convert this dataframe to an interactive table."
              style="display:none;">

<p>  &lt;svg xmlns&#x3D;”<a target="_blank" rel="noopener" href="http://www.w3.org/2000/svg&quot;">http://www.w3.org/2000/svg&quot;</a> height&#x3D;”24px”viewBox&#x3D;”0 0 24 24”<br>       width&#x3D;”24px”&gt;<br>    <path d="M0 0h24v24H0V0z" fill="none"/><br>    <path d="M18.56 5.44l.94 2.06.94-2.06 2.06-.94-2.06-.94-.94-2.06-.94 2.06-2.06.94zm-11 1L8.5 8.5l.94-2.06 2.06-.94-2.06-.94L8.5 2.5l-.94 2.06-2.06.94zm10 10l.94 2.06.94-2.06 2.06-.94-2.06-.94-.94-2.06-.94 2.06-2.06.94z"/><path d="M17.41 7.96l-1.37-1.37c-.4-.4-.92-.59-1.43-.59-.52 0-1.04.2-1.43.59L10.3 9.45l-7.72 7.72c-.78.78-.78 2.05 0 2.83L4 21.41c.39.39.9.59 1.41.59.51 0 1.02-.2 1.41-.59l7.78-7.78 2.81-2.81c.8-.78.8-2.07 0-2.86zM5.41 20L4 18.59l7.72-7.72 1.47 1.35L5.41 20z"/><br>  </svg><br>      </button></p>
  <style>
    .colab-df-container {
      display:flex;
      flex-wrap:wrap;
      gap: 12px;
    }

    .colab-df-convert {
      background-color: #E8F0FE;
      border: none;
      border-radius: 50%;
      cursor: pointer;
      display: none;
      fill: #1967D2;
      height: 32px;
      padding: 0 0 0 0;
      width: 32px;
    }

    .colab-df-convert:hover {
      background-color: #E2EBFA;
      box-shadow: 0px 1px 2px rgba(60, 64, 67, 0.3), 0px 1px 3px 1px rgba(60, 64, 67, 0.15);
      fill: #174EA6;
    }

    [theme=dark] .colab-df-convert {
      background-color: #3B4455;
      fill: #D2E3FC;
    }

    [theme=dark] .colab-df-convert:hover {
      background-color: #434B5C;
      box-shadow: 0px 1px 3px 1px rgba(0, 0, 0, 0.15);
      filter: drop-shadow(0px 1px 2px rgba(0, 0, 0, 0.3));
      fill: #FFFFFF;
    }
  </style>

<pre><code>  &lt;script&gt;
    const buttonEl =
      document.querySelector(&#39;#df-518fa7f3-c2ae-4371-b992-128e8e419a71 button.colab-df-convert&#39;);
    buttonEl.style.display =
      google.colab.kernel.accessAllowed ? &#39;block&#39; : &#39;none&#39;;

    async function convertToInteractive(key) &#123;
      const element = document.querySelector(&#39;#df-518fa7f3-c2ae-4371-b992-128e8e419a71&#39;);
      const dataTable =
        await google.colab.kernel.invokeFunction(&#39;convertToInteractive&#39;,
                                                 [key], &#123;&#125;);
      if (!dataTable) return;

      const docLinkHtml = &#39;Like what you see? Visit the &#39; +
        &#39;&lt;a target=&quot;_blank&quot; href=https://colab.research.google.com/notebooks/data_table.ipynb&gt;data table notebook&lt;/a&gt;&#39;
        + &#39; to learn more about interactive tables.&#39;;
      element.innerHTML = &#39;&#39;;
      dataTable[&#39;output_type&#39;] = &#39;display_data&#39;;
      await google.colab.output.renderOutput(dataTable, element);
      const docLink = document.createElement(&#39;div&#39;);
      docLink.innerHTML = docLinkHtml;
      element.appendChild(docLink);
    &#125;
  &lt;/script&gt;
&lt;/div&gt;
</code></pre>
  </div>





<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sns.scatterplot(x = <span class="string">&#x27;total_bill&#x27;</span>, y = <span class="string">&#x27;tip&#x27;</span>,  hue = <span class="string">&#x27;day&#x27;</span>, data = tips)</span><br></pre></td></tr></table></figure>




<pre><code>&lt;matplotlib.axes._subplots.AxesSubplot at 0x7f904708c350&gt;
</code></pre>
<p><img src="/../images/Review_Test/output_24_1.png" alt="png"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sns.scatterplot(x = <span class="string">&#x27;total_bill&#x27;</span>, y = <span class="string">&#x27;tip&#x27;</span>,  hue = <span class="string">&#x27;sex&#x27;</span>, data = tips)</span><br></pre></td></tr></table></figure>




<pre><code>&lt;matplotlib.axes._subplots.AxesSubplot at 0x7f9046e524d0&gt;
</code></pre>
<p><img src="/../images/Review_Test/output_25_1.png" alt="png"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sns.regplot(x = <span class="string">&#x27;total_bill&#x27;</span>, y = <span class="string">&#x27;tip&#x27;</span>, data = tips)</span><br></pre></td></tr></table></figure>




<pre><code>&lt;matplotlib.axes._subplots.AxesSubplot at 0x7f9046d93850&gt;
</code></pre>
<p><img src="/../images/Review_Test/output_26_1.png" alt="png"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"></span><br><span class="line">np.random.seed(<span class="number">0</span>)</span><br><span class="line">intercept = <span class="number">4</span></span><br><span class="line">slope = <span class="number">3</span></span><br><span class="line"></span><br><span class="line">noise = np.random.randn(<span class="number">50</span>, <span class="number">1</span>)</span><br><span class="line">x = <span class="number">5</span> * np.random.randn(<span class="number">50</span>, <span class="number">1</span>)</span><br><span class="line">y = slope * x + intercept + noise</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 데이터 프레임 생성</span></span><br><span class="line">data = pd.DataFrame(</span><br><span class="line">    &#123; <span class="string">&#x27;X&#x27;</span> : x[:, <span class="number">0</span>],</span><br><span class="line">      <span class="string">&#x27;Y&#x27;</span> : y[:, <span class="number">0</span>]&#125;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">data</span><br></pre></td></tr></table></figure>





  <div id="df-585b0239-336a-4955-ba55-7653fef067b0">
    <div class="colab-df-container">
      <div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

<pre><code>.dataframe tbody tr th &#123;
    vertical-align: top;
&#125;

.dataframe thead th &#123;
    text-align: right;
&#125;
</code></pre>
<p></style></p>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>X</th>
      <th>Y</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>-4.477333</td>
      <td>-7.667946</td>
    </tr>
    <tr>
      <th>1</th>
      <td>1.934512</td>
      <td>10.203695</td>
    </tr>
    <tr>
      <th>2</th>
      <td>-2.554026</td>
      <td>-2.683339</td>
    </tr>
    <tr>
      <th>3</th>
      <td>-5.903161</td>
      <td>-11.468590</td>
    </tr>
    <tr>
      <th>4</th>
      <td>-0.140911</td>
      <td>5.444825</td>
    </tr>
    <tr>
      <th>5</th>
      <td>2.141659</td>
      <td>9.447700</td>
    </tr>
    <tr>
      <th>6</th>
      <td>0.332586</td>
      <td>5.947847</td>
    </tr>
    <tr>
      <th>7</th>
      <td>1.512359</td>
      <td>8.385721</td>
    </tr>
    <tr>
      <th>8</th>
      <td>-3.171610</td>
      <td>-5.618050</td>
    </tr>
    <tr>
      <th>9</th>
      <td>-1.813706</td>
      <td>-1.030519</td>
    </tr>
    <tr>
      <th>10</th>
      <td>-3.362302</td>
      <td>-5.942863</td>
    </tr>
    <tr>
      <th>11</th>
      <td>-1.797766</td>
      <td>0.060976</td>
    </tr>
    <tr>
      <th>12</th>
      <td>-4.065731</td>
      <td>-7.436157</td>
    </tr>
    <tr>
      <th>13</th>
      <td>-8.631413</td>
      <td>-21.772564</td>
    </tr>
    <tr>
      <th>14</th>
      <td>0.887131</td>
      <td>7.105255</td>
    </tr>
    <tr>
      <th>15</th>
      <td>-2.008905</td>
      <td>-1.693040</td>
    </tr>
    <tr>
      <th>16</th>
      <td>-8.150992</td>
      <td>-18.958896</td>
    </tr>
    <tr>
      <th>17</th>
      <td>2.313911</td>
      <td>10.736576</td>
    </tr>
    <tr>
      <th>18</th>
      <td>-4.536492</td>
      <td>-9.296408</td>
    </tr>
    <tr>
      <th>19</th>
      <td>0.259727</td>
      <td>3.925085</td>
    </tr>
    <tr>
      <th>20</th>
      <td>3.645453</td>
      <td>12.383369</td>
    </tr>
    <tr>
      <th>21</th>
      <td>0.644915</td>
      <td>6.588362</td>
    </tr>
    <tr>
      <th>22</th>
      <td>5.697003</td>
      <td>21.955446</td>
    </tr>
    <tr>
      <th>23</th>
      <td>-6.174129</td>
      <td>-15.264552</td>
    </tr>
    <tr>
      <th>24</th>
      <td>2.011708</td>
      <td>12.304879</td>
    </tr>
    <tr>
      <th>25</th>
      <td>-3.424050</td>
      <td>-7.726517</td>
    </tr>
    <tr>
      <th>26</th>
      <td>-4.353986</td>
      <td>-9.016199</td>
    </tr>
    <tr>
      <th>27</th>
      <td>-2.894248</td>
      <td>-4.869929</td>
    </tr>
    <tr>
      <th>28</th>
      <td>-1.557763</td>
      <td>0.859491</td>
    </tr>
    <tr>
      <th>29</th>
      <td>0.280827</td>
      <td>6.311839</td>
    </tr>
    <tr>
      <th>30</th>
      <td>-5.825749</td>
      <td>-13.322300</td>
    </tr>
    <tr>
      <th>31</th>
      <td>4.504132</td>
      <td>17.890560</td>
    </tr>
    <tr>
      <th>32</th>
      <td>2.328312</td>
      <td>10.097151</td>
    </tr>
    <tr>
      <th>33</th>
      <td>-7.681218</td>
      <td>-21.024452</td>
    </tr>
    <tr>
      <th>34</th>
      <td>7.441261</td>
      <td>25.975871</td>
    </tr>
    <tr>
      <th>35</th>
      <td>9.479446</td>
      <td>32.594687</td>
    </tr>
    <tr>
      <th>36</th>
      <td>5.893898</td>
      <td>22.911984</td>
    </tr>
    <tr>
      <th>37</th>
      <td>-0.899624</td>
      <td>2.503507</td>
    </tr>
    <tr>
      <th>38</th>
      <td>-5.353763</td>
      <td>-12.448616</td>
    </tr>
    <tr>
      <th>39</th>
      <td>5.272259</td>
      <td>19.514473</td>
    </tr>
    <tr>
      <th>40</th>
      <td>-2.015885</td>
      <td>-3.096207</td>
    </tr>
    <tr>
      <th>41</th>
      <td>6.112225</td>
      <td>20.916658</td>
    </tr>
    <tr>
      <th>42</th>
      <td>1.041375</td>
      <td>5.417854</td>
    </tr>
    <tr>
      <th>43</th>
      <td>4.883195</td>
      <td>20.600361</td>
    </tr>
    <tr>
      <th>44</th>
      <td>1.781832</td>
      <td>8.835844</td>
    </tr>
    <tr>
      <th>45</th>
      <td>3.532866</td>
      <td>14.160523</td>
    </tr>
    <tr>
      <th>46</th>
      <td>0.052500</td>
      <td>2.904705</td>
    </tr>
    <tr>
      <th>47</th>
      <td>8.929352</td>
      <td>31.565548</td>
    </tr>
    <tr>
      <th>48</th>
      <td>0.634560</td>
      <td>4.289784</td>
    </tr>
    <tr>
      <th>49</th>
      <td>2.009947</td>
      <td>9.817100</td>
    </tr>
  </tbody>
</table>
</div>
      <button class="colab-df-convert" onclick="convertToInteractive('df-585b0239-336a-4955-ba55-7653fef067b0')"
              title="Convert this dataframe to an interactive table."
              style="display:none;">

<p>  &lt;svg xmlns&#x3D;”<a target="_blank" rel="noopener" href="http://www.w3.org/2000/svg&quot;">http://www.w3.org/2000/svg&quot;</a> height&#x3D;”24px”viewBox&#x3D;”0 0 24 24”<br>       width&#x3D;”24px”&gt;<br>    <path d="M0 0h24v24H0V0z" fill="none"/><br>    <path d="M18.56 5.44l.94 2.06.94-2.06 2.06-.94-2.06-.94-.94-2.06-.94 2.06-2.06.94zm-11 1L8.5 8.5l.94-2.06 2.06-.94-2.06-.94L8.5 2.5l-.94 2.06-2.06.94zm10 10l.94 2.06.94-2.06 2.06-.94-2.06-.94-.94-2.06-.94 2.06-2.06.94z"/><path d="M17.41 7.96l-1.37-1.37c-.4-.4-.92-.59-1.43-.59-.52 0-1.04.2-1.43.59L10.3 9.45l-7.72 7.72c-.78.78-.78 2.05 0 2.83L4 21.41c.39.39.9.59 1.41.59.51 0 1.02-.2 1.41-.59l7.78-7.78 2.81-2.81c.8-.78.8-2.07 0-2.86zM5.41 20L4 18.59l7.72-7.72 1.47 1.35L5.41 20z"/><br>  </svg><br>      </button></p>
  <style>
    .colab-df-container {
      display:flex;
      flex-wrap:wrap;
      gap: 12px;
    }

    .colab-df-convert {
      background-color: #E8F0FE;
      border: none;
      border-radius: 50%;
      cursor: pointer;
      display: none;
      fill: #1967D2;
      height: 32px;
      padding: 0 0 0 0;
      width: 32px;
    }

    .colab-df-convert:hover {
      background-color: #E2EBFA;
      box-shadow: 0px 1px 2px rgba(60, 64, 67, 0.3), 0px 1px 3px 1px rgba(60, 64, 67, 0.15);
      fill: #174EA6;
    }

    [theme=dark] .colab-df-convert {
      background-color: #3B4455;
      fill: #D2E3FC;
    }

    [theme=dark] .colab-df-convert:hover {
      background-color: #434B5C;
      box-shadow: 0px 1px 3px 1px rgba(0, 0, 0, 0.15);
      filter: drop-shadow(0px 1px 2px rgba(0, 0, 0, 0.3));
      fill: #FFFFFF;
    }
  </style>

<pre><code>  &lt;script&gt;
    const buttonEl =
      document.querySelector(&#39;#df-585b0239-336a-4955-ba55-7653fef067b0 button.colab-df-convert&#39;);
    buttonEl.style.display =
      google.colab.kernel.accessAllowed ? &#39;block&#39; : &#39;none&#39;;

    async function convertToInteractive(key) &#123;
      const element = document.querySelector(&#39;#df-585b0239-336a-4955-ba55-7653fef067b0&#39;);
      const dataTable =
        await google.colab.kernel.invokeFunction(&#39;convertToInteractive&#39;,
                                                 [key], &#123;&#125;);
      if (!dataTable) return;

      const docLinkHtml = &#39;Like what you see? Visit the &#39; +
        &#39;&lt;a target=&quot;_blank&quot; href=https://colab.research.google.com/notebooks/data_table.ipynb&gt;data table notebook&lt;/a&gt;&#39;
        + &#39; to learn more about interactive tables.&#39;;
      element.innerHTML = &#39;&#39;;
      dataTable[&#39;output_type&#39;] = &#39;display_data&#39;;
      await google.colab.output.renderOutput(dataTable, element);
      const docLink = document.createElement(&#39;div&#39;);
      docLink.innerHTML = docLinkHtml;
      element.appendChild(docLink);
    &#125;
  &lt;/script&gt;
&lt;/div&gt;
</code></pre>
  </div>





<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line">fig, ax = plt.subplots()</span><br><span class="line">ax.scatter(data[<span class="string">&#x27;X&#x27;</span>], data[<span class="string">&#x27;Y&#x27;</span>])</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>


<p><img src="/../images/Review_Test/output_28_0.png" alt="png"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> seaborn <span class="keyword">as</span> sns</span><br><span class="line">sns.scatterplot(x = <span class="string">&#x27;X&#x27;</span>, y = <span class="string">&#x27;Y&#x27;</span>, data = data)</span><br></pre></td></tr></table></figure>




<pre><code>&lt;matplotlib.axes._subplots.AxesSubplot at 0x7f9046552d90&gt;
</code></pre>
<p><img src="/../images/Review_Test/output_29_1.png" alt="png"></p>

      
    </div>
    <footer class="entry-meta entry-footer">
      
      
      
    </footer>
    <hr class="entry-footer-hr">
  </div>
  
</article>

<!-- Table of Contents -->

  
    <article id="post-Day14_20220705_ML"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/2022/07/05/Day14_20220705_ML/">July 5, 2022, Day14</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	<a href="/2022/07/05/Day14_20220705_ML/" class="article-date">
	  <time datetime="2022-07-05T00:22:22.000Z" itemprop="datePublished">July 5, 2022</time>
	</a>

       
      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="Chapter-5-트리-알고리즘-lt-트리의-앙상블-gt"><a href="#Chapter-5-트리-알고리즘-lt-트리의-앙상블-gt" class="headerlink" title="Chapter 5. 트리 알고리즘 &lt;트리의 앙상블&gt;"></a>Chapter 5. 트리 알고리즘 &lt;트리의 앙상블&gt;</h1><h2 id="랜덤-포레스트"><a href="#랜덤-포레스트" class="headerlink" title="랜덤 포레스트"></a>랜덤 포레스트</h2><ul>
<li>Decision Tree (나무 1개)<ul>
<li>여러 개 심음</li>
<li>샘플링</li>
<li>feature importances</li>
</ul>
</li>
<li>예측해야 할 행의 갯수 –&gt; 100만개</li>
<li>컬럼의 갯수 200개 –&gt; 100개로 필터링<ul>
<li>나무 100개를 심고 평균을 내자</li>
<li>나무 1개당 컬럼을 10개로</li>
<li>T1 mae : 20 &#x2F; T2 mae : 30 &#x2F; T3 mae : 10, ….<ul>
<li>T1 ~ T100 mae :  20</li>
<li>feature importances</li>
</ul>
</li>
<li>샘플링 : 부트스트랩 샘플 (복원 추출)</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 라이브러리 불러오기</span></span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">from</span> sklearn.model_selection <span class="keyword">import</span> train_test_split, cross_validate</span><br><span class="line"><span class="keyword">from</span> sklearn.ensemble <span class="keyword">import</span> RandomForestClassifier</span><br><span class="line"></span><br><span class="line"><span class="comment"># 데이터 불러오기</span></span><br><span class="line">wine = pd.read_csv(<span class="string">&#x27;https://bit.ly/wine_csv_data&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># input, target 분리</span></span><br><span class="line">data = wine[[<span class="string">&#x27;alcohol&#x27;</span>, <span class="string">&#x27;sugar&#x27;</span>, <span class="string">&#x27;pH&#x27;</span>]].to_numpy()</span><br><span class="line">target = wine[<span class="string">&#x27;class&#x27;</span>].to_numpy()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 훈련데이터, 테스트데이터 분리</span></span><br><span class="line">train_input, test_input, train_target, test_target = train_test_split(</span><br><span class="line">    data, target, test_size = <span class="number">0.2</span>, random_state = <span class="number">42</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 모델링</span></span><br><span class="line">rf = RandomForestClassifier(n_jobs = -<span class="number">1</span>, random_state = <span class="number">42</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 모형 평가</span></span><br><span class="line">scores = cross_validate(rf, train_input, train_target,</span><br><span class="line">                        return_train_score = <span class="literal">True</span>, n_jobs = -<span class="number">1</span>)</span><br><span class="line"><span class="built_in">print</span>(np.mean(scores[<span class="string">&#x27;train_score&#x27;</span>]), np.mean(scores[<span class="string">&#x27;test_score&#x27;</span>]))</span><br><span class="line"></span><br><span class="line"><span class="comment"># 특성 중요도</span></span><br><span class="line">rf.fit(train_input, train_target)</span><br><span class="line"><span class="built_in">print</span>(rf.feature_importances_)</span><br><span class="line"></span><br><span class="line"><span class="comment"># OOB (부트스트랩 샘플에 포함되지 않고 남는 샘플)를 이용한 결정 트리 평가</span></span><br><span class="line">rf = RandomForestClassifier(oob_score = <span class="literal">True</span>, n_jobs = -<span class="number">1</span>, random_state = <span class="number">42</span>)</span><br><span class="line">rf.fit(train_input, train_target)</span><br><span class="line"><span class="built_in">print</span>(rf.oob_score_)</span><br></pre></td></tr></table></figure>

<pre><code>0.9973541965122431 0.8905151032797809
[0.23167441 0.50039841 0.26792718]
0.8934000384837406
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 엑스트라 트리</span></span><br><span class="line"><span class="keyword">from</span> sklearn.ensemble <span class="keyword">import</span> ExtraTreesClassifier</span><br><span class="line">et = ExtraTreesClassifier(n_jobs = -<span class="number">1</span>, random_state = <span class="number">42</span>)</span><br><span class="line">scores = cross_validate(et, train_input, train_target,</span><br><span class="line">                        return_train_score = <span class="literal">True</span>, n_jobs = -<span class="number">1</span>)</span><br><span class="line"><span class="built_in">print</span>(np.mean(scores[<span class="string">&#x27;train_score&#x27;</span>]), np.mean(scores[<span class="string">&#x27;test_score&#x27;</span>]))</span><br></pre></td></tr></table></figure>

<pre><code>0.9974503966084433 0.8887848893166506
</code></pre>
<h2 id="그레이디언트-부스팅"><a href="#그레이디언트-부스팅" class="headerlink" title="그레이디언트 부스팅"></a>그레이디언트 부스팅</h2><ul>
<li>경사하강법의 원리를 이용</li>
<li>T1 ~ TN 증가하면서 오차를 보정 및 정확성을 높임</li>
<li>랜덤포레스트와의 차이점<ul>
<li>랜덤포레스트 : 각 나무 간 상호 연관성 없음</li>
<li>그레이디언트 부스팅 : 각 나무 간 상호 연관성 있음</li>
</ul>
</li>
<li>단점 : 속도가 너무 느림</li>
<li>대안 : XGBoost, LightGBM</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 라이브러리 불러오기</span></span><br><span class="line"><span class="keyword">from</span> sklearn.ensemble <span class="keyword">import</span> GradientBoostingClassifier</span><br><span class="line"></span><br><span class="line">gb = GradientBoostingClassifier(random_state = <span class="number">42</span>)</span><br><span class="line">scores = cross_validate(gb, train_input, train_target,</span><br><span class="line">                        return_train_score = <span class="literal">True</span>, n_jobs = -<span class="number">1</span>)</span><br><span class="line"><span class="built_in">print</span>(np.mean(scores[<span class="string">&#x27;train_score&#x27;</span>]), np.mean(scores[<span class="string">&#x27;test_score&#x27;</span>]))</span><br></pre></td></tr></table></figure>

<pre><code>0.8881086892152563 0.8720430147331015
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">gb = GradientBoostingClassifier(n_estimators = <span class="number">500</span>, learning_rate = <span class="number">0.2</span>,</span><br><span class="line">                                random_state = <span class="number">42</span>)</span><br><span class="line">scores = cross_validate(gb, train_input, train_target,</span><br><span class="line">                        return_train_score = <span class="literal">True</span>, n_jobs = -<span class="number">1</span>)</span><br><span class="line"><span class="built_in">print</span>(np.mean(scores[<span class="string">&#x27;train_score&#x27;</span>]), np.mean(scores[<span class="string">&#x27;test_score&#x27;</span>]))</span><br></pre></td></tr></table></figure>

<pre><code>0.9464595437171814 0.8780082549788999
</code></pre>
<ul>
<li>5장 3절의 키포인트 두 가지<ul>
<li>랜덤포레스트</li>
<li>부스팅</li>
</ul>
</li>
</ul>
<h1 id="Chapter-6-비지도-학습"><a href="#Chapter-6-비지도-학습" class="headerlink" title="Chapter 6. 비지도 학습"></a>Chapter 6. 비지도 학습</h1><ul>
<li>실무에서의 난이도<ul>
<li>비지도 학습 &gt;&gt;&gt; 지도학습</li>
</ul>
</li>
<li>비지도학습<ul>
<li>분류 –&gt; 수치적으로 분류</li>
<li>뉴스 기사 분류<ul>
<li>만 개 이상의 기사 분류</li>
<li>정치 &#x2F;사회 &#x2F; 경제 &#x2F; 세계 &#x2F; 연예 &#x2F; 스포츠 &#x2F; 건강 등</li>
<li>러시아 - 우크라이나 정세<ul>
<li>세계뉴스? 경제뉴스? 사회뉴스?</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="주성분-분석"><a href="#주성분-분석" class="headerlink" title="주성분 분석"></a>주성분 분석</h2><ul>
<li><p>Feature Engineering 기법</p>
</li>
<li><p>StandardScaler()</p>
</li>
<li><p>좌표계 공간 개념</p>
<ul>
<li>직교 + 회전</li>
</ul>
</li>
<li><p>공분산 등(통계 관련 내용)</p>
</li>
<li><p>Feature Engineering 기법</p>
</li>
<li><p>StandardScaler()</p>
</li>
<li><p>현 ML의 문제점 : 컬림의 갯수가 매우 많음</p>
</li>
<li><p>차원 축소</p>
<ul>
<li>특성이 많으면 훈련 데이터에 쉽게 과대적합됨</li>
<li>특성을 줄여서 학습 모델의 성능 향상</li>
<li>모델의 학습 시간을 감소시켜줌</li>
<li>대표적 방법론 : PCA, EFA</li>
</ul>
</li>
<li><p>PCA vs EFA</p>
<ul>
<li>EFA(탐색적 요인 분석), Factor Analysis<ul>
<li>예) 국어, 수학, 과학, 영어</li>
<li>예) 국어 40&#x2F;수학 100&#x2F;과학 100&#x2F;영어 30 –&gt; 위 학생은 언어영역은 수준이 낮은 편이나 수리영역은 매우 수준이 높습니다.</li>
<li>예) 범주형 &amp; 수치 데이터세트</li>
</ul>
</li>
<li>PCA(주성분 분석)<ul>
<li>장비1, 장비2, 장비3, 장비4, …</li>
<li>PC1, PC2, PC3, PC4, …, PCN</li>
<li>원래 가지고 있던 정보를 알 수 없음(정보 손실)</li>
<li>범주형 데이터세트에는 사용할 수 없음</li>
<li>무조건 수치형 데이터세트에만 사용</li>
<li>PCA를 실행 전, 반드시 표준화 처리(스케일링 실행)</li>
</ul>
</li>
</ul>
</li>
<li><p>p.320</p>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">!wget https://bit.ly/fruits_300_data -O fruits_300.npy</span><br></pre></td></tr></table></figure>

<pre><code>--2022-07-05 04:54:41--  https://bit.ly/fruits_300_data
Resolving bit.ly (bit.ly)... 67.199.248.10, 67.199.248.11
Connecting to bit.ly (bit.ly)|67.199.248.10|:443... connected.
HTTP request sent, awaiting response... 301 Moved Permanently
Location: https://github.com/rickiepark/hg-mldl/raw/master/fruits_300.npy [following]
--2022-07-05 04:54:41--  https://github.com/rickiepark/hg-mldl/raw/master/fruits_300.npy
Resolving github.com (github.com)... 140.82.113.4
Connecting to github.com (github.com)|140.82.113.4|:443... connected.
HTTP request sent, awaiting response... 302 Found
Location: https://raw.githubusercontent.com/rickiepark/hg-mldl/master/fruits_300.npy [following]
--2022-07-05 04:54:42--  https://raw.githubusercontent.com/rickiepark/hg-mldl/master/fruits_300.npy
Resolving raw.githubusercontent.com (raw.githubusercontent.com)... 185.199.108.133, 185.199.109.133, 185.199.110.133, ...
Connecting to raw.githubusercontent.com (raw.githubusercontent.com)|185.199.108.133|:443... connected.
HTTP request sent, awaiting response... 200 OK
Length: 3000128 (2.9M) [application/octet-stream]
Saving to: ‘fruits_300.npy’

fruits_300.npy      100%[===================&gt;]   2.86M  --.-KB/s    in 0.07s   

2022-07-05 04:54:42 (42.9 MB/s) - ‘fruits_300.npy’ saved [3000128/3000128]
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line">fruits = np.load(<span class="string">&#x27;/content/fruits_300.npy&#x27;</span>)</span><br><span class="line">fruits_2d = fruits.reshape(-<span class="number">1</span>, <span class="number">100</span> * <span class="number">100</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 300개 행, 10000개의 열</span></span><br><span class="line">fruits_2d.shape</span><br></pre></td></tr></table></figure>




<pre><code>(300, 10000)
</code></pre>
<ul>
<li>PCA</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> sklearn.decomposition <span class="keyword">import</span> PCA</span><br><span class="line">pca = PCA(n_components = <span class="number">50</span>)</span><br><span class="line">pca.fit(fruits_2d)</span><br></pre></td></tr></table></figure>




<pre><code>PCA(n_components=50)
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(pca.components_.shape)</span><br><span class="line"><span class="comment"># 50개 주성분을 찾았다는 것</span></span><br><span class="line"><span class="comment"># 10000개의 픽셀 특성을 줄이는 것이 아님</span></span><br></pre></td></tr></table></figure>

<pre><code>(50, 10000)
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">draw_fruits</span>(<span class="params">arr, ratio=<span class="number">1</span></span>):</span><br><span class="line">    n = <span class="built_in">len</span>(arr)    <span class="comment"># n은 샘플 개수입니다</span></span><br><span class="line">    <span class="comment"># 한 줄에 10개씩 이미지를 그립니다. 샘플 개수를 10으로 나누어 전체 행 개수를 계산합니다. </span></span><br><span class="line">    rows = <span class="built_in">int</span>(np.ceil(n/<span class="number">10</span>))</span><br><span class="line">    <span class="comment"># 행이 1개 이면 열 개수는 샘플 개수입니다. 그렇지 않으면 10개입니다.</span></span><br><span class="line">    cols = n <span class="keyword">if</span> rows &lt; <span class="number">2</span> <span class="keyword">else</span> <span class="number">10</span></span><br><span class="line">    fig, axs = plt.subplots(rows, cols, </span><br><span class="line">                            figsize=(cols*ratio, rows*ratio), squeeze=<span class="literal">False</span>)</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(rows):</span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(cols):</span><br><span class="line">            <span class="keyword">if</span> i*<span class="number">10</span> + j &lt; n:    <span class="comment"># n 개까지만 그립니다.</span></span><br><span class="line">                axs[i, j].imshow(arr[i*<span class="number">10</span> + j], cmap=<span class="string">&#x27;gray_r&#x27;</span>)</span><br><span class="line">            axs[i, j].axis(<span class="string">&#x27;off&#x27;</span>)</span><br><span class="line">    plt.show()</span><br></pre></td></tr></table></figure>


<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">draw_fruits(pca.components_.reshape(-<span class="number">1</span>, <span class="number">100</span>, <span class="number">100</span>))</span><br></pre></td></tr></table></figure>


<p><img src="/../images/Day14_20220705_ML/output_16_0.png" alt="png"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 머신러닝에서 컬럼의 갯수를 10000개에서 50개로 줄임</span></span><br><span class="line"><span class="comment">## 컬럼이 수치 데이터일 때만 가능함</span></span><br><span class="line">fruits_pca = pca.transform(fruits_2d)</span><br><span class="line"><span class="built_in">print</span>(fruits_pca.shape)</span><br></pre></td></tr></table></figure>

<pre><code>(300, 50)
</code></pre>
<ul>
<li>훈련데이터, 테스트데이터 분리</li>
</ul>
<h3 id="설명된-분산"><a href="#설명된-분산" class="headerlink" title="설명된 분산"></a>설명된 분산</h3><ul>
<li>주성분이 원본 데이터의 분산을 얼마나 잘 나타내는지 기록한 값</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 92%</span></span><br><span class="line"><span class="comment"># 원본 이미지 압축</span></span><br><span class="line"><span class="built_in">print</span>(np.<span class="built_in">sum</span>(pca.explained_variance_ratio_))</span><br></pre></td></tr></table></figure>

<pre><code>0.9215461847321526
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">plt.plot(pca.explained_variance_ratio_)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>


<p><img src="/../images/Day14_20220705_ML/output_21_0.png" alt="png"></p>

      
    </div>
    <footer class="entry-meta entry-footer">
      
      
      
    </footer>
    <hr class="entry-footer-hr">
  </div>
  
</article>

<!-- Table of Contents -->

  


  <nav id="page-nav">
    
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><a class="extend next" rel="next" href="/page/2/">Next</a>
  </nav>

</section>
          <aside id="sidebar">
  
    <div style="margin: 20px 0;">
	<div id="search-form-wrap">

    <form class="search-form">
        <label style="width: 72%;">
            <span class="screen-reader-text">Search for:</span>
            <input type="search" class="search-field" style="height: 36px; width: 100%;" placeholder=" Search…" value="" name="s" title="Search for:">
        </label>
        <input type="submit" class="search-form-submit" value="Search">
    </form>
    <div class="ins-search">
    <div class="ins-search-mask"></div>
    <div class="ins-search-container">
        <div class="ins-input-wrapper">
            <input type="text" class="ins-search-input" placeholder="Type something..."/>
            <span class="ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
(function (window) {
    var INSIGHT_CONFIG = {
        TRANSLATION: {
            POSTS: 'Posts',
            PAGES: 'Pages',
            CATEGORIES: 'Categories',
            TAGS: 'Tags',
            UNTITLED: '(Untitled)',
        },
        ROOT_URL: '/',
        CONTENT_URL: '/content.json',
    };
    window.INSIGHT_CONFIG = INSIGHT_CONFIG;
})(window);
</script>

<script src="/js/insight.js"></script>


</div>
</div>
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Connect With Us</h3>
    <div class="widget widget_athemes_social_icons">

    	<ul class="clearfix widget-social-icons">   
    	
   			<li><a target="_blank" rel="noopener" href="https://github.com/iTimeTraveler" title="Github"><i class="fa fa-github" aria-hidden="true"></i></a></li> 

   		
   			<li><a href="" title="Weibo"><i class="fa fa-weibo" aria-hidden="true"></i></a></li> 

   		
   			<li><a href="" title="Twitter"><i class="fa fa-twitter" aria-hidden="true"></i></a></li> 

   		
   			<li><a href="" title="Facebook"><i class="fa fa-facebook" aria-hidden="true"></i></a></li> 

   		
   			<li><a href="" title="Google-plus"><i class="fa fa-google-plus" aria-hidden="true"></i></a></li> 

   		
   			<li><a href="" title="Instagram"><i class="fa fa-instagram" aria-hidden="true"></i></a></li> 

   		
   		</ul>


   		<!--
   		<ul class="clearfix widget-social-icons">   		
   		<li class="widget-si-twitter"><a target="_blank" rel="noopener" href="http://twitter.com" title="Twitter"><i class="ico-twitter"></i></a></li> 
		<li class="widget-si-facebook"><a target="_blank" rel="noopener" href="http://facebook.com" title="Facebook"><i class="ico-facebook"></i></a></li>
			<li class="widget-si-gplus"><a target="_blank" rel="noopener" href="http://plus.google.com" title="Google+"><i class="ico-gplus"></i></a></li>
			<li class="widget-si-pinterest"><a target="_blank" rel="noopener" href="http://pinterest.com" title="Pinterest"><i class="ico-pinterest"></i></a></li>
			<li class="widget-si-flickr"><a target="_blank" rel="noopener" href="http://flickr.com" title="Flickr"><i class="ico-flickr"></i></a></li>
			<li class="widget-si-instagram"><a target="_blank" rel="noopener" href="http://instagram.com" title="Instagram"><i class="ico-instagram"></i></a></li>
		</ul> -->

    </div>
  </div>


  
    
  <div class="widget_athemes_tabs">
    <ul id="widget-tab" class="clearfix widget-tab-nav">
      <li class="active"><a>Recent Posts</a></li>
    </ul>
    <div class="widget">
      <ul>
        
          <li class="clearfix">

            
              <div class="widget-entry-summary" style="margin: 0;">
            

              <h6 style="margin: 0;"><a href="/2022/07/26/example/">July 26, 2022, Day29</a></h6>
              <span>July 26, 2022</span>
            </div>

          </li>
        
          <li class="clearfix">

            
              <div class="widget-entry-summary" style="margin: 0;">
            

              <h6 style="margin: 0;"><a href="/2022/07/22/Day27_20220722/">July 22, 2022, Day27</a></h6>
              <span>July 22, 2022</span>
            </div>

          </li>
        
          <li class="clearfix">

            
              <div class="widget-entry-summary" style="margin: 0;">
            

              <h6 style="margin: 0;"><a href="/2022/07/21/Day26_20220721/">July 21, 2022, Day26</a></h6>
              <span>July 21, 2022</span>
            </div>

          </li>
        
          <li class="clearfix">

            
              <div class="widget-entry-summary" style="margin: 0;">
            

              <h6 style="margin: 0;"><a href="/2022/07/20/Day25_20220720/">July 20, 2022, Day25</a></h6>
              <span>July 20, 2022</span>
            </div>

          </li>
        
          <li class="clearfix">

            
              <div class="widget-entry-summary" style="margin: 0;">
            

              <h6 style="margin: 0;"><a href="/2022/07/19/Day24_20220719/">July 19, 2022, Day24</a></h6>
              <span>July 19, 2022</span>
            </div>

          </li>
        
          <li class="clearfix">

            
              <div class="widget-entry-summary" style="margin: 0;">
            

              <h6 style="margin: 0;"><a href="/2022/07/08/bike-sharing-training/">Bike Sharing Demand Training</a></h6>
              <span>July 8, 2022</span>
            </div>

          </li>
        
      </ul>
    </div>
  </div>

  
    

  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>

    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/07/">July 2022</a><span class="archive-list-count">13</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/06/">June 2022</a><span class="archive-list-count">15</span></li></ul>
    </div>
  </div>


  
</aside>
        
      </div>

    </div>
    <!-- <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
    <a href="/categories" class="mobile-nav-link">Categories</a>
  
    <a href="/tags" class="mobile-nav-link">Tags</a>
  
    <a href="/about" class="mobile-nav-link">About</a>
  
</nav> -->
    <footer id="footer" class="site-footer">
  

  <div class="clearfix container">
      <div class="site-info">
	      &copy; 2022 SeungZZang&#39;s Blog All Rights Reserved.
        
            <span id="busuanzi_container_site_uv">
              本站访客数<span id="busuanzi_value_site_uv"></span>人次  
              本站总访问量<span id="busuanzi_value_site_pv"></span>次
            </span>
          
      </div>
      <div class="site-credit">
        Theme by <a href="https://github.com/iTimeTraveler/hexo-theme-hipaper" target="_blank">hipaper</a>
      </div>
  </div>
</footer>


<!-- min height -->

<script>
    var wrapdiv = document.getElementById("wrap");
    var contentdiv = document.getElementById("content");

    wrapdiv.style.minHeight = document.body.offsetHeight - document.getElementById("allheader").offsetHeight - document.getElementById("footer").offsetHeight + "px";
    contentdiv.style.minHeight = document.body.offsetHeight - document.getElementById("allheader").offsetHeight - document.getElementById("footer").offsetHeight + "px";


    <!-- headerblur min height -->
    
    
</script>
    
<div style="display: none;">
  <script src="https://s11.cnzz.com/z_stat.php?id=1260716016&web_id=1260716016" language="JavaScript"></script>
</div>

<!-- mathjax config similar to math.stackexchange -->

<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      processEscapes: true
    }
  });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
      }
    });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for(i=0; i < all.length; i += 1) {
            all[i].SourceElement().parentNode.className += ' has-jax';
        }
    });
</script>

<script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>


  
<link rel="stylesheet" href="/fancybox/jquery.fancybox.css">

  
<script src="/fancybox/jquery.fancybox.pack.js"></script>




<script src="/js/script.js"></script>


<script src="/js/bootstrap.js"></script>


<script src="/js/main.js"></script>








  <div style="display: none;">
    <script src="https://s95.cnzz.com/z_stat.php?id=1260716016&web_id=1260716016" language="JavaScript"></script>
  </div>



	<script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js">
	</script>






  </div>

  <a id="rocket" href="#top" class=""></a>
  <script type="text/javascript" src="/js/totop.js" async=""></script>
</body>
</html>
